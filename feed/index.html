<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>果醬珍珍•JamJam</title>
	<atom:link href="/feed/" rel="self" type="application/rss+xml" />
	<link>/</link>
	<description>健忘女孩Jam的學習筆記和生活雜記</description>
	<lastBuildDate>Fri, 03 Jul 2020 02:21:33 +0000</lastBuildDate>
	<language>zh-TW</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.7.2</generator>
	<item>
		<title>JB&#8217;s Diner &#124; 陽光、綠意、自然度假風美式早午餐 &#124; 台北 天母</title>
		<link>/jbs-diner/</link>
					<comments>/jbs-diner/#respond</comments>
		
		<dc:creator><![CDATA[jamleecute]]></dc:creator>
		<pubDate>Sun, 25 Aug 2019 04:45:22 +0000</pubDate>
				<category><![CDATA[台灣美食]]></category>
		<category><![CDATA[美食]]></category>
		<category><![CDATA[JB's Diner]]></category>
		<category><![CDATA[天母]]></category>
		<guid isPermaLink="false">/?p=3012</guid>

					<description><![CDATA[<p>JB&#8217;s Diner 有著一個一片綠油油的小花園、漆成淺棕色的外牆與大片大片的落地窗，初次經過真的會給人留下特別的印象，像個可愛的小木屋，有著濃濃的 [&#8230;]</p>
<p>這篇文章 <a rel="nofollow" href="/jbs-diner/">JB&#8217;s Diner | 陽光、綠意、自然度假風美式早午餐 | 台北 天母</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></description>
										<content:encoded><![CDATA[<p>JB&#8217;s Diner 有著一個一片綠油油的小花園、漆成淺棕色的外牆與大片大片的落地窗，初次經過真的會給人留下特別的印象，像個可愛的小木屋，有著濃濃的大自然的度假風格。餐廳用餐空間滿大的，共兩層樓，假日人潮特別多，建議想來的話可以先透過官方網路定位系統先卡位喔。</p>
<p>JB&#8217;s Diner 店門口</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3045" src="/wp-content/uploads/2019/08/IMG_7514_門口1.jpg" alt="JB's Diner" width="1085" height="720" srcset="/wp-content/uploads/2019/08/IMG_7514_門口1.jpg 1085w, /wp-content/uploads/2019/08/IMG_7514_門口1-300x199.jpg 300w, /wp-content/uploads/2019/08/IMG_7514_門口1-768x510.jpg 768w, /wp-content/uploads/2019/08/IMG_7514_門口1-1024x680.jpg 1024w, /wp-content/uploads/2019/08/IMG_7514_門口1-830x551.jpg 830w, /wp-content/uploads/2019/08/IMG_7514_門口1-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7514_門口1-350x232.jpg 350w, /wp-content/uploads/2019/08/IMG_7514_門口1-480x319.jpg 480w" sizes="(max-width: 1085px) 100vw, 1085px" /></p>
<p>一樓的接待小櫃檯</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3027" src="/wp-content/uploads/2019/08/IMG_7394.jpg" alt="JB's Diner" width="988" height="1480" srcset="/wp-content/uploads/2019/08/IMG_7394.jpg 988w, /wp-content/uploads/2019/08/IMG_7394-200x300.jpg 200w, /wp-content/uploads/2019/08/IMG_7394-768x1150.jpg 768w, /wp-content/uploads/2019/08/IMG_7394-684x1024.jpg 684w, /wp-content/uploads/2019/08/IMG_7394-830x1243.jpg 830w, /wp-content/uploads/2019/08/IMG_7394-230x345.jpg 230w, /wp-content/uploads/2019/08/IMG_7394-350x524.jpg 350w, /wp-content/uploads/2019/08/IMG_7394-480x719.jpg 480w" sizes="(max-width: 988px) 100vw, 988px" /></p>
<p>一樓的吧台</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3025" src="/wp-content/uploads/2019/08/IMG_7393.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7393.jpg 1500w, /wp-content/uploads/2019/08/IMG_7393-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7393-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7393-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7393-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7393-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7393-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7393-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>二樓的用餐空間 採光非常棒！</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3028" src="/wp-content/uploads/2019/08/IMG_7398.jpg" alt="JB's Diner" width="1401" height="936" srcset="/wp-content/uploads/2019/08/IMG_7398.jpg 1401w, /wp-content/uploads/2019/08/IMG_7398-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7398-768x513.jpg 768w, /wp-content/uploads/2019/08/IMG_7398-1024x684.jpg 1024w, /wp-content/uploads/2019/08/IMG_7398-830x555.jpg 830w, /wp-content/uploads/2019/08/IMG_7398-230x154.jpg 230w, /wp-content/uploads/2019/08/IMG_7398-350x234.jpg 350w, /wp-content/uploads/2019/08/IMG_7398-480x321.jpg 480w" sizes="(max-width: 1401px) 100vw, 1401px" /></p>
<p>二樓拖鞋用餐區</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3022" src="/wp-content/uploads/2019/08/IMG_7390.jpg" alt="JB's Diner" width="1480" height="985" srcset="/wp-content/uploads/2019/08/IMG_7390.jpg 1480w, /wp-content/uploads/2019/08/IMG_7390-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7390-768x511.jpg 768w, /wp-content/uploads/2019/08/IMG_7390-1024x682.jpg 1024w, /wp-content/uploads/2019/08/IMG_7390-830x552.jpg 830w, /wp-content/uploads/2019/08/IMG_7390-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7390-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7390-480x319.jpg 480w" sizes="(max-width: 1480px) 100vw, 1480px" /></p>
<p>二樓的一處網美景觀小角落</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3032" src="/wp-content/uploads/2019/08/IMG_7387_板凳區3.jpg" alt="JB's Diner" width="1480" height="984" srcset="/wp-content/uploads/2019/08/IMG_7387_板凳區3.jpg 1480w, /wp-content/uploads/2019/08/IMG_7387_板凳區3-300x199.jpg 300w, /wp-content/uploads/2019/08/IMG_7387_板凳區3-768x511.jpg 768w, /wp-content/uploads/2019/08/IMG_7387_板凳區3-1024x681.jpg 1024w, /wp-content/uploads/2019/08/IMG_7387_板凳區3-830x552.jpg 830w, /wp-content/uploads/2019/08/IMG_7387_板凳區3-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7387_板凳區3-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7387_板凳區3-480x319.jpg 480w" sizes="(max-width: 1480px) 100vw, 1480px" /></p>
<p>菜單</p>
<p>很大一本，餐點非常多元</p>
<p>開胃菜、湯&amp;沙啦</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3014" src="/wp-content/uploads/2019/08/菜單2-1.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/菜單2-1.jpg 1500w, /wp-content/uploads/2019/08/菜單2-1-300x200.jpg 300w, /wp-content/uploads/2019/08/菜單2-1-768x512.jpg 768w, /wp-content/uploads/2019/08/菜單2-1-1024x683.jpg 1024w, /wp-content/uploads/2019/08/菜單2-1-830x553.jpg 830w, /wp-content/uploads/2019/08/菜單2-1-230x153.jpg 230w, /wp-content/uploads/2019/08/菜單2-1-350x233.jpg 350w, /wp-content/uploads/2019/08/菜單2-1-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>早午餐</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3015" src="/wp-content/uploads/2019/08/菜單3-1.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/菜單3-1.jpg 1500w, /wp-content/uploads/2019/08/菜單3-1-300x200.jpg 300w, /wp-content/uploads/2019/08/菜單3-1-768x512.jpg 768w, /wp-content/uploads/2019/08/菜單3-1-1024x683.jpg 1024w, /wp-content/uploads/2019/08/菜單3-1-830x553.jpg 830w, /wp-content/uploads/2019/08/菜單3-1-230x153.jpg 230w, /wp-content/uploads/2019/08/菜單3-1-350x233.jpg 350w, /wp-content/uploads/2019/08/菜單3-1-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>班尼迪克蛋 （可以選搭配 現煎薯餅 or 炒薯塊 or 水果沙拉) 、 蛋捲</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3016" src="/wp-content/uploads/2019/08/菜單4-1.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/菜單4-1.jpg 1500w, /wp-content/uploads/2019/08/菜單4-1-300x200.jpg 300w, /wp-content/uploads/2019/08/菜單4-1-768x512.jpg 768w, /wp-content/uploads/2019/08/菜單4-1-1024x683.jpg 1024w, /wp-content/uploads/2019/08/菜單4-1-830x553.jpg 830w, /wp-content/uploads/2019/08/菜單4-1-230x153.jpg 230w, /wp-content/uploads/2019/08/菜單4-1-350x233.jpg 350w, /wp-content/uploads/2019/08/菜單4-1-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>美式鬆餅 、經典 vs. 風味 漢堡</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3017" src="/wp-content/uploads/2019/08/菜單5-1.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/菜單5-1.jpg 1500w, /wp-content/uploads/2019/08/菜單5-1-300x200.jpg 300w, /wp-content/uploads/2019/08/菜單5-1-768x512.jpg 768w, /wp-content/uploads/2019/08/菜單5-1-1024x683.jpg 1024w, /wp-content/uploads/2019/08/菜單5-1-830x553.jpg 830w, /wp-content/uploads/2019/08/菜單5-1-230x153.jpg 230w, /wp-content/uploads/2019/08/菜單5-1-350x233.jpg 350w, /wp-content/uploads/2019/08/菜單5-1-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>漢堡 、 三明治</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3018" src="/wp-content/uploads/2019/08/菜單6.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/菜單6.jpg 1500w, /wp-content/uploads/2019/08/菜單6-300x200.jpg 300w, /wp-content/uploads/2019/08/菜單6-768x512.jpg 768w, /wp-content/uploads/2019/08/菜單6-1024x683.jpg 1024w, /wp-content/uploads/2019/08/菜單6-830x553.jpg 830w, /wp-content/uploads/2019/08/菜單6-230x153.jpg 230w, /wp-content/uploads/2019/08/菜單6-350x233.jpg 350w, /wp-content/uploads/2019/08/菜單6-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>風味上菜</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3019" src="/wp-content/uploads/2019/08/菜單7.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/菜單7.jpg 1500w, /wp-content/uploads/2019/08/菜單7-300x200.jpg 300w, /wp-content/uploads/2019/08/菜單7-768x512.jpg 768w, /wp-content/uploads/2019/08/菜單7-1024x683.jpg 1024w, /wp-content/uploads/2019/08/菜單7-830x553.jpg 830w, /wp-content/uploads/2019/08/菜單7-230x153.jpg 230w, /wp-content/uploads/2019/08/菜單7-350x233.jpg 350w, /wp-content/uploads/2019/08/菜單7-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>義大利麵 、 兒童餐</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3020" src="/wp-content/uploads/2019/08/菜單8.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/菜單8.jpg 1500w, /wp-content/uploads/2019/08/菜單8-300x200.jpg 300w, /wp-content/uploads/2019/08/菜單8-768x512.jpg 768w, /wp-content/uploads/2019/08/菜單8-1024x683.jpg 1024w, /wp-content/uploads/2019/08/菜單8-830x553.jpg 830w, /wp-content/uploads/2019/08/菜單8-230x153.jpg 230w, /wp-content/uploads/2019/08/菜單8-350x233.jpg 350w, /wp-content/uploads/2019/08/菜單8-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>小點</p>
<p>還可以單點白土司、麵包、培根、炒蘑菇、水果沙拉、馬鈴薯泥、炭烤蔬菜串</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3021" src="/wp-content/uploads/2019/08/菜單9.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/菜單9.jpg 1500w, /wp-content/uploads/2019/08/菜單9-300x200.jpg 300w, /wp-content/uploads/2019/08/菜單9-768x512.jpg 768w, /wp-content/uploads/2019/08/菜單9-1024x683.jpg 1024w, /wp-content/uploads/2019/08/菜單9-830x553.jpg 830w, /wp-content/uploads/2019/08/菜單9-230x153.jpg 230w, /wp-content/uploads/2019/08/菜單9-350x233.jpg 350w, /wp-content/uploads/2019/08/菜單9-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>飲料的部分</p>
<p>有茶、咖啡、新鮮果汁、氣泡飲、奶昔</p>
<p>種類非常多</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3031" src="/wp-content/uploads/2019/08/菜單0-1.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/菜單0-1.jpg 1500w, /wp-content/uploads/2019/08/菜單0-1-300x200.jpg 300w, /wp-content/uploads/2019/08/菜單0-1-768x512.jpg 768w, /wp-content/uploads/2019/08/菜單0-1-1024x683.jpg 1024w, /wp-content/uploads/2019/08/菜單0-1-830x553.jpg 830w, /wp-content/uploads/2019/08/菜單0-1-230x153.jpg 230w, /wp-content/uploads/2019/08/菜單0-1-350x233.jpg 350w, /wp-content/uploads/2019/08/菜單0-1-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>酒類飲品</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3029" src="/wp-content/uploads/2019/08/菜單1-2.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/菜單1-2.jpg 1500w, /wp-content/uploads/2019/08/菜單1-2-300x200.jpg 300w, /wp-content/uploads/2019/08/菜單1-2-768x512.jpg 768w, /wp-content/uploads/2019/08/菜單1-2-1024x683.jpg 1024w, /wp-content/uploads/2019/08/菜單1-2-830x553.jpg 830w, /wp-content/uploads/2019/08/菜單1-2-230x153.jpg 230w, /wp-content/uploads/2019/08/菜單1-2-350x233.jpg 350w, /wp-content/uploads/2019/08/菜單1-2-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>今天點的是 班尼迪克蛋 &#8211; 鮮蝦&amp;酪梨 ($360) 搭配 炒薯塊</p>
<p>鮮蝦很多酪梨野新鮮好吃<img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f60b.png" alt="😋" class="wp-smiley" style="height: 1em; max-height: 1em;" /> 薯塊也不會油膩</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3036" src="/wp-content/uploads/2019/08/IMG_7402.jpg" alt="JB's Diner" width="1412" height="941" srcset="/wp-content/uploads/2019/08/IMG_7402.jpg 1412w, /wp-content/uploads/2019/08/IMG_7402-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7402-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7402-1024x682.jpg 1024w, /wp-content/uploads/2019/08/IMG_7402-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7402-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7402-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7402-480x320.jpg 480w" sizes="(max-width: 1412px) 100vw, 1412px" /></p>
<p>鮮蝦 &amp; 酪梨 特寫</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3033" src="/wp-content/uploads/2019/08/IMG_7404.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7404.jpg 1500w, /wp-content/uploads/2019/08/IMG_7404-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7404-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7404-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7404-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7404-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7404-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7404-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>班尼迪克蛋 &#8211; 培根&amp;番茄 ($320)</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3040" src="/wp-content/uploads/2019/08/IMG_7406.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7406.jpg 1500w, /wp-content/uploads/2019/08/IMG_7406-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7406-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7406-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7406-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7406-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7406-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7406-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>炒薯塊 特寫</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3039" src="/wp-content/uploads/2019/08/IMG_7405.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7405.jpg 1500w, /wp-content/uploads/2019/08/IMG_7405-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7405-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7405-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7405-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7405-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7405-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7405-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>熱拿鐵 ($160)</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3037" src="/wp-content/uploads/2019/08/IMG_7400.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7400.jpg 1500w, /wp-content/uploads/2019/08/IMG_7400-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7400-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7400-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7400-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7400-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7400-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7400-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>熱摩卡 ($180)</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3035" src="/wp-content/uploads/2019/08/IMG_7401.jpg" alt="JB's Diner" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7401.jpg 1500w, /wp-content/uploads/2019/08/IMG_7401-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7401-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7401-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7401-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7401-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7401-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7401-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>吃飽後 就來網美景觀區 拍拍照囉～</p>
<p>這區不會有客人用餐 可以自在的拍攝</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3052" src="/wp-content/uploads/2019/08/IMG_7422_橫.jpg" alt="IMG_7422_橫" width="1220" height="960" srcset="/wp-content/uploads/2019/08/IMG_7422_橫.jpg 1220w, /wp-content/uploads/2019/08/IMG_7422_橫-300x236.jpg 300w, /wp-content/uploads/2019/08/IMG_7422_橫-768x604.jpg 768w, /wp-content/uploads/2019/08/IMG_7422_橫-1024x806.jpg 1024w, /wp-content/uploads/2019/08/IMG_7422_橫-830x653.jpg 830w, /wp-content/uploads/2019/08/IMG_7422_橫-230x181.jpg 230w, /wp-content/uploads/2019/08/IMG_7422_橫-350x275.jpg 350w, /wp-content/uploads/2019/08/IMG_7422_橫-480x378.jpg 480w" sizes="(max-width: 1220px) 100vw, 1220px" /></p>
<p><strong><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/270f.png" alt="✏" class="wp-smiley" style="height: 1em; max-height: 1em;" />心得</strong></p>
<p>餐廳設計很有度假與美式風格，採光很好，餐廳空間非常大，有一些長桌區的座位，很適合多人聚會用餐喔！</p>
<p>而且餐點與飲品種類真的很多，全家大小都適合。</p>
<p>假日人潮真的滿多的，建議提前定位再來喔～</p>
<p><strong><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f4cc.png" alt="📌" class="wp-smiley" style="height: 1em; max-height: 1em;" />餐廳資訊</strong></p>
<ul>
<li>營業時間
<ul>
<li>每週二至週日8:00~21:00 (20:00為最後點餐時間)</li>
<li>週一為店休日，如遇特殊節慶日將會另行公佈營業時間。</li>
</ul>
</li>
<li>訂位
<ul>
<li>全面採網路訂位，不接受電話訂位、現場訂位、FACEBOOK訊息訂位。</li>
<li>如遇網路訂位額滿，或訂不到您要的時段，我們仍有保留空桌，您可以〈現場候位〉，等候時間視當日現場狀況。</li>
<li>為了讓客人都有訂位用餐的機會，限定每1組電話可訂位次數為1次。</li>
<li>訂位座位不開放指定，須依當日現場狀況而定。</li>
<li>餐廳座位有限一次訂位最多開放12人</li>
<li><a href="https://b.bookhalo.tw/?fbclid=IwAR1cXGdZ0pF-kTGjRLtQXMRYD1fq0EKvuxCKk07pIJxasnJKkcZ0MiWXlCM#!/c/qpKuew2M" target="_blank" rel="noopener noreferrer">定位連結</a>  (Ps.請確認手機簡訊才能訂位成功。)</li>
</ul>
</li>
<li>用餐規定：
<ul>
<li>用餐限時2小時。</li>
<li>恕不提供分開結帳。</li>
<li>每人低消為$70。</li>
<li>訂位恕無保留逾時將直接取消座位不另行通知。</li>
<li>餐廳均酌收10％服務費。</li>
<li>不可攜帶外食及飲料 （除慶生蛋糕）。</li>
<li>若自帶酒均酌收開瓶費 $350/瓶。</li>
<li>可攜帶寵物但不得上桌椅。</li>
<li>如需打包或外帶並無提供餐具及袋子</li>
<li>如需購買紙袋請洽服務員。</li>
<li>餐廳內禁止任何商業拍攝、換衣服、道具或與餐點環境無關之攝影。</li>
</ul>
</li>
<li>付款：
<ul>
<li>可採現金、信用卡、Apple Pay、Android Pay、Samsung Pay</li>
<li>無提供美國運通卡、銀聯之刷卡服務，並無信用卡優惠活動</li>
</ul>
</li>
<li>交通：
<ul>
<li>餐廳無特約停車場，建議可停鄰近停車場（天母廣場）</li>
<li>捷運至石牌站轉公車601/224/645/602/902/紅12/紅19 至齊福華廈（步行至店裡約5分鐘）</li>
</ul>
</li>
<li><a href="https://www.facebook.com/judyandbert/" target="_blank" rel="noopener noreferrer">JB&#8217;s Diner Facebook</a></li>
</ul>
<p><strong><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f4cd.png" alt="📍" class="wp-smiley" style="height: 1em; max-height: 1em;" />餐廳位置</strong></p>
<p><iframe loading="lazy" width="600" height="450" style="border: 0;" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3612.463487782885!2d121.52739821500798!3d25.120016583932053!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3442ae8091cb25a7%3A0x5a4b73eeee155058!2sJB's%20Diner!5e0!3m2!1szh-TW!2stw!4v1566705766891!5m2!1szh-TW!2stw" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p>
<hr />
<p>更多台北 推薦網美餐廳：</p>
<p><a href="/%e9%82%80%e6%9c%88%e5%85%92/" target="_blank" rel="noopener noreferrer">邀月兒 | 適合放鬆小酌的迷人高級餐酒館 | 台北 民生社區 富錦街</a></p>
<p><a href="/september-cafe-%e4%b9%9d%e6%9c%88%e5%92%96%e5%95%a1/" target="_blank" rel="noopener noreferrer">September Cafe 九月咖啡 | 忍不住拍個不停的網美餐廳 | 台北大安</a></p>
<p><a href="/starbucks-coffee-tianmu-%e6%98%9f%e5%b7%b4%e5%85%8b-%e5%a4%a9%e7%8e%89%e9%96%80%e5%b8%82-%e5%a4%a9%e6%af%8d/" target="_blank" rel="noopener noreferrer">星巴克 天玉門市 Starbucks | 夢幻庭院 景觀咖啡廳 | 台北天母</a></p>
<p><a href="/eslite-cafe-%e4%bf%a1%e7%be%a9%e8%aa%a0%e5%93%81%e5%92%96%e5%95%a1/" target="_blank" rel="noopener noreferrer">信義誠品咖啡 Eslite Café | 美美的 優雅的 文青咖啡廳 | 台北 信義區</a></p>
<p>這篇文章 <a rel="nofollow" href="/jbs-diner/">JB&#8217;s Diner | 陽光、綠意、自然度假風美式早午餐 | 台北 天母</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></content:encoded>
					
					<wfw:commentRss>/jbs-diner/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>邀月兒 &#124; 適合放鬆小酌的迷人高級餐酒館 &#124; 台北 民生社區 富錦街</title>
		<link>/%e9%82%80%e6%9c%88%e5%85%92/</link>
					<comments>/%e9%82%80%e6%9c%88%e5%85%92/#respond</comments>
		
		<dc:creator><![CDATA[jamleecute]]></dc:creator>
		<pubDate>Sat, 24 Aug 2019 14:39:26 +0000</pubDate>
				<category><![CDATA[台灣美食]]></category>
		<category><![CDATA[美食]]></category>
		<category><![CDATA[富錦街]]></category>
		<category><![CDATA[民生社區]]></category>
		<category><![CDATA[邀月兒]]></category>
		<guid isPermaLink="false">/?p=2972</guid>

					<description><![CDATA[<p>邀月兒 ， 一直是我私心在民生社區最喜歡最喜歡的一家高級餐酒館，也是難得在民生社區營業許久的厲害店家。喜歡 邀月兒 歐陸風的裝潢風格與燈光設計，加上店家位在邊間 [&#8230;]</p>
<p>這篇文章 <a rel="nofollow" href="/%e9%82%80%e6%9c%88%e5%85%92/">邀月兒 | 適合放鬆小酌的迷人高級餐酒館 | 台北 民生社區 富錦街</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></description>
										<content:encoded><![CDATA[<p>邀月兒 ， 一直是我私心在民生社區最喜歡最喜歡的一家高級餐酒館，也是難得在民生社區營業許久的厲害店家。喜歡 邀月兒 歐陸風的裝潢風格與燈光設計，加上店家位在邊間的採光優勢，每次用餐或是路過都覺得是個迷人的餐廳，誘人忍不住想在富錦街這個美麗的角落放鬆小酌一杯。</p>
<p>邀月兒門口</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2979" src="/wp-content/uploads/2019/08/IMG_7223.jpg" alt="邀月兒" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7223.jpg 1500w, /wp-content/uploads/2019/08/IMG_7223-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7223-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7223-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7223-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7223-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7223-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7223-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>餐廳環境</p>
<p>一進門的吧台</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2980" src="/wp-content/uploads/2019/08/IMG_7232.jpg" alt="邀月兒" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7232.jpg 1500w, /wp-content/uploads/2019/08/IMG_7232-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7232-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7232-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7232-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7232-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7232-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7232-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>很多種酒～</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2990" src="/wp-content/uploads/2019/08/IMG_7248.jpg" alt="邀月兒" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7248.jpg 1500w, /wp-content/uploads/2019/08/IMG_7248-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7248-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7248-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7248-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7248-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7248-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7248-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>門口的糕點區</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2981" src="/wp-content/uploads/2019/08/IMG_7233.jpg" alt="邀月兒" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7233.jpg 1500w, /wp-content/uploads/2019/08/IMG_7233-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7233-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7233-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7233-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7233-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7233-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7233-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>主要用餐環境</p>
<p>位置間間隔很寬敞，感覺特別舒適，很適合約會</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2983" src="/wp-content/uploads/2019/08/IMG_7235.jpg" alt="邀月兒" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7235.jpg 1500w, /wp-content/uploads/2019/08/IMG_7235-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7235-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7235-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7235-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7235-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7235-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7235-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>今天的座位為是靠窗的位置，採光很好</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2985" src="/wp-content/uploads/2019/08/IMG_7242.jpg" alt="邀月兒" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7242.jpg 1500w, /wp-content/uploads/2019/08/IMG_7242-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7242-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7242-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7242-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7242-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7242-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7242-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-2986" src="/wp-content/uploads/2019/08/IMG_7244.jpg" alt="邀月兒" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7244.jpg 1500w, /wp-content/uploads/2019/08/IMG_7244-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7244-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7244-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7244-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7244-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7244-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7244-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>菜單</p>
<p>咖啡、茶類</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2973" src="/wp-content/uploads/2019/08/菜單0.jpg" alt="邀月兒" width="1000" height="1500" srcset="/wp-content/uploads/2019/08/菜單0.jpg 1000w, /wp-content/uploads/2019/08/菜單0-200x300.jpg 200w, /wp-content/uploads/2019/08/菜單0-768x1152.jpg 768w, /wp-content/uploads/2019/08/菜單0-683x1024.jpg 683w, /wp-content/uploads/2019/08/菜單0-830x1245.jpg 830w, /wp-content/uploads/2019/08/菜單0-230x345.jpg 230w, /wp-content/uploads/2019/08/菜單0-350x525.jpg 350w, /wp-content/uploads/2019/08/菜單0-480x720.jpg 480w" sizes="(max-width: 1000px) 100vw, 1000px" /></p>
<p>開胃小點</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2974" src="/wp-content/uploads/2019/08/菜單1.jpg" alt="邀月兒" width="1000" height="1500" srcset="/wp-content/uploads/2019/08/菜單1.jpg 1000w, /wp-content/uploads/2019/08/菜單1-200x300.jpg 200w, /wp-content/uploads/2019/08/菜單1-768x1152.jpg 768w, /wp-content/uploads/2019/08/菜單1-683x1024.jpg 683w, /wp-content/uploads/2019/08/菜單1-830x1245.jpg 830w, /wp-content/uploads/2019/08/菜單1-230x345.jpg 230w, /wp-content/uploads/2019/08/菜單1-350x525.jpg 350w, /wp-content/uploads/2019/08/菜單1-480x720.jpg 480w" sizes="(max-width: 1000px) 100vw, 1000px" /></p>
<p>手桿薄皮披薩 (8吋)</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2975" src="/wp-content/uploads/2019/08/菜單2.jpg" alt="邀月兒" width="1000" height="1500" srcset="/wp-content/uploads/2019/08/菜單2.jpg 1000w, /wp-content/uploads/2019/08/菜單2-200x300.jpg 200w, /wp-content/uploads/2019/08/菜單2-768x1152.jpg 768w, /wp-content/uploads/2019/08/菜單2-683x1024.jpg 683w, /wp-content/uploads/2019/08/菜單2-830x1245.jpg 830w, /wp-content/uploads/2019/08/菜單2-230x345.jpg 230w, /wp-content/uploads/2019/08/菜單2-350x525.jpg 350w, /wp-content/uploads/2019/08/菜單2-480x720.jpg 480w" sizes="(max-width: 1000px) 100vw, 1000px" /></p>
<p>義大利麵/燉飯</p>
<p>&nbsp;</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2976" src="/wp-content/uploads/2019/08/菜單3.jpg" alt="邀月兒" width="1000" height="1500" srcset="/wp-content/uploads/2019/08/菜單3.jpg 1000w, /wp-content/uploads/2019/08/菜單3-200x300.jpg 200w, /wp-content/uploads/2019/08/菜單3-768x1152.jpg 768w, /wp-content/uploads/2019/08/菜單3-683x1024.jpg 683w, /wp-content/uploads/2019/08/菜單3-830x1245.jpg 830w, /wp-content/uploads/2019/08/菜單3-230x345.jpg 230w, /wp-content/uploads/2019/08/菜單3-350x525.jpg 350w, /wp-content/uploads/2019/08/菜單3-480x720.jpg 480w" sizes="(max-width: 1000px) 100vw, 1000px" /></p>
<p>主餐</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2977" src="/wp-content/uploads/2019/08/菜單4.jpg" alt="邀月兒" width="1000" height="1500" srcset="/wp-content/uploads/2019/08/菜單4.jpg 1000w, /wp-content/uploads/2019/08/菜單4-200x300.jpg 200w, /wp-content/uploads/2019/08/菜單4-768x1152.jpg 768w, /wp-content/uploads/2019/08/菜單4-683x1024.jpg 683w, /wp-content/uploads/2019/08/菜單4-830x1245.jpg 830w, /wp-content/uploads/2019/08/菜單4-230x345.jpg 230w, /wp-content/uploads/2019/08/菜單4-350x525.jpg 350w, /wp-content/uploads/2019/08/菜單4-480x720.jpg 480w" sizes="(max-width: 1000px) 100vw, 1000px" /></p>
<p>Whine Rist 酒</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2978" src="/wp-content/uploads/2019/08/菜單5.jpg" alt="邀月兒" width="1000" height="1500" srcset="/wp-content/uploads/2019/08/菜單5.jpg 1000w, /wp-content/uploads/2019/08/菜單5-200x300.jpg 200w, /wp-content/uploads/2019/08/菜單5-768x1152.jpg 768w, /wp-content/uploads/2019/08/菜單5-683x1024.jpg 683w, /wp-content/uploads/2019/08/菜單5-830x1245.jpg 830w, /wp-content/uploads/2019/08/菜單5-230x345.jpg 230w, /wp-content/uploads/2019/08/菜單5-350x525.jpg 350w, /wp-content/uploads/2019/08/菜單5-480x720.jpg 480w" sizes="(max-width: 1000px) 100vw, 1000px" /></p>
<p>Piccini Memoro White (375 mel) ($480)</p>
<p>白酒 (酒精濃度15%) 口感不錯！適合搭配今天的海鮮類義大利麵/燉飯。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2998" src="/wp-content/uploads/2019/08/IMG_7343.jpg" alt="邀月兒" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7343.jpg 1500w, /wp-content/uploads/2019/08/IMG_7343-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7343-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7343-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7343-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7343-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7343-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7343-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-3010" src="/wp-content/uploads/2019/08/IMG_7258_洪文修.jpg" alt="邀月兒" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7258_洪文修.jpg 1500w, /wp-content/uploads/2019/08/IMG_7258_洪文修-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7258_洪文修-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7258_洪文修-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7258_洪文修-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7258_洪文修-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7258_洪文修-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7258_洪文修-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>加$150 升級套餐 有附沙拉和湯or飲料</p>
<p>新鮮的沙拉，醬汁滿特別的，喜歡</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2999" src="/wp-content/uploads/2019/08/IMG_7344.jpg" alt="邀月兒" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7344.jpg 1500w, /wp-content/uploads/2019/08/IMG_7344-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7344-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7344-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7344-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7344-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7344-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7344-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>海膽蟹肉義大利麵 ($480)</p>
<p>味增海膽醬汁的味道非常特別，蟹肉也很新鮮Q彈，份量恰到好處！義大利麵的口感完全不會有膩的感覺！</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3001" src="/wp-content/uploads/2019/08/IMG_7347.jpg" alt="邀月兒" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7347.jpg 1500w, /wp-content/uploads/2019/08/IMG_7347-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7347-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7347-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7347-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7347-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7347-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7347-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-3002" src="/wp-content/uploads/2019/08/IMG_7348.jpg" alt="邀月兒" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7348.jpg 1500w, /wp-content/uploads/2019/08/IMG_7348-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7348-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7348-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7348-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7348-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7348-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7348-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>白蘭地干貝燉飯 ($450)</p>
<p>共有兩顆大干貝！</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2996" src="/wp-content/uploads/2019/08/IMG_7340.jpg" alt="邀月兒" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7340.jpg 1500w, /wp-content/uploads/2019/08/IMG_7340-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7340-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7340-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7340-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7340-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7340-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7340-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>干貝超大一顆，<br />
而且超甜超好吃！～</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3000" src="/wp-content/uploads/2019/08/IMG_7346.jpg" alt="邀月兒" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7346.jpg 1500w, /wp-content/uploads/2019/08/IMG_7346-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7346-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7346-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7346-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7346-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7346-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7346-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>套餐飲料加價升級 冰拿鐵咖啡 ($160)</p>
<p><img loading="lazy" class="alignnone size-full wp-image-3003" src="/wp-content/uploads/2019/08/IMG_7368.jpg" alt="邀月兒" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7368.jpg 1500w, /wp-content/uploads/2019/08/IMG_7368-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7368-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7368-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7368-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7368-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7368-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7368-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p><strong><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/270f.png" alt="✏" class="wp-smiley" style="height: 1em; max-height: 1em;" />心得：</strong></p>
<p>環境真的很舒適，氣氛也特別迷人，真的很適合在這個富錦街漂亮的小角落小酌一杯放鬆心情。</p>
<p>餐點與酒也很令人滿意！是私心很喜歡也還會再光顧的店喔！</p>
<p><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f4cc.png" alt="📌" class="wp-smiley" style="height: 1em; max-height: 1em;" /><strong>餐廳資訊</strong></p>
<ul>
<li>營業時間 | 週一至週日 10:00 – 22:00</li>
<li>自備酒酌收開瓶費: 300元/瓶 ，不接受烈酒</li>
<li>每人低消一杯飲品或一份餐點</li>
<li>以上外加10%服務費，請勿帶外食</li>
<li>用餐時間為2小時</li>
</ul>
<p><a href="https://www.facebook.com/LunarBistro/" target="_blank" rel="noopener noreferrer">邀月兒FB</a></p>
<p><a href="https://www.facebook.com/pg/LunarBistro/photos/?tab=album&amp;album_id=2226387040783782&amp;ref=page_internal" target="_blank" rel="noopener noreferrer">邀月兒 最新菜單</a></p>
<p><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f4cd.png" alt="📍" class="wp-smiley" style="height: 1em; max-height: 1em;" /><strong>餐廳位置</strong></p>
<p><iframe loading="lazy" width="600" height="450" style="border: 0;" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3614.210930568086!2d121.55797131500671!3d25.060838983959826!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3442ab8d33f88f9d%3A0x203297f50906e4d!2z6YKA5pyI5YWS!5e0!3m2!1szh-TW!2stw!4v1566616206460!5m2!1szh-TW!2stw" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p>
<hr />
<p><strong>更多 台北 高級餐廳：</strong></p>
<p><a href="/eslite-cafe-%e4%bf%a1%e7%be%a9%e8%aa%a0%e5%93%81%e5%92%96%e5%95%a1/" target="_blank" rel="noopener noreferrer">信義誠品咖啡 Eslite Café | 美美的 優雅的 文青咖啡廳 | 台北 信義區</a></p>
<p><a href="/%e5%b0%8f%e9%bc%8e%e8%86%be/" target="_blank" rel="noopener noreferrer">小鼎膾 | 新鮮美味的高品質日式丼飯、海鮮料理 | 台北信義 Bellavita B2</a></p>
<p><a href="/hostshabu-%e5%90%88shabu-shabushabu/" target="_blank" rel="noopener noreferrer">合Shabu | 適合浪漫約會的高級和牛精緻火鍋 | 台北信義 Bellavita 4F</a></p>
<p><a href="/%e6%a9%98%e8%89%b2%e6%b6%ae%e6%b6%ae%e5%b1%8b-shabushabu-%e5%8f%b0%e5%8c%97%e4%bf%a1%e7%be%a9-%e6%96%b0%e5%85%89%e4%b8%89%e8%b6%8aa9/" target="_blank" rel="noopener noreferrer">橘色涮涮屋 | 100分高CP值的日式高級精緻火鍋 | 台北信義 新光三越A9</a></p>
<p><a href="/%e4%bd%86%e9%a6%ac%e5%ae%b6%e6%b6%ae%e6%b6%ae%e9%8d%8b-tajimaya-shabushabu/" target="_blank" rel="noopener noreferrer">但馬家涮涮鍋 | 奢華氣派優雅頂級鍋物 | 台北文華精品</a></p>
<p><a href="/2019-%e6%97%a5%e5%bc%8f%e9%ab%98%e7%b4%9a%e7%b2%be%e7%b7%bb%e9%8d%8b%e7%89%a9-shabushabu-%e5%8f%b0%e5%8c%97%e9%ab%98%e7%b4%9a%e7%81%ab%e9%8d%8b-%e6%97%a5%e5%bc%8f%e7%81%ab%e9%8d%8b/" target="_blank" rel="noopener noreferrer">台北高級火鍋 | 分享溫暖與愛的幸福鍋物清單 | 日式精緻鍋物系列</a></p>
<p>這篇文章 <a rel="nofollow" href="/%e9%82%80%e6%9c%88%e5%85%92/">邀月兒 | 適合放鬆小酌的迷人高級餐酒館 | 台北 民生社區 富錦街</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></content:encoded>
					
					<wfw:commentRss>/%e9%82%80%e6%9c%88%e5%85%92/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>信義誠品咖啡 Eslite Café &#124; 美美的 優雅的 文青咖啡廳 &#124; 台北 信義區</title>
		<link>/eslite-cafe-%e4%bf%a1%e7%be%a9%e8%aa%a0%e5%93%81%e5%92%96%e5%95%a1/</link>
					<comments>/eslite-cafe-%e4%bf%a1%e7%be%a9%e8%aa%a0%e5%93%81%e5%92%96%e5%95%a1/#respond</comments>
		
		<dc:creator><![CDATA[jamleecute]]></dc:creator>
		<pubDate>Sat, 17 Aug 2019 07:58:35 +0000</pubDate>
				<category><![CDATA[台灣咖啡廳]]></category>
		<category><![CDATA[美食]]></category>
		<category><![CDATA[eslite cafe]]></category>
		<category><![CDATA[信義誠品]]></category>
		<category><![CDATA[信義誠品咖啡]]></category>
		<category><![CDATA[台北咖啡廳]]></category>
		<guid isPermaLink="false">/?p=2961</guid>

					<description><![CDATA[<p>位在信義誠品2樓的 信義誠品咖啡 Eslite Café 是一個總是讓我感到自在放鬆的舒適咖啡廳。咖啡廳不僅環境採光極好，輕食也非常合口味，咖啡也不會有苦澀感， [&#8230;]</p>
<p>這篇文章 <a rel="nofollow" href="/eslite-cafe-%e4%bf%a1%e7%be%a9%e8%aa%a0%e5%93%81%e5%92%96%e5%95%a1/">信義誠品咖啡 Eslite Café | 美美的 優雅的 文青咖啡廳 | 台北 信義區</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></description>
										<content:encoded><![CDATA[<p>位在信義誠品2樓的 信義誠品咖啡 Eslite Café 是一個總是讓我感到自在放鬆的舒適咖啡廳。咖啡廳不僅環境採光極好，輕食也非常合口味，咖啡也不會有苦澀感，也特別喜歡餐廳輕柔的背景音樂。不管來過幾次，都還是會回訪再回訪，似乎已成為每個週末早晨最享受的放鬆時光。</p>
<p>誠品咖啡廳環境</p>
<p>有沙發區、長桌區、還有靠窗區。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2954" src="/wp-content/uploads/2019/08/IMG_7120.jpg" alt="信義誠品咖啡" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7120.jpg 1500w, /wp-content/uploads/2019/08/IMG_7120-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7120-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7120-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7120-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7120-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7120-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7120-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>這邊沙發區座位又寬敞又舒適～還有插座喔！</p>
<blockquote class="instagram-media" data-instgrm-captioned data-instgrm-permalink="https://www.instagram.com/p/B1QTWCDHjUM/" data-instgrm-version="12" style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);">
<div style="padding:16px;"> <a href="https://www.instagram.com/p/B1QTWCDHjUM/" style=" background:#FFFFFF; line-height:0; padding:0 0; text-align:center; text-decoration:none; width:100%;" target="_blank"> </p>
<div style=" display: flex; flex-direction: row; align-items: center;">
<div style="background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 40px; margin-right: 14px; width: 40px;"></div>
<div style="display: flex; flex-direction: column; flex-grow: 1; justify-content: center;">
<div style=" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 100px;"></div>
<div style=" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 60px;"></div>
</div>
</div>
<div style="padding: 19% 0;"></div>
<div style="display:block; height:50px; margin:0 auto 12px; width:50px;"><svg width="50px" height="50px" viewBox="0 0 60 60" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-511.000000, -20.000000)" fill="#000000"><g><path d="M556.869,30.41 C554.814,30.41 553.148,32.076 553.148,34.131 C553.148,36.186 554.814,37.852 556.869,37.852 C558.924,37.852 560.59,36.186 560.59,34.131 C560.59,32.076 558.924,30.41 556.869,30.41 M541,60.657 C535.114,60.657 530.342,55.887 530.342,50 C530.342,44.114 535.114,39.342 541,39.342 C546.887,39.342 551.658,44.114 551.658,50 C551.658,55.887 546.887,60.657 541,60.657 M541,33.886 C532.1,33.886 524.886,41.1 524.886,50 C524.886,58.899 532.1,66.113 541,66.113 C549.9,66.113 557.115,58.899 557.115,50 C557.115,41.1 549.9,33.886 541,33.886 M565.378,62.101 C565.244,65.022 564.756,66.606 564.346,67.663 C563.803,69.06 563.154,70.057 562.106,71.106 C561.058,72.155 560.06,72.803 558.662,73.347 C557.607,73.757 556.021,74.244 553.102,74.378 C549.944,74.521 548.997,74.552 541,74.552 C533.003,74.552 532.056,74.521 528.898,74.378 C525.979,74.244 524.393,73.757 523.338,73.347 C521.94,72.803 520.942,72.155 519.894,71.106 C518.846,70.057 518.197,69.06 517.654,67.663 C517.244,66.606 516.755,65.022 516.623,62.101 C516.479,58.943 516.448,57.996 516.448,50 C516.448,42.003 516.479,41.056 516.623,37.899 C516.755,34.978 517.244,33.391 517.654,32.338 C518.197,30.938 518.846,29.942 519.894,28.894 C520.942,27.846 521.94,27.196 523.338,26.654 C524.393,26.244 525.979,25.756 528.898,25.623 C532.057,25.479 533.004,25.448 541,25.448 C548.997,25.448 549.943,25.479 553.102,25.623 C556.021,25.756 557.607,26.244 558.662,26.654 C560.06,27.196 561.058,27.846 562.106,28.894 C563.154,29.942 563.803,30.938 564.346,32.338 C564.756,33.391 565.244,34.978 565.378,37.899 C565.522,41.056 565.552,42.003 565.552,50 C565.552,57.996 565.522,58.943 565.378,62.101 M570.82,37.631 C570.674,34.438 570.167,32.258 569.425,30.349 C568.659,28.377 567.633,26.702 565.965,25.035 C564.297,23.368 562.623,22.342 560.652,21.575 C558.743,20.834 556.562,20.326 553.369,20.18 C550.169,20.033 549.148,20 541,20 C532.853,20 531.831,20.033 528.631,20.18 C525.438,20.326 523.257,20.834 521.349,21.575 C519.376,22.342 517.703,23.368 516.035,25.035 C514.368,26.702 513.342,28.377 512.574,30.349 C511.834,32.258 511.326,34.438 511.181,37.631 C511.035,40.831 511,41.851 511,50 C511,58.147 511.035,59.17 511.181,62.369 C511.326,65.562 511.834,67.743 512.574,69.651 C513.342,71.625 514.368,73.296 516.035,74.965 C517.703,76.634 519.376,77.658 521.349,78.425 C523.257,79.167 525.438,79.673 528.631,79.82 C531.831,79.965 532.853,80.001 541,80.001 C549.148,80.001 550.169,79.965 553.369,79.82 C556.562,79.673 558.743,79.167 560.652,78.425 C562.623,77.658 564.297,76.634 565.965,74.965 C567.633,73.296 568.659,71.625 569.425,69.651 C570.167,67.743 570.674,65.562 570.82,62.369 C570.966,59.17 571,58.147 571,50 C571,41.851 570.966,40.831 570.82,37.631"></path></g></g></g></svg></div>
<div style="padding-top: 8px;">
<div style=" color:#3897f0; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:550; line-height:18px;"> View this post on Instagram</div>
</div>
<div style="padding: 12.5% 0;"></div>
<div style="display: flex; flex-direction: row; margin-bottom: 14px; align-items: center;">
<div>
<div style="background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(0px) translateY(7px);"></div>
<div style="background-color: #F4F4F4; height: 12.5px; transform: rotate(-45deg) translateX(3px) translateY(1px); width: 12.5px; flex-grow: 0; margin-right: 14px; margin-left: 2px;"></div>
<div style="background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(9px) translateY(-18px);"></div>
</div>
<div style="margin-left: 8px;">
<div style=" background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 20px; width: 20px;"></div>
<div style=" width: 0; height: 0; border-top: 2px solid transparent; border-left: 6px solid #f4f4f4; border-bottom: 2px solid transparent; transform: translateX(16px) translateY(-4px) rotate(30deg)"></div>
</div>
<div style="margin-left: auto;">
<div style=" width: 0px; border-top: 8px solid #F4F4F4; border-right: 8px solid transparent; transform: translateY(16px);"></div>
<div style=" background-color: #F4F4F4; flex-grow: 0; height: 12px; width: 16px; transform: translateY(-4px);"></div>
<div style=" width: 0; height: 0; border-top: 8px solid #F4F4F4; border-left: 8px solid transparent; transform: translateY(-4px) translateX(8px);"></div>
</div>
</div>
<p></a> </p>
<p style=" margin:8px 0 0 0; padding:0 4px;"> <a href="https://www.instagram.com/p/B1QTWCDHjUM/" style=" color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;" target="_blank">Sunny Saturday, mood Saturday. <img src="https://s.w.org/images/core/emoji/13.0.1/72x72/2764.png" alt="❤" class="wp-smiley" style="height: 1em; max-height: 1em;" /><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f495.png" alt="💕" class="wp-smiley" style="height: 1em; max-height: 1em;" /> . . . . . #gourmet #taipeifoodie #taipeifood #taipeigourmet #ぐるめ #グルメ #台湾 #台湾女子旅 #グルメ女子 #instafood #gratitude #love #foodie #信義區 #xinyi #xinyidistrict #taipeicafe #coffeeshop #coffee #taipeicoffee</a></p>
<p style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;">A post shared by <a href="https://www.instagram.com/hsuanlion/" style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px;" target="_blank"> Jam Lee <img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f353.png" alt="🍓" class="wp-smiley" style="height: 1em; max-height: 1em;" /></a> (@hsuanlion) on <time style=" font-family:Arial,sans-serif; font-size:14px; line-height:17px;" datetime="2019-08-17T06:17:01+00:00">Aug 16, 2019 at 11:17pm PDT</time></p>
</div>
</blockquote>
<p><script async src="//www.instagram.com/embed.js"></script></p>
<p>靠窗區可以看到台北101。採光很好。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2944" src="/wp-content/uploads/2019/08/IMG_5116.jpg" alt="信義誠品咖啡" width="756" height="1008" srcset="/wp-content/uploads/2019/08/IMG_5116.jpg 756w, /wp-content/uploads/2019/08/IMG_5116-225x300.jpg 225w, /wp-content/uploads/2019/08/IMG_5116-230x307.jpg 230w, /wp-content/uploads/2019/08/IMG_5116-350x467.jpg 350w, /wp-content/uploads/2019/08/IMG_5116-480x640.jpg 480w" sizes="(max-width: 756px) 100vw, 756px" /></p>
<p>熱拿鐵咖啡 ($170)</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2958" src="/wp-content/uploads/2019/08/IMG_7132.jpg" alt="信義誠品咖啡" width="1000" height="1500" srcset="/wp-content/uploads/2019/08/IMG_7132.jpg 1000w, /wp-content/uploads/2019/08/IMG_7132-200x300.jpg 200w, /wp-content/uploads/2019/08/IMG_7132-768x1152.jpg 768w, /wp-content/uploads/2019/08/IMG_7132-683x1024.jpg 683w, /wp-content/uploads/2019/08/IMG_7132-830x1245.jpg 830w, /wp-content/uploads/2019/08/IMG_7132-230x345.jpg 230w, /wp-content/uploads/2019/08/IMG_7132-350x525.jpg 350w, /wp-content/uploads/2019/08/IMG_7132-480x720.jpg 480w" sizes="(max-width: 1000px) 100vw, 1000px" /></p>
<p>冰拿鐵咖啡 ($180)</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2957" src="/wp-content/uploads/2019/08/IMG_7131.jpg" alt="信義誠品咖啡" width="1000" height="1500" srcset="/wp-content/uploads/2019/08/IMG_7131.jpg 1000w, /wp-content/uploads/2019/08/IMG_7131-200x300.jpg 200w, /wp-content/uploads/2019/08/IMG_7131-768x1152.jpg 768w, /wp-content/uploads/2019/08/IMG_7131-683x1024.jpg 683w, /wp-content/uploads/2019/08/IMG_7131-830x1245.jpg 830w, /wp-content/uploads/2019/08/IMG_7131-230x345.jpg 230w, /wp-content/uploads/2019/08/IMG_7131-350x525.jpg 350w, /wp-content/uploads/2019/08/IMG_7131-480x720.jpg 480w" sizes="(max-width: 1000px) 100vw, 1000px" /></p>
<p>熱摩卡咖啡 ($180)</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2946" src="/wp-content/uploads/2019/08/IMG_7067.jpg" alt="信義誠品咖啡" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7067.jpg 1500w, /wp-content/uploads/2019/08/IMG_7067-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7067-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7067-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7067-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7067-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7067-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7067-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>我最喜歡最喜歡的&#8230;</p>
<p>黑松露夜未眠 ($240)</p>
<p>個人覺得份量很多，兩個人share都很飽喔。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2950" src="/wp-content/uploads/2019/08/IMG_7081.jpg" alt="信義誠品咖啡" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7081.jpg 1500w, /wp-content/uploads/2019/08/IMG_7081-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7081-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7081-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7081-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7081-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7081-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7081-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>鮪魚帕尼尼佐鮮脆小沙拉 ($220)</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2951" src="/wp-content/uploads/2019/08/IMG_7089.jpg" alt="信義誠品咖啡" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7089.jpg 1500w, /wp-content/uploads/2019/08/IMG_7089-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7089-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7089-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7089-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7089-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7089-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7089-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>茶滋味紅烏龍鬆餅 ($220)</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2943" src="/wp-content/uploads/2019/08/IMG_5081.jpg" alt="信義誠品咖啡" width="1483" height="1113" srcset="/wp-content/uploads/2019/08/IMG_5081.jpg 1483w, /wp-content/uploads/2019/08/IMG_5081-300x225.jpg 300w, /wp-content/uploads/2019/08/IMG_5081-768x576.jpg 768w, /wp-content/uploads/2019/08/IMG_5081-1024x769.jpg 1024w, /wp-content/uploads/2019/08/IMG_5081-830x623.jpg 830w, /wp-content/uploads/2019/08/IMG_5081-230x173.jpg 230w, /wp-content/uploads/2019/08/IMG_5081-350x263.jpg 350w, /wp-content/uploads/2019/08/IMG_5081-480x360.jpg 480w" sizes="(max-width: 1483px) 100vw, 1483px" /></p>
<p>因為這邊採光很好，所以很適合拍照喔！</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2960" src="/wp-content/uploads/2019/08/IMG_7111.jpg" alt="信義誠品咖啡" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7111.jpg 1500w, /wp-content/uploads/2019/08/IMG_7111-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7111-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7111-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7111-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7111-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7111-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7111-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>菜單</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2964" src="/wp-content/uploads/2019/08/IMG_7210.jpg" alt="信義誠品咖啡" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7210.jpg 1500w, /wp-content/uploads/2019/08/IMG_7210-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7210-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7210-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7210-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7210-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7210-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7210-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-2965" src="/wp-content/uploads/2019/08/IMG_7211.jpg" alt="信義誠品咖啡" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7211.jpg 1500w, /wp-content/uploads/2019/08/IMG_7211-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7211-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7211-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7211-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7211-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7211-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7211-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p><strong><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f388.png" alt="🎈" class="wp-smiley" style="height: 1em; max-height: 1em;" />心得</strong></p>
<p>因為習慣在咖啡廳久待做事，所以插座、wifi、飲用水對我來說都是很重要的，而誠品信義不只在這幾個服務項目上都做的很好，輕食也真的好吃，空間的採光跟座位設計也很舒適，所以很適合假日來坐坐放鬆喔！</p>
<p><strong><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f4cc.png" alt="📌" class="wp-smiley" style="height: 1em; max-height: 1em;" />信義誠品咖啡 資訊</strong></p>
<p><a href="https://meet.eslite.com/tw/tc/catering/201803090001" target="_blank" rel="noopener noreferrer">官網</a></p>
<p>營業時間 | 週日至週四 10:00 &#8211; 23:00 / 週五至週六 10:00 &#8211; 23:30</p>
<p>最後點餐時間 | 餐點/部分飲品 22:00</p>
<ul>
<li>低消單點一份餐點或飲品</li>
<li>有Wifi</li>
<li>禁帶外食（嬰兒食品除外）</li>
<li>歡迎導盲犬</li>
<li>用餐時間為120分鐘</li>
<li>有飲用水（自取）</li>
</ul>
<p>聯絡電話</p>
<p>信義店 | 02-8789-3388 #3291</p>
<p>敦南店 | 02-2775-5977 #240</p>
<p>南西店 | 02-2581-3358 # 1502</p>
<p><strong><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f4cd.png" alt="📍" class="wp-smiley" style="height: 1em; max-height: 1em;" />信義誠品咖啡 位置</strong></p>
<p><iframe loading="lazy" width="600" height="450" style="border: 0;" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3614.8410899518753!2d121.56338611500627!3d25.0394663839698!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3442abbbd49806cb%3A0x721e07ad3d105457!2z6Kqg5ZOB5ZKW5ZWh!5e0!3m2!1szh-TW!2stw!4v1566026958420!5m2!1szh-TW!2stw" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p>
<p>&nbsp;</p>
<hr />
<p><strong>更多台北精選咖啡廳：</strong></p>
<p><a href="/starbucks-coffee-tianmu-%e6%98%9f%e5%b7%b4%e5%85%8b-%e5%a4%a9%e7%8e%89%e9%96%80%e5%b8%82-%e5%a4%a9%e6%af%8d/" target="_blank" rel="noopener noreferrer">星巴克 天玉門市 Starbucks | 夢幻庭院 景觀咖啡廳 | 台北天母</a></p>
<p><a href="/september-cafe-%e4%b9%9d%e6%9c%88%e5%92%96%e5%95%a1/" target="_blank" rel="noopener noreferrer">September Cafe 九月咖啡 | 忍不住拍個不停的網美餐廳 | 台北大安</a></p>
<p>&nbsp;</p>
<p>這篇文章 <a rel="nofollow" href="/eslite-cafe-%e4%bf%a1%e7%be%a9%e8%aa%a0%e5%93%81%e5%92%96%e5%95%a1/">信義誠品咖啡 Eslite Café | 美美的 優雅的 文青咖啡廳 | 台北 信義區</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></content:encoded>
					
					<wfw:commentRss>/eslite-cafe-%e4%bf%a1%e7%be%a9%e8%aa%a0%e5%93%81%e5%92%96%e5%95%a1/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>小鼎膾 &#124; 新鮮美味的高品質日式丼飯、海鮮料理 &#124; 台北信義 Bellavita B2</title>
		<link>/%e5%b0%8f%e9%bc%8e%e8%86%be/</link>
					<comments>/%e5%b0%8f%e9%bc%8e%e8%86%be/#respond</comments>
		
		<dc:creator><![CDATA[jamleecute]]></dc:creator>
		<pubDate>Sat, 17 Aug 2019 05:20:17 +0000</pubDate>
				<category><![CDATA[台灣美食]]></category>
		<category><![CDATA[美食]]></category>
		<category><![CDATA[bellavita]]></category>
		<category><![CDATA[小鼎膾]]></category>
		<category><![CDATA[日式丼飯]]></category>
		<category><![CDATA[海鮮料理]]></category>
		<guid isPermaLink="false">/?p=2912</guid>

					<description><![CDATA[<p>小鼎膾 日式丼飯、海鮮料理專賣店，鼎膾的副品牌，位在於2018年10月開幕的Bellavita地下二樓貴婦美食街，是個用料新鮮實在且CP值高的超值極品美食。對於 [&#8230;]</p>
<p>這篇文章 <a rel="nofollow" href="/%e5%b0%8f%e9%bc%8e%e8%86%be/">小鼎膾 | 新鮮美味的高品質日式丼飯、海鮮料理 | 台北信義 Bellavita B2</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></description>
										<content:encoded><![CDATA[<p>小鼎膾 日式丼飯、海鮮料理專賣店，鼎膾的副品牌，位在於2018年10月開幕的Bellavita地下二樓貴婦美食街，是個用料新鮮實在且CP值高的超值極品美食。對於愛吃生魚片的我來說， 小鼎膾 生魚片的鮮度跟美味口感，都深得我心，而且價格只要368元起，就能享受到不一般般等級的日式丼飯喔！</p>
<p>Bellavita B2 小鼎膾</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2927" src="/wp-content/uploads/2019/08/IMG_7092.jpg" alt="小鼎膾" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7092.jpg 1500w, /wp-content/uploads/2019/08/IMG_7092-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7092-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7092-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7092-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7092-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7092-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7092-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>座位都是吧台形式</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2928" src="/wp-content/uploads/2019/08/IMG_7094.jpg" alt="小鼎膾" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7094.jpg 1500w, /wp-content/uploads/2019/08/IMG_7094-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7094-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7094-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7094-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7094-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7094-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7094-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-2929" src="/wp-content/uploads/2019/08/IMG_7096.jpg" alt="小鼎膾" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7096.jpg 1500w, /wp-content/uploads/2019/08/IMG_7096-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7096-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7096-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7096-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7096-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7096-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7096-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>菜單</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2915" src="/wp-content/uploads/2019/08/IMG_7091.jpg" alt="小鼎膾" width="929" height="1162" srcset="/wp-content/uploads/2019/08/IMG_7091.jpg 929w, /wp-content/uploads/2019/08/IMG_7091-240x300.jpg 240w, /wp-content/uploads/2019/08/IMG_7091-768x961.jpg 768w, /wp-content/uploads/2019/08/IMG_7091-819x1024.jpg 819w, /wp-content/uploads/2019/08/IMG_7091-830x1038.jpg 830w, /wp-content/uploads/2019/08/IMG_7091-230x288.jpg 230w, /wp-content/uploads/2019/08/IMG_7091-350x438.jpg 350w, /wp-content/uploads/2019/08/IMG_7091-480x600.jpg 480w" sizes="(max-width: 929px) 100vw, 929px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-2916" src="/wp-content/uploads/2019/08/IMG_7097.jpg" alt="小鼎膾" width="1000" height="1500" srcset="/wp-content/uploads/2019/08/IMG_7097.jpg 1000w, /wp-content/uploads/2019/08/IMG_7097-200x300.jpg 200w, /wp-content/uploads/2019/08/IMG_7097-768x1152.jpg 768w, /wp-content/uploads/2019/08/IMG_7097-683x1024.jpg 683w, /wp-content/uploads/2019/08/IMG_7097-830x1245.jpg 830w, /wp-content/uploads/2019/08/IMG_7097-230x345.jpg 230w, /wp-content/uploads/2019/08/IMG_7097-350x525.jpg 350w, /wp-content/uploads/2019/08/IMG_7097-480x720.jpg 480w" sizes="(max-width: 1000px) 100vw, 1000px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-2930" src="/wp-content/uploads/2019/08/IMG_7098.jpg" alt="小鼎膾" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7098.jpg 1500w, /wp-content/uploads/2019/08/IMG_7098-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7098-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7098-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7098-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7098-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7098-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7098-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-2931" src="/wp-content/uploads/2019/08/IMG_7099.jpg" alt="小鼎膾" width="1000" height="1500" srcset="/wp-content/uploads/2019/08/IMG_7099.jpg 1000w, /wp-content/uploads/2019/08/IMG_7099-200x300.jpg 200w, /wp-content/uploads/2019/08/IMG_7099-768x1152.jpg 768w, /wp-content/uploads/2019/08/IMG_7099-683x1024.jpg 683w, /wp-content/uploads/2019/08/IMG_7099-830x1245.jpg 830w, /wp-content/uploads/2019/08/IMG_7099-230x345.jpg 230w, /wp-content/uploads/2019/08/IMG_7099-350x525.jpg 350w, /wp-content/uploads/2019/08/IMG_7099-480x720.jpg 480w" sizes="(max-width: 1000px) 100vw, 1000px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-2932" src="/wp-content/uploads/2019/08/IMG_7100.jpg" alt="小鼎膾" width="1000" height="1500" srcset="/wp-content/uploads/2019/08/IMG_7100.jpg 1000w, /wp-content/uploads/2019/08/IMG_7100-200x300.jpg 200w, /wp-content/uploads/2019/08/IMG_7100-768x1152.jpg 768w, /wp-content/uploads/2019/08/IMG_7100-683x1024.jpg 683w, /wp-content/uploads/2019/08/IMG_7100-830x1245.jpg 830w, /wp-content/uploads/2019/08/IMG_7100-230x345.jpg 230w, /wp-content/uploads/2019/08/IMG_7100-350x525.jpg 350w, /wp-content/uploads/2019/08/IMG_7100-480x720.jpg 480w" sizes="(max-width: 1000px) 100vw, 1000px" /></p>
<p>會發光的瑩烏賊</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2933" src="/wp-content/uploads/2019/08/IMG_7101.jpg" alt="小鼎膾" width="1000" height="1500" srcset="/wp-content/uploads/2019/08/IMG_7101.jpg 1000w, /wp-content/uploads/2019/08/IMG_7101-200x300.jpg 200w, /wp-content/uploads/2019/08/IMG_7101-768x1152.jpg 768w, /wp-content/uploads/2019/08/IMG_7101-683x1024.jpg 683w, /wp-content/uploads/2019/08/IMG_7101-830x1245.jpg 830w, /wp-content/uploads/2019/08/IMG_7101-230x345.jpg 230w, /wp-content/uploads/2019/08/IMG_7101-350x525.jpg 350w, /wp-content/uploads/2019/08/IMG_7101-480x720.jpg 480w" sizes="(max-width: 1000px) 100vw, 1000px" /></p>
<p>我點的是附芬 (368) 加69元套餐 可以續味增湯呦</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2920" src="/wp-content/uploads/2019/08/IMG_7109.jpg" alt="小鼎膾" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7109.jpg 1500w, /wp-content/uploads/2019/08/IMG_7109-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7109-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7109-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7109-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7109-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7109-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7109-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p>附芬有瀬戶內海真鯛、現流鰆魚、九州青魽、日本金目鯛、太平洋正鰹、北海道鮭魚卵、北海道干貝（很甘甜新鮮！！）、北海道海膽（很甜沒有苦澀味！）、天使大紅蝦（鮮甜！！）。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2919" src="/wp-content/uploads/2019/08/IMG_7108.jpg" alt="小鼎膾" width="1500" height="1000" srcset="/wp-content/uploads/2019/08/IMG_7108.jpg 1500w, /wp-content/uploads/2019/08/IMG_7108-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7108-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7108-1024x683.jpg 1024w, /wp-content/uploads/2019/08/IMG_7108-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7108-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7108-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7108-480x320.jpg 480w" sizes="(max-width: 1500px) 100vw, 1500px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-2936" src="/wp-content/uploads/2019/08/IMG_7104_s2.jpg" alt="小鼎膾" width="1498" height="998" srcset="/wp-content/uploads/2019/08/IMG_7104_s2.jpg 1498w, /wp-content/uploads/2019/08/IMG_7104_s2-300x200.jpg 300w, /wp-content/uploads/2019/08/IMG_7104_s2-768x512.jpg 768w, /wp-content/uploads/2019/08/IMG_7104_s2-1024x682.jpg 1024w, /wp-content/uploads/2019/08/IMG_7104_s2-830x553.jpg 830w, /wp-content/uploads/2019/08/IMG_7104_s2-230x153.jpg 230w, /wp-content/uploads/2019/08/IMG_7104_s2-350x233.jpg 350w, /wp-content/uploads/2019/08/IMG_7104_s2-480x320.jpg 480w" sizes="(max-width: 1498px) 100vw, 1498px" /></p>
<p>真心推薦給喜歡品嚐鮮甜美味生魚片與海鮮的吃貨朋友們～</p>
<p>真心覺得超值！<img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f60b.png" alt="😋" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>&nbsp;</p>
<p><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f4cc.png" alt="📌" class="wp-smiley" style="height: 1em; max-height: 1em;" /><strong>小鼎膾官網</strong></p>
<p><a href="http://www.bellavita.com.tw/cht/store.php?d=162">http://www.bellavita.com.tw/cht/store.php?d=162</a></p>
<p><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/270f.png" alt="✏" class="wp-smiley" style="height: 1em; max-height: 1em;" /><strong>小鼎膾營業時間</strong></p>
<p>平日 ／ 11:00 – 22:00 • Last Order ／ 21:30<br />
假日前夕 ／ 11:00 – 22:30 • Last Order ／ 22:00<br />
TEL + 886 2 8729 2756</p>
<p><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f4cd.png" alt="📍" class="wp-smiley" style="height: 1em; max-height: 1em;" /><strong>小鼎膾位置</strong></p>
<p>110台北市信義區松仁路28號</p>
<p><iframe loading="lazy" width="600" height="450" style="border: 0;" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3614.83650693607!2d121.56545231500641!3d25.039621883969765!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3442ab6967983f55%3A0x33e44d506041ae8e!2z5bCP6byO6Ia-!5e0!3m2!1szh-TW!2stw!4v1566018465039!5m2!1szh-TW!2stw" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p>
<hr />
<p><strong>更多日式高級料理：</strong></p>
<p><a href="/hostshabu-%e5%90%88shabu-shabushabu/" target="_blank" rel="noopener noreferrer">合Shabu | 適合浪漫約會的高級和牛精緻火鍋 | 台北信義 Bellavita 4F</a></p>
<p><a href="/%e6%a9%98%e8%89%b2%e6%b6%ae%e6%b6%ae%e5%b1%8b-shabushabu-%e5%8f%b0%e5%8c%97%e4%bf%a1%e7%be%a9-%e6%96%b0%e5%85%89%e4%b8%89%e8%b6%8aa9/" target="_blank" rel="noopener noreferrer">橘色涮涮屋 | 100分高CP值的日式高級精緻火鍋 | 台北信義 新光三越A9</a></p>
<p><a href="/%e4%bd%86%e9%a6%ac%e5%ae%b6%e6%b6%ae%e6%b6%ae%e9%8d%8b-tajimaya-shabushabu/" target="_blank" rel="noopener noreferrer">但馬家涮涮鍋 | 奢華氣派優雅頂級鍋物 | 台北文華精品</a></p>
<p><a href="/2019-%e6%97%a5%e5%bc%8f%e9%ab%98%e7%b4%9a%e7%b2%be%e7%b7%bb%e9%8d%8b%e7%89%a9-shabushabu-%e5%8f%b0%e5%8c%97%e9%ab%98%e7%b4%9a%e7%81%ab%e9%8d%8b-%e6%97%a5%e5%bc%8f%e7%81%ab%e9%8d%8b/" target="_blank" rel="noopener noreferrer">台北高級火鍋 | 分享溫暖與愛的幸福鍋物清單 | 日式精緻鍋物系列</a></p>
<p><a href="/kurogeya-shabushabu-%e9%bb%91%e6%af%9b%e5%b1%8b/" target="_blank" rel="noopener noreferrer">黑毛屋 kurogeya | 吃的到高級日本和牛的涮涮鍋 | 台北信義 新光三越A4</a></p>
<p>&nbsp;</p>
<p>這篇文章 <a rel="nofollow" href="/%e5%b0%8f%e9%bc%8e%e8%86%be/">小鼎膾 | 新鮮美味的高品質日式丼飯、海鮮料理 | 台北信義 Bellavita B2</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></content:encoded>
					
					<wfw:commentRss>/%e5%b0%8f%e9%bc%8e%e8%86%be/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Gradient Boosting Machines GBM &#124; gbm, xgboost, h2o &#124; R語言</title>
		<link>/gradient-boosting-machines-gbm/</link>
					<comments>/gradient-boosting-machines-gbm/#comments</comments>
		
		<dc:creator><![CDATA[jamleecute]]></dc:creator>
		<pubDate>Sun, 14 Apr 2019 14:54:16 +0000</pubDate>
				<category><![CDATA[ 程式與統計]]></category>
		<category><![CDATA[統計模型]]></category>
		<guid isPermaLink="false">/?p=2875</guid>

					<description><![CDATA[<p>Gradient Boosting Machines 是一個超級受歡迎的機器學習法，在許多領域上都有非常成功的表現，也是Kaggle競賽時常勝出的主要演算法之一 [&#8230;]</p>
<p>這篇文章 <a rel="nofollow" href="/gradient-boosting-machines-gbm/">Gradient Boosting Machines GBM | gbm, xgboost, h2o | R語言</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></description>
										<content:encoded><![CDATA[<p>Gradient Boosting Machines 是一個超級受歡迎的機器學習法，在許多領域上都有非常成功的表現，也是Kaggle競賽時常勝出的主要演算法之一。有別於<a href="/random-forests-%e9%9a%a8%e6%a9%9f%e6%a3%ae%e6%9e%97/" target="_blank" rel="noopener noreferrer">隨機森林</a>集成眾多深且獨立的樹模型，GBM則是集成諸多淺且弱連續的樹模型，每個樹模型會以之前的樹模型為基礎去學習和精進，結果通常是難以擊敗的。</p>
<h3>套件與資料準備</h3>
<p></p><pre class="crayon-plain-tag">library(rsample)      # data splitting 
library(gbm)          # basic implementation
library(xgboost)      # a faster implementation of gbm
library(caret)        # an aggregator package for performing many machine learning models
library(h2o)          # a java-based platform
library(pdp)          # model visualization
library(ggplot2)      # model visualization
library(lime)         # model visualization
library(vtreat)</pre><p>使用AmesHousing套件中的Ames Housing數據，並將數據切分為7:3的訓練測試比例。</p><pre class="crayon-plain-tag"># Create training (70%) and test (30%) sets for the AmesHousing::make_ames() data.
# Use set.seed for reproducibility
set.seed(123)
ames_split &lt;- initial_split(AmesHousing::make_ames(), prop = .7)
ames_train &lt;- training(ames_split)
ames_test  &lt;- testing(ames_split)</pre><p>tree-based演算法往往可以將未處理資料配適的很好(即不需要特別將資料進行normalize, center,scale)，所以在以下筆記中將聚焦在如何使用多種不同套件執行GBMs。而雖然在這邊沒有去進行資料前處理，但我們仍可花時間透過處理變數特徵使得模型成效更佳。</p>
<h3>Gradient Boosting Machines&#8217; Advantage &amp; Disadvantages</h3>
<h4>優勢</h4>
<ol>
<li>產生的預測精準度通常無人能打敗</li>
<li>擁有許多彈性 &#8211; 可以針對不同的Loss Function來進行優化(*Loss Function即所有需要被「最小化」的目標函式，一個最常用來尋找使目標函式最小值的資料點的方法即為gradient descent)，且有hyperparameters的參數選項可以tuning，好讓目標函式配適的很好。</li>
<li>不需要資料前處理 &#8211; 通常可以很好的處理類別和數值型變數。</li>
<li>可以處理遺失值 &#8211; 不需要空值填補。</li>
</ol>
<h4>劣勢</h4>
<ol>
<li>GBMs會持續優化模型來最小化誤差。這樣可能會過度擬和極端值的部分而造成過度配適。因此必須綜合使用cross validation來銷除這個情況。</li>
<li>計算上成本非常高 &#8211; GBMs通常會包含許多樹(&gt;1000)，會佔用許多時間和記憶體。</li>
<li>模型彈性度高，導致許多參數會影響grid search的流程(比如說迭代次數，樹的深度，參數正規化等等)，在tuning模型的時候會需要大型的grid search過程。</li>
<li>可解釋程度稍稍少了一點，但有許多輔助工具如變數重要性、partial dependence plots, LIME等。</li>
</ol>
<h3>Gradient Boosting Machines (GBMs) 概念</h3>
<p>許多監督式機器學習模型都是建立在單一預測模的基礎上（比如說linear regression, penalized models or regularized regression, naive Bayes, support vector machines)。而則有像是Bagging和Random Forests這種集成學習演算法(ensemble learning)，集成眾多預測模型並單純平均每個模型的預測結果得出預測值。另外一種則是Boosting系列，是基於不一樣的建設性策略來進行集成學習。</p>
<p>Boosting的主要概念就是將新模型「有順序、循序漸進」的加入集成學習。在每一次迭代中，會新增一個新的(new)、弱的(weak)、base-learner模型，針對到目前為止集成學習的誤差進行訓練。</p>
<p>以下進一步解釋boosting models的特徵關鍵字：</p>
<ol>
<li>Base-learning models: Boosting是一個迭代改善任何弱學習模型的框架。許多Gradienet Boosting應用可允使用者任意加入眾多類型的weak learners模型。然而在實務上，boosted algorithm幾乎總是使用Decision Trees當作base-learner。也因此本學習筆記會主要討論boosting regression trees的應用。</li>
<li>Training weak models: 所謂的「弱模型(weak model)」指的是模型的錯誤率只有稍稍比隨機猜測好一點點的模型。Boosting背後的概念就是每一個順序模型都會建立一個僅稍稍改善殘餘誤差的弱模型(weak model)。以決策樹來說，較淺的樹就是弱模型的代表。一般來說，淺的決策樹模型切割數約在1~6之間。綜合多個弱模型會有以下好處(將較於綜合多個強模型)：
<ul>
<li>速率: 建構弱模型在計算成本上是便宜的。</li>
<li>精準度的改善: weak model允許演算法「慢慢學習」；即在模型表現不好的新領域進行些微調整。一般來說，慢慢學習的統計方法通常表現不錯。</li>
<li>避免overfitting: 由於在集成學習過程中，每一次訓練模型僅稍稍貢獻一點點額外的成效改善，使得我們有辦法即時在偵測到overfitting時即停止學習(使用的cross validation)。</li>
</ul>
</li>
<li>針對集成學習的殘餘誤差有順序性的訓練: Boosted trees是有順序性的；每一個樹模型都是依據前面的樹模型所得的資訊而訓練而成。基本的boosted regression trees演算法可被一般化為以下步驟(其中x代表features而y代表目標回應變數)：
<ul>
<li>依據原始資料配適一棵樹模型: \(F_{1}(x) = y\)</li>
<li>並依據先前的殘餘誤差訓練下一棵樹模型: \(h_{1}(x) = y &#8211; F_{1}(x)\)</li>
<li>將新的樹新增到演算法：\(F_{2}(x) = F_{1}(x) + h_{1}(x)\)</li>
<li>再一次依據殘餘誤差訓練下一棵樹模型 = \(h_{2}(x) = y &#8211; F_{2}(x)\)</li>
<li>將新的樹新增到演算法：\(F_{3}(x) = F_{2}(x) + h_{2}(x)\)</li>
<li>持續這個過程直到一些機制(如cross validation)告訴演算法可以停止。</li>
</ul>
</li>
</ol>
<p>boosted regression trees的基本演算法概念可以一般化為以下，即最終模型是b個獨立的回歸樹模型階段性相加的結果：<br />
\[ f(x) = \sum_{b=1}^B f^b(x) \]</p>
<h3>Gradient descent</h3>
<p>許多演算法，包括Decision trees，都聚焦在最小化殘差，也因此皆強調「MSE Loss Function」的目標函式。上面所討論到的演算法摘要了boosting法如何循序漸進地利用有順序新的弱回歸樹模型來配飾真實資料趨勢並最小化誤差。這個就是gradient boosting用來最小化Meas Squared Error (MSE) Loss Funciton的方法。雖然有時候我們會想要聚焦在其他Loss function上，如Mean Absolute Error(MAE)，或是遇到分類問題時所使用的deviance。而<strong><em>gradient</em></strong> boosting machines的命名則是取自於這個方法可以擴張至除了MSE以外的Loss function。</p>
<p>Gradient Boosting被認為是一個<strong><em>gradient descent</em></strong>(梯度下降)的演算法。Gradient Descent是一個非常通用的最適化演算法，能夠找到解決各種問題的最佳解。Gradient Descent的概念就是迭代的微調整參數來來最小化損失函數Loss Funciton。Gradient Descent會在給定的一組參數\(\theta\)區間，衡量局部Loss(cost) function的gradient，並沿著gradient下降的方向。直到gradient為0時，則找到局部最小值。</p>
<p><strong><em>Gradient descent</em></strong>可以被應用在任意可微分的loss function上，所以讓GBMs可以針對感興趣的loss function來尋找最適解。在gradient descent中一個重要的參數就是由_learning rate_s所決定的每次的變動率(size of steps)。較小的變動率會使得模型訓練過程中會迭代多次來尋找最小值，而過高的變動率則可能會讓模型錯過最小值和遠遠偏離初始值。</p>
<p>此外，並不是所有的loss function都是凸形的(convex)(如碗型)。可能會有局部的最小值、平坦高原或不規則地形等，使得尋找global minimum變得困難。<strong><em>Stochastic gradient descent</em></strong>(隨機梯度下降)則可處理這樣的問題，透過抽樣一部分比例的觀察值（通常不重複），並使用此子集合建立下一個模型。這使得演算法變得更快一些，但是隨機抽樣的隨機性亦造成下降的loss function gradient的隨機性。雖然這個隨機性使得演算法無法找到absolute global minimum(全域最小值)，但隨機性確實能讓演算法跳脫local minimum(局部最小值)、平坦高原等局部解，並接近全域的最小值。</p>
<p>我們在下一個階段即能看到如何透過多種hyperparameters參數選項來調整如何處理loss function的gradient descent。</p>
<h3>Tuning</h3>
<p>GBMs的好處與壞處就是該演算法提供多個調整參數。好處是GBMs在執行上非常具彈性，但壞處就是在調整與尋找最適參數組合上會很耗時。以下為幾個GBMs最常見的調整hyperparameters參數：</p>
<ul>
<li>決策樹模型的數量：總共要配適的決策樹模型數量。GBMs通常會需要很多很多樹，但不像random Forests，GBMs是可以過度擬和(overfit)的，所以他演算的目標是尋找最適決策樹數量使得感興趣的loss function最小化。</li>
<li>決策樹的深度：d,每棵樹模型的切割(split)數。用來控制boosted集成模型的複雜度。通常\(d=1\)的效果不錯，即此弱模型是由一次分割所得的樹模型所組成。而更常見的split數可能介在\(1&lt;d&lt;10\)之間。</li>
<li>Learning rate: 決定演算法計算gradient descent的速率。較慢的learning rate速率，可以避免overfitting的機會，但同時也會增加尋找最適解的時間。learning rate也被稱作shrinkage。</li>
<li>subsampling: 控制是否要使用原始訓練資料部分比例的抽樣子集合。使用少於100%的訓練資料表示你將使用stochastic gradient descent，這將有助於避免overfitting以及陷在loss function gradient的局部最小最大值。</li>
</ul>
<p>而在本學習筆記中，亦會介紹到專屬於特定package的調整hyperparameters參數，用來改善模型成效以及模型訓練與調整的效率。</p>
<h3>使用R實作Gradient Boosting Machines</h3>
<p>有很多執行GBMs和GBM變種的套件。而本學習筆記會cover到的幾個最受歡迎的套件，包括：</p>
<ul>
<li>gbm: 最原始的執行GBMs的套件。</li>
<li>xgboost: 一個更快速且有效的gradient boosting架構（後端為c++）。</li>
<li>h2o: 強大的java-based的介面，提供平行分散演算法和高銷率的生產。</li>
</ul>
<h3>gbm</h3>
<p>gbm套件是R裡面最原始執行GBM的套件。是來自於Freund &amp; Schapire’s <a href="http://www.site.uottawa.ca/~stan/csi5387/boost-tut-ppr.pdf" target="_blank" rel="noopener noreferrer">AdaBoost algorithm</a>的Friedman’s <a href="https://statweb.stanford.edu/~jhf/ftp/trebst.pdf" target="_blank" rel="noopener noreferrer">gradient boosting machine</a>延伸。由Mark Landry撰寫的GBM套件簡報可參考<a href="https://www.slideshare.net/mark_landry/gbm-package-in-r" target="_blank" rel="noopener noreferrer">此連結</a>。</p>
<p>gbm套件幾個功能與特色包括：</p>
<ul>
<li>Stochastic GBM(隨機 GBM)</li>
<li>可支援到1024個factor levels</li>
<li>支援「分類」和「回歸」樹</li>
<li>包括許多loss functions</li>
<li>提供Out-of-bag 估計法來尋找最適的迭代次數</li>
<li>容易overfitting &#8211; 因為套件中沒有自動使用提早煞車功能來偵測overfitting</li>
<li>如果內部使用cross-validation，這可以被平行分散到所有機器核心</li>
<li>目前gbm套件正在進行重新建構與重寫(並已持續一段時間)。</li>
</ul>
<h4>基本的gbm實作</h4>
<p>gbm套件中有兩個主要的訓練用函數：gbm::gbm跟gbm::fit。</p>
<ul>
<li>gbm::gbm &#8211; 使用「formula介面」來設定模型。</li>
<li>gbm::fit &#8211; 使用「x &amp; y矩陣」來設定模型。</li>
</ul>
<p><span style="color: #9f6ad4;">當變數量很大的時候，使用「x &amp; y 矩陣」會比「formula」介面來的更有效率。</span></p>
<p>gbm()函數預設的幾個參數值如下：</p>
<ul>
<li>learning rate(shrinkage):0.1。學習步伐，通常越小的學習步伐會需要越多模型數(n.tree)來找到最小的MSE。而預設n.tree為100，是相當足夠的。</li>
<li>number of trees(n.tree): 100。總迭代次數(新增模型數)。</li>
<li>depth of tree(interaction.depth): 1。最淺的樹（最弱的模型）。</li>
<li>bag.fraction: 0.5。訓練資料集有多少比例會被抽樣做為下一個樹模型的基礎。用來替模型注入隨機性。</li>
<li>train.fraction: 1。模型首次使用訓練資料的比例，剩餘的觀測資料則最為OOB sample用來估計loss function用。</li>
<li>cv.folds: 0。如果使用&gt;1的cross validation folds，除了會回傳該參數組合下的模型配適結果，也會估計cv.error。</li>
<li>verbose: 預設為FALSE。決定是否要印出程序和成效指標。</li>
<li>n.cores: 使用的CPU核心數。由於在使用cross validation的時候，loop會將不同CV folds分配到不同核心。沒特別設定的話會使用偵測機器核心數函數來處理parallele::detectCores。</li>
</ul>
<p>以下我們來建立一個學習步伐為0.001且模型數量為10000的GBMs。並使用5 folds的交叉驗證計算cross-validated error。</p><pre class="crayon-plain-tag"># 使抽樣結果可以重複
set.seed(123)

# train GBM model
system.time(
  gbm.fit &lt;- gbm(
  formula = Sale_Price ~ .,
  distribution = "gaussian",
  data = ames_train,
  n.trees = 10000, # 總迭代次數
  interaction.depth = 1, # 弱模型的切割數
  shrinkage = 0.001, # 學習步伐
  cv.folds = 5, # cross validation folds
  n.cores = NULL, # will use all cores by default
  verbose = FALSE
  )  
)</pre><p></p><pre class="crayon-plain-tag">##    user  system elapsed 
##  23.348   0.332  80.086</pre><p>GBMs模型約花80秒(約1分多鐘)。</p>
<p>將模型結果印出。結果包括文字資訊以及每一次迭代次數所對應的loss function(squared error loss)變化。</p><pre class="crayon-plain-tag">print(gbm.fit)</pre><p></p><pre class="crayon-plain-tag">## gbm(formula = Sale_Price ~ ., distribution = &quot;gaussian&quot;, data = ames_train, 
##     n.trees = 10000, interaction.depth = 1, shrinkage = 0.001, 
##     cv.folds = 5, verbose = FALSE, n.cores = NULL)
## A gradient boosted model with gaussian loss function.
## 10000 iterations were performed.
## The best cross-validation iteration was 10000.
## There were 80 predictors of which 45 had non-zero influence.</pre><p>模型結果資訊是由list所儲存。可以使用索引的方式取出。</p>
<p>比如說我們來看最小的CV RMSE值。</p><pre class="crayon-plain-tag">sqrt(min(gbm.fit$cv.error))</pre><p></p><pre class="crayon-plain-tag">## [1] 29133.33</pre><p>表示平均來說模型估計值離真實Sale_Price差了約30K。</p>
<p>我們也可以透過以下方式將GBMs找尋最佳迭代數的過程繪出：(其中黑線的為訓練誤差(train.error)，綠線為cv.error, 若method使用“test&#8221;，則會有紅線表示valid.error)</p><pre class="crayon-plain-tag">gbm.perf(object = gbm.fit, plot.it = TRUE,method = "cv")</pre><p><img src="/wp-content/uploads/2019/04/unnamed-chunk-6-1-1.png" alt="gradient boosting machines, GBM" /></p><pre class="crayon-plain-tag">## [1] 10000</pre><p>可以發現以此小學習步伐(0.001)，會需要很多模型來接近最小的loss function(使cv.error最小化)，最佳迭代數為10000。</p>
<h4>Tuning</h4>
<p>「手動tuning」</p>
<p>假設我們將學習步伐加大為0.1，迭代模型數降低為5000，且模型複雜度增加到3 splits。</p><pre class="crayon-plain-tag"># for reproducibility
set.seed(123)

# train GBM model
system.time(
gbm.fit2 &lt;- gbm(
  formula = Sale_Price ~ .,
  distribution = "gaussian",
  data = ames_train,
  n.trees = 5000,
  interaction.depth = 3,
  shrinkage = 0.1,
  cv.folds = 5,
  n.cores = NULL, # will use all cores by default
  verbose = FALSE
  ) 
)</pre><p></p><pre class="crayon-plain-tag">##    user  system elapsed 
##  35.555   1.314 151.695</pre><p>調大步伐後(0.1)，花的時間變多為151秒(2.5分鐘)，GBMs模型最小cv.error變得更低(23K)。<br />
(v.s.小步伐(0.001)的cv.error: 29K)</p><pre class="crayon-plain-tag">sqrt(min(gbm.fit2$cv.error))</pre><p></p><pre class="crayon-plain-tag">## [1] 23112.1</pre><p>將模型結果印出。最佳迭代數(所需模型數)為1260。</p><pre class="crayon-plain-tag">gbm.perf(object = gbm.fit2, method = "cv")</pre><p><img src="/wp-content/uploads/2019/04/unnamed-chunk-9-1-1.png" alt="gradient boosting machines, GBM" /></p><pre class="crayon-plain-tag">## [1] 1260</pre><p>「grid search自動化tuning」</p>
<p>因為手動調整參數是沒效率的，我們來建立hyperparameters grid並自動套用grid search。</p><pre class="crayon-plain-tag"># create hyperparameter grid
hyper_grid &lt;- expand.grid(
  shrinkage = c(.01, .1, .3), # 學習步伐
  interaction.depth = c(1, 3, 5), # 模型切割數
  n.minobsinnode = c(5, 10, 15), # 節點最小觀測值個數
  bag.fraction = c(.65, .8, 1), # 使用隨機梯度下降(&lt;1)
  optimal_trees = 0,               # 儲存最適模型樹的欄位
  min_RMSE = 0                     # 儲存最小均方差的欄位
)

# total number of combinations
nrow(hyper_grid)</pre><p></p><pre class="crayon-plain-tag">## [1] 81</pre><p>我們一一測試以上81種超參數排列組合的效果，並指定使用5000個樹模型。<br />
另外，為了降低執行的時間，有別於使用cross validation，我們改使用75%的訓練資料，使用剩下的25%的資料來進行OOB評估效果。需要特別注意的是，當使用train.fraction參數時，模型會直接使用前XX %的資料來使用，因此需要確保說資料是隨機排列的。</p>
<p>先將資料進行隨機排列處理。</p><pre class="crayon-plain-tag"># randomize data
random_index &lt;- sample(1:nrow(ames_train), nrow(ames_train))
random_ames_train &lt;- ames_train[random_index, ]</pre><p>開始執行grid search</p><pre class="crayon-plain-tag"># grid search 
for(i in 1:nrow(hyper_grid)) {

  # reproducibility
  set.seed(123)

  # train model
  gbm.tune &lt;- gbm(
    formula = Sale_Price ~ .,
    distribution = "gaussian",
    data = random_ames_train,
    n.trees = 5000, # 使用5000個樹模型
    interaction.depth = hyper_grid$interaction.depth[i],
    shrinkage = hyper_grid$shrinkage[i],
    n.minobsinnode = hyper_grid$n.minobsinnode[i],
    bag.fraction = hyper_grid$bag.fraction[i],
    train.fraction = .75, # 使用75%的訓練資料，並用剩餘資料做OOB成效評估/驗證
    n.cores = NULL, # will use all cores by default
    verbose = FALSE
  )

  # 將每個GBM模型最小的模型代號和對應的驗證均方誤差(valid RMSE)回傳到
  hyper_grid$optimal_trees[i] &lt;- which.min(gbm.tune$valid.error)
  hyper_grid$min_RMSE[i] &lt;- sqrt(min(gbm.tune$valid.error))
}</pre><p>將每種參數組合的結果，依照RMSE由小到大排列，並取出排名前10的模型，查看參數組合細節。</p><pre class="crayon-plain-tag">hyper_grid %&gt;% 
  dplyr::arrange(min_RMSE) %&gt;%
  head(10)</pre><p></p><pre class="crayon-plain-tag">##    shrinkage interaction.depth n.minobsinnode bag.fraction optimal_trees
## 1       0.01                 5              5         0.65          3867
## 2       0.01                 5              5         0.80          4209
## 3       0.01                 5              5         1.00          4281
## 4       0.10                 3             10         0.80           489
## 5       0.01                 3              5         0.80          4777
## 6       0.01                 3             10         0.80          4919
## 7       0.01                 3              5         0.65          4997
## 8       0.01                 5             10         0.80          4123
## 9       0.01                 5             10         0.65          4850
## 10      0.01                 3             10         1.00          4794
##    min_RMSE
## 1  16647.87
## 2  16960.78
## 3  17084.29
## 4  17093.77
## 5  17121.26
## 6  17139.59
## 7  17139.88
## 8  17162.60
## 9  17247.72
## 10 17353.36</pre><p>我們可以看到以下幾點：</p>
<ol>
<li>最佳模型的最小RMSE(17K)，較先前的RMSE(23K)降低了有6K左右。</li>
<li>前十的模型的學習步伐都小於0.3，表示較小的學習步伐在尋找最小誤差的模型效果是不錯的。</li>
<li>前十的模型都選用&gt;1切割數的樹模型，。</li>
<li>十個模型有8個模型都使用bag.fraction &lt; 1的隨機梯度下降(即使用&lt;100%的訓練資料集進行每個模型的訓練)，這將有助於避免overfitting以及陷在loss function gradient的局部最小最大值。</li>
<li>前十的模型中，也沒有使用採用節點觀測數大於等於15者。因為較小觀測數的節點較能捕捉到更多特徵。</li>
<li>部分參數組合所使用的最佳迭代數（總樹模型數）都很接近5000個。下次執行grid search時或許可以考慮增大樹模型數。</li>
</ol>
<p>根據以上測試，我們已更接近最適的參數組合區間，我們此時在此聚焦範圍內再一次執行81種超參數組合的最佳模型搜尋。</p><pre class="crayon-plain-tag"># 根據上一部的結果，調整參數區間與數值
hyper_grid_2 &lt;- expand.grid(
  shrinkage = c(.01, .05, .1), # 聚焦更小的學習步伐
  interaction.depth = c(3, 5, 7), #聚焦&gt;1的切割數
  n.minobsinnode = c(5, 7, 10), # 聚焦更小的節點觀測值數量
  bag.fraction = c(.65, .8, 1), # 不變
  optimal_trees = 0,               # a place to dump results
  min_RMSE = 0                     # a place to dump results
)

# total number of combinations
nrow(hyper_grid_2)</pre><p></p><pre class="crayon-plain-tag">## [1] 81</pre><p>我們再一次的用for loop迴圈執行以上81種超參數組合的模型，找出每一次最適的模型與對應的最小誤差。</p><pre class="crayon-plain-tag"># grid search 
for(i in 1:nrow(hyper_grid_2)) {

  # reproducibility
  set.seed(123)

  # train model
  gbm.tune &lt;- gbm(
    formula = Sale_Price ~ .,
    distribution = "gaussian",
    data = random_ames_train,
    n.trees = 6000,
    interaction.depth = hyper_grid_2$interaction.depth[i],
    shrinkage = hyper_grid_2$shrinkage[i],
    n.minobsinnode = hyper_grid_2$n.minobsinnode[i],
    bag.fraction = hyper_grid_2$bag.fraction[i],
    train.fraction = .75, # 使用剩餘的25%資料估計OOB誤差
    n.cores = NULL, # will use all cores by default
    verbose = FALSE
  )

  # add min training error and trees to grid
  hyper_grid_2$optimal_trees[i] &lt;- which.min(gbm.tune$valid.error)
  hyper_grid_2$min_RMSE[i] &lt;- sqrt(min(gbm.tune$valid.error))
}</pre><p>檢視結果</p><pre class="crayon-plain-tag">hyper_grid_2 %&gt;% 
  dplyr::arrange(min_RMSE) %&gt;%
  head(10)</pre><p></p><pre class="crayon-plain-tag">##    shrinkage interaction.depth n.minobsinnode bag.fraction
## 1       0.01                 5              5         0.65
## 2       0.01                 7              5         0.65
## 3       0.05                 5              5         0.65
## 4       0.01                 7              5         0.80
## 5       0.01                 7              7         0.65
## 6       0.05                 5             10         0.80
## 7       0.01                 5              5         0.80
## 8       0.01                 3              7         0.80
## 9       0.01                 5              7         0.65
## 10      0.01                 5              7         0.80
##    optimal_trees min_RMSE
## 1           3867 16647.87
## 2           2905 16782.26
## 3            640 16783.13
## 4           4193 16833.74
## 5           3275 16906.53
## 6            958 16933.12
## 7           4209 16960.78
## 8           5813 16998.79
## 9           4798 17003.94
## 10          4753 17004.20</pre><p>本次結果與上一次結果十分類似。最佳模型和上一次選出的最佳模型是一樣的(相同的參數排列組合)，RMSE約是17K。</p>
<p>一旦找到最佳模型，我們則可使用該參數組合來train一個模型。也因為最佳模型約收斂在僅1634個樹模型，我們可以 訓練一個由1634個樹模型所組成的cross validation模型(使用CV來提供更穩健的誤差估計值)。</p><pre class="crayon-plain-tag"># for reproducibility
set.seed(123)

system.time(
# train GBM model
gbm.fit.final &lt;- gbm(
  formula = Sale_Price ~ .,
  distribution = "gaussian",
  data = ames_train,
  n.trees = 1634,
  interaction.depth = 5,
  shrinkage = 0.05,
  n.minobsinnode = 7,
  bag.fraction = .8, 
  train.fraction = 1, # 如果使用&lt;1(xx%)的訓練比例，就會用剩餘的(1-XX%)資料估計OOB誤差
  cv.folds = 4, # 有別於使用OOB估計誤差，我們估計更穩健的CV誤差
  n.cores = NULL, # will use all cores by default
  verbose = FALSE
  )
)</pre><p></p><pre class="crayon-plain-tag">##    user  system elapsed 
##  18.394   0.617  49.558</pre><p>最佳模型的cv誤差如下(22K)。</p><pre class="crayon-plain-tag">sqrt(min(gbm.fit.final$cv.error)) # 必須是模型參數cv.folds &gt; 1 才會回傳cv.error</pre><p></p><pre class="crayon-plain-tag">## [1] 22165.11</pre><p></p>
<h4>視覺化</h4>
<h5>variable importance</h5>
<p>執行完最後的最佳模型後(gbm.fit.final)，我們會想要看對目標變數sale price來說最有影響力的解釋變數有哪些，以捕捉模型的「可解釋性」。我們可以使用summary()函數來回傳gmb模型中最具影響力的解釋變數清單(data frame &amp; plot)。並可以使用gbm模型summary函式中的cBars參數來指定要顯示的解釋變數清單數(根據影響力排名)。預設使用相對影響力來計算變數重要性。以下說明計算變數重要性的兩個方法：</p>
<ol>
<li>method = relative.influence: 每棵樹在進行節點分割時，gbm會計算每個變數作為切點，切割後對模型誤差所帶來的改善(回歸模型的話就是MSE)。gbm於是會平均每個變數在不同樹模型的誤差改善值，當作變數影響力。具有越高平均誤差降低值得變數即被視作最具影響力的變數。</li>
<li>method = permutation.test.gbm: 模型會隨機置換（一次一個）不同預測變數，來計算個別變數的對預測性能的改善（使用所有training data），並平均每個變數在不同樹模型對正確率造成的改變量。具有越高正確率改變量的預測變數越具重要性。</li>
</ol>
<p></p><pre class="crayon-plain-tag">par(mar = c(5, 8, 1, 1))
# S3 method for class 'gbm'
summary(
  gbm.fit.final, # gbm object
  cBars = 10, # the number of bars to draw. length(object$var.names)
  plotit = TRUE, # an indicator as to whether the plot is generated.defult TRUE.
  method = relative.influence, # The function used to compute the relative influence. 亦可使用permutation.test.gbm
  las = 2
  )</pre><p><img src="/wp-content/uploads/2019/04/unnamed-chunk-19-1-1.png" alt="gradient boosting machines, GBM" /></p><pre class="crayon-plain-tag">##                                   var      rel.inf
## Overall_Qual             Overall_Qual 4.199240e+01
## Gr_Liv_Area               Gr_Liv_Area 1.343609e+01
## Neighborhood             Neighborhood 1.111899e+01
## Garage_Cars               Garage_Cars 5.374303e+00
## Total_Bsmt_SF           Total_Bsmt_SF 5.031406e+00
## First_Flr_SF             First_Flr_SF 3.641743e+00
## Bsmt_Qual                   Bsmt_Qual 2.365967e+00
## Exter_Qual                 Exter_Qual 1.559647e+00
## Kitchen_Qual             Kitchen_Qual 1.210399e+00
## Year_Remod_Add         Year_Remod_Add 9.800489e-01
## MS_SubClass               MS_SubClass 9.168515e-01
## Fireplace_Qu             Fireplace_Qu 7.900484e-01
## Mas_Vnr_Area             Mas_Vnr_Area 7.480704e-01
## Lot_Area                     Lot_Area 7.181146e-01
## Bsmt_Unf_SF               Bsmt_Unf_SF 7.036017e-01
## Second_Flr_SF           Second_Flr_SF 6.564021e-01
## Garage_Area               Garage_Area 5.812072e-01
## Screen_Porch             Screen_Porch 5.697864e-01
## Bsmt_Exposure           Bsmt_Exposure 5.447030e-01
## Overall_Cond             Overall_Cond 5.149690e-01
## BsmtFin_Type_1         BsmtFin_Type_1 5.136834e-01
## Full_Bath                   Full_Bath 4.517156e-01
## Lot_Frontage             Lot_Frontage 4.308841e-01
## Latitude                     Latitude 4.021943e-01
## Sale_Condition         Sale_Condition 3.736402e-01
## Garage_Type               Garage_Type 3.400862e-01
## Bsmt_Full_Bath         Bsmt_Full_Bath 2.830678e-01
## Garage_Finish           Garage_Finish 2.794122e-01
## Open_Porch_SF           Open_Porch_SF 2.731140e-01
## Exterior_1st             Exterior_1st 2.449858e-01
## Fireplaces                 Fireplaces 2.446628e-01
## Sale_Type                   Sale_Type 2.083020e-01
## Year_Built                 Year_Built 2.060348e-01
## Central_Air               Central_Air 1.895762e-01
## Exterior_2nd             Exterior_2nd 1.791393e-01
## TotRms_AbvGrd           TotRms_AbvGrd 1.624508e-01
## Wood_Deck_SF             Wood_Deck_SF 1.619419e-01
## Mo_Sold                       Mo_Sold 1.556240e-01
## Condition_1               Condition_1 1.555862e-01
## Garage_Cond               Garage_Cond 1.433484e-01
## Functional                 Functional 1.195756e-01
## Land_Contour             Land_Contour 1.176260e-01
## Longitude                   Longitude 1.099157e-01
## Heating_QC                 Heating_QC 7.996284e-02
## Year_Sold                   Year_Sold 7.732664e-02
## Roof_Matl                   Roof_Matl 6.581906e-02
## House_Style               House_Style 5.653741e-02
## Mas_Vnr_Type             Mas_Vnr_Type 4.764729e-02
## Bedroom_AbvGr           Bedroom_AbvGr 4.542366e-02
## Lot_Config                 Lot_Config 3.928406e-02
## Paved_Drive               Paved_Drive 3.815510e-02
## BsmtFin_Type_2         BsmtFin_Type_2 3.573880e-02
## Roof_Style                 Roof_Style 3.492513e-02
## Bsmt_Cond                   Bsmt_Cond 3.320548e-02
## Land_Slope                 Land_Slope 3.191664e-02
## Exter_Cond                 Exter_Cond 3.036215e-02
## MS_Zoning                   MS_Zoning 3.016913e-02
## Enclosed_Porch         Enclosed_Porch 2.361207e-02
## Alley                           Alley 1.860542e-02
## Condition_2               Condition_2 1.829088e-02
## Half_Bath                   Half_Bath 1.622231e-02
## Three_season_porch Three_season_porch 1.091252e-02
## Foundation                 Foundation 1.039571e-02
## Low_Qual_Fin_SF       Low_Qual_Fin_SF 8.975948e-03
## BsmtFin_SF_2             BsmtFin_SF_2 8.747153e-03
## Fence                           Fence 7.868905e-03
## Lot_Shape                   Lot_Shape 5.645516e-03
## Electrical                 Electrical 4.850525e-03
## Heating                       Heating 4.405392e-03
## Garage_Qual               Garage_Qual 3.845332e-03
## BsmtFin_SF_1             BsmtFin_SF_1 2.902816e-03
## Misc_Val                     Misc_Val 2.321802e-03
## Bsmt_Half_Bath         Bsmt_Half_Bath 2.263392e-03
## Street                         Street 1.157860e-03
## Bldg_Type                   Bldg_Type 4.970819e-04
## Misc_Feature             Misc_Feature 4.236315e-04
## Pool_QC                       Pool_QC 1.575743e-04
## Pool_Area                   Pool_Area 9.720817e-05
## Utilities                   Utilities 0.000000e+00
## Kitchen_AbvGr           Kitchen_AbvGr 0.000000e+00</pre><p>另外一個方式，就是使用vip套件(variable importance plot)的vip函式，會回傳ggplot形式的重要變數圖表。 為兩個解釋集成樹的兩大重要解釋指標)，是許多機器學習模型常用的變數重要性繪圖框架。</p><pre class="crayon-plain-tag"># install.packages('vip')
vip::vip(gbm.fit.final)</pre><p></p>
<h5><img loading="lazy" class="alignnone size-full wp-image-2879" src="/wp-content/uploads/2019/04/Rplot01.png" alt="gradient boosting machines, GBM" width="631" height="441" srcset="/wp-content/uploads/2019/04/Rplot01.png 631w, /wp-content/uploads/2019/04/Rplot01-300x210.png 300w, /wp-content/uploads/2019/04/Rplot01-230x161.png 230w, /wp-content/uploads/2019/04/Rplot01-350x245.png 350w, /wp-content/uploads/2019/04/Rplot01-480x335.png 480w" sizes="(max-width: 631px) 100vw, 631px" /></h5>
<h5>Partial dependence plots</h5>
<p>一旦識別出最重要的幾個變數後，下一步就是去了解當解釋變數變動時，目標變數是如何變動的(即marginal effects，邊際效果，每變動一單位解釋變數時，對目標變數的影響)。我們可以使用partial dependence plots(PDPs)和individual conditional expectation(ICE)曲線。</p>
<ul>
<li>PDPs: 繪製特定變數邊際變動造成的平均目標預測值的變動。比如說，下圖繪製了預測變數Gr_Liv_Area邊際變動(控制其他變數不變的情況下)對平均目標預測銷售金額(avg. sale price_的影響。下圖PDPs描述隨著房屋基底的面積邊際增加，平均銷售價格增加的變化。</li>
</ul>
<p></p><pre class="crayon-plain-tag">gbm.fit.final %&gt;%
  partial(object = .,# A fitted model object of appropriate class (e.g., "gbm", "lm", "randomForest", "train", etc.).
          pred.var = "Gr_Liv_Area", 
          n.trees = gbm.fit.final$n.trees, # 如果是gbm的話，需指定模型所使用樹個數
          grid.resolution = 100) %&gt;%
  # The autplot function can be used to produce graphics based on ggplot2
  autoplot(rug = TRUE, train = ames_train) + # plotPartial()不支援gbm
  scale_y_continuous(labels = scales::dollar) # 因為是使用ggplot基礎繪圖，故可以使用ggplot相關圖層來調整</pre><p><img loading="lazy" class="alignnone size-full wp-image-2880" src="/wp-content/uploads/2019/04/Rplot02.png" alt="gradient boosting machines, GBM" width="606" height="439" srcset="/wp-content/uploads/2019/04/Rplot02.png 606w, /wp-content/uploads/2019/04/Rplot02-300x217.png 300w, /wp-content/uploads/2019/04/Rplot02-230x167.png 230w, /wp-content/uploads/2019/04/Rplot02-350x254.png 350w, /wp-content/uploads/2019/04/Rplot02-480x348.png 480w" sizes="(max-width: 606px) 100vw, 606px" /></p>
<p>拆解步驟1: 先檢視沒有繪圖(plot = FALSE)的所回傳的data.frame。在一些例子中，使用partial根據object來擷取training data是困難的，此時便會出現錯誤訊息要求使用者透過train參數提供訓練資料集。但絕大部分的時候，partial會預設擷取當下環境下訓練object所使用的訓練資料集，所以很重要的事，在執行partial之前不行改變到訓練資料集的變數內容，而此問題可透過明確指定train參數所對應的訓練資料集而解決。</p><pre class="crayon-plain-tag">partialDf &lt;-partial(
        object = gbm.fit.final,pred.var = "Gr_Liv_Area", 
        n.trees = gbm.fit.final$n.trees, 
        grid.resolution = 100,
        train = ames_train)
partialDf</pre><p></p><pre class="crayon-plain-tag">##     Gr_Liv_Area     yhat
## 1           334 156956.9
## 2           387 156956.9
## 3           441 156956.9
## 4           494 156956.9
## 5           548 156956.9
## 6           602 156956.9
## 7           655 156956.9
## 8           709 156660.6
## 9           762 156755.5
## 10          816 156871.1
## 11          870 156871.1
## 12          923 158251.7
## 13          977 161056.8
## 14         1031 163112.1
## 15         1084 163138.2
## 16         1138 163214.8
## 17         1191 166534.4
## 18         1245 166987.2
## 19         1299 169077.6
## 20         1352 170758.6
## 21         1406 172776.0
## 22         1459 174681.8
## 23         1513 181046.8
## 24         1567 182290.3
## 25         1620 185044.8
## 26         1674 185035.8
## 27         1728 186329.2
## 28         1781 189560.9
## 29         1835 192374.4
## 30         1888 193609.3
## 31         1942 194775.0
## 32         1996 200759.0
## 33         2049 202826.8
## 34         2103 206586.7
## 35         2156 207502.2
## 36         2210 207502.2
## 37         2264 209486.0
## 38         2317 212637.8
## 39         2371 214445.4
## 40         2425 214863.0
## 41         2478 215367.1
## 42         2532 215404.3
## 43         2585 215404.3
## 44         2639 215571.6
## 45         2693 226433.3
## 46         2746 225632.2
## 47         2800 225849.6
## 48         2853 223628.9
## 49         2907 219924.6
## 50         2961 218770.4
## 51         3014 218770.4
## 52         3068 218770.4
## 53         3122 227327.1
## 54         3175 229537.3
## 55         3229 235917.9
## 56         3282 241038.0
## 57         3336 240301.2
## 58         3390 243415.0
## 59         3443 243127.7
## 60         3497 246930.9
## 61         3550 246930.9
## 62         3604 246930.9
## 63         3658 246930.9
## 64         3711 246930.9
## 65         3765 246930.9
## 66         3819 246930.9
## 67         3872 246930.9
## 68         3926 246930.9
## 69         3979 246930.9
## 70         4033 246930.9
## 71         4087 246930.9
## 72         4140 246930.9
## 73         4194 246930.9
## 74         4247 246930.9
## 75         4301 246930.9
## 76         4355 246930.9
## 77         4408 246930.9
## 78         4462 246930.9
## 79         4516 246930.9
## 80         4569 246930.9
## 81         4623 246930.9
## 82         4676 246930.9
## 83         4730 246930.9
## 84         4784 246930.9
## 85         4837 246930.9
## 86         4891 246930.9
## 87         4944 246930.9
## 88         4998 246930.9
## 89         5052 246930.9
## 90         5105 246930.9
## 91         5159 246930.9
## 92         5213 246930.9
## 93         5266 246930.9
## 94         5320 246930.9
## 95         5373 246930.9
## 96         5427 246930.9
## 97         5481 246930.9
## 98         5534 246930.9
## 99         5588 246930.9
## 100        5642 246930.9</pre><p>亦可使用plot = TRUE將以上結果繪出。(不是ggplot2)<br />
但其實比較推薦保留plot = FALSE，將partial回傳結果先儲存。這樣的好處在於繪圖上會更有彈性，當預設繪圖結果不足夠時，不需要重新執行partial()。</p><pre class="crayon-plain-tag">partial(gbm.fit.final, train = ames_train, pred.var = 'Gr_Liv_Area',n.trees = gbm.fit.final$n.trees, plot = TRUE)</pre><p><img src="/wp-content/uploads/2019/04/unnamed-chunk-23-1-1.png" alt="gradient boosting machines, GBM" /></p>
<ul>
<li>ICE curves: 是PDPs圖的延伸。與PDPs圖不同的地方在於，PDPs是繪製每個解釋變數邊際變動所造成的「平均」目標數值的變化(平均所有觀測值)，而ICE curves則是繪製「每個」解釋變數邊際變動對所有觀測值的目標數值的變動。下面分別呈現了regular ICE曲線圖(左)和centered ICE曲線圖(右)。當曲線有很寬廣的截距且彼此疊在一起，很難辨別感興趣的預測變數邊際變動所造成的回應變數變動量的異質性。而centered ICE曲線，則能強調結果中的異質性。以下regular ICE圖顯示，當Gr_Liv_Area增加時，大部分的觀測值的目標變數變化具有共通趨勢，而centered ICE圖則凸顯部分與共通趨勢不一致的觀察值變化圖。</li>
</ul>
<p></p><pre class="crayon-plain-tag">ice1 &lt;- gbm.fit.final %&gt;%
  partial(
    pred.var = "Gr_Liv_Area", 
    n.trees = gbm.fit.final$n.trees, 
    grid.resolution = 100,
    ice = TRUE # 當ice = TRUE或給定pred.fun參數，會回傳使用newdata替每個觀測值預測的結果
    ) %&gt;%
  autoplot(rug = TRUE, train = ames_train, alpha = .1) + # alpha參數只在ICE curves繪製上有效
  ggtitle("Non-centered") +
  scale_y_continuous(labels = scales::dollar)</pre><p></p><pre class="crayon-plain-tag">ice2 &lt;- gbm.fit.final %&gt;%
  partial(
    pred.var = "Gr_Liv_Area", 
    n.trees = gbm.fit.final$n.trees, 
    grid.resolution = 100,
    ice = TRUE
    ) %&gt;%
  autoplot(rug = TRUE, train = ames_train, alpha = .1, center = TRUE) +
  ggtitle("Centered") +
  scale_y_continuous(labels = scales::dollar)</pre><p></p><pre class="crayon-plain-tag">gridExtra::grid.arrange(ice1, ice2, nrow = 1)</pre><p><img loading="lazy" class="alignnone size-full wp-image-2881" src="/wp-content/uploads/2019/04/Rplot03.png" alt="gradient boosting machines, GBM" width="1042" height="530" srcset="/wp-content/uploads/2019/04/Rplot03.png 1042w, /wp-content/uploads/2019/04/Rplot03-300x153.png 300w, /wp-content/uploads/2019/04/Rplot03-768x391.png 768w, /wp-content/uploads/2019/04/Rplot03-1024x521.png 1024w, /wp-content/uploads/2019/04/Rplot03-830x422.png 830w, /wp-content/uploads/2019/04/Rplot03-230x117.png 230w, /wp-content/uploads/2019/04/Rplot03-350x178.png 350w, /wp-content/uploads/2019/04/Rplot03-480x244.png 480w" sizes="(max-width: 1042px) 100vw, 1042px" /></p>
<h5>LIME</h5>
<p>LIME是一種新程序幫助我們了解，單一觀察值的預測目標值是如何產生的。對gbm物件使用lime套件，我們需要定義模型類型model type和預測方法prediction methods。</p><pre class="crayon-plain-tag">model_type.gbm &lt;- function(x, ...) {
  return("regression")
}

predict_model.gbm &lt;- function(x, newdata, ...) {
  pred &lt;- predict(x, newdata, n.trees = x$n.trees)
  return(as.data.frame(pred))
}</pre><p>以下我們便挑選兩個觀測值來檢視其預測目標值是如何產生的。<br />
結果包括預測目標值（分別為case1: 127K case2: 159K）、局部模型配適（兩者的局部配飾都太好）、以及對不同觀測值來說，對目標變數最具影響力的特徵變數。</p><pre class="crayon-plain-tag"># get a few observations to perform local interpretation on
local_obs &lt;- ames_test[1:2, ]

# apply LIME
explainer &lt;- lime(
  x=ames_train, # The training data used for training the model that should be explained.
  model = gbm.fit.final # The model whose output should be explained
  )
# 一旦使用lime()創建好了explainer，則可將explainer用作解釋模型作用在新觀察值的結果
explanation &lt;- explain(x = local_obs, # New observations to explain
                       explainer = explainer,
                       n_features = 5 # The number of features to use for each explanation.
                       )</pre><p></p><pre class="crayon-plain-tag">plot_features(explanation = explanation)</pre><p><img loading="lazy" class="alignnone size-full wp-image-2882" src="/wp-content/uploads/2019/04/Rplot04.png" alt="gradient boosting machines, GBM" width="1033" height="525" srcset="/wp-content/uploads/2019/04/Rplot04.png 1033w, /wp-content/uploads/2019/04/Rplot04-300x152.png 300w, /wp-content/uploads/2019/04/Rplot04-768x390.png 768w, /wp-content/uploads/2019/04/Rplot04-1024x520.png 1024w, /wp-content/uploads/2019/04/Rplot04-830x422.png 830w, /wp-content/uploads/2019/04/Rplot04-230x117.png 230w, /wp-content/uploads/2019/04/Rplot04-350x178.png 350w, /wp-content/uploads/2019/04/Rplot04-480x244.png 480w" sizes="(max-width: 1033px) 100vw, 1033px" /></p>
<h4>Predicting</h4>
<p>一旦決定好最佳的模型後，便使用模型來預測新的資料集(ames_test)。跟大部分模型一樣，我們可以使用predict()函數，只不過我們需要指定所需要的樹模型個數(可參考?predict.gbm之說明)。我們可以觀察到，測試資料集所得到的RMSE跟我們得到的最佳gbm模型的RMSE(22K)是差不多的。</p><pre class="crayon-plain-tag"># predict values for test data
pred &lt;- predict(gbm.fit.final, n.trees = gbm.fit.final$n.trees, ames_test)

# results
caret::RMSE(pred, ames_test$Sale_Price)</pre><p></p><pre class="crayon-plain-tag">## [1] 19686.42</pre><p></p>
<h3>xgboost</h3>
<p>xgboost套件提供一個Extreme Gradient Boosting的R API，可以具效率地去執行gradient boosting framework(約比gbm套件快上10倍)。<a href="https://github.com/dmlc/xgboost/tree/master/demo" target="_blank" rel="noopener noreferrer">xgboost</a>文件的知識庫有豐富的資訊。亦可參考非常完整的參數tuning<a href="https://www.analyticsvidhya.com/blog/2016/03/complete-guide-parameter-tuning-xgboost-with-codes-python/" target="_blank" rel="noopener noreferrer">教學文章</a>。xgboost套件一直以來在kaggle data mining競賽上是滿受歡迎且成功的演算法套件。</p>
<p>xgboost幾個特色包括：</p>
<ul>
<li>提供內建的k-fold cross validation</li>
<li>隨機GBM，兼具column和row的抽樣(per split and per tree)，以達到更好的一般性(避免過度擬合)。</li>
<li>包括高效的線性模型求解器和樹學習演算法。</li>
<li>單一機器上的平行運算。</li>
<li>支援多個目標函數，包括回歸regression，分類classification，和排序ranking。</li>
<li>該套件被設計為有延展性的(extensible)，因此使用者可以自己定義自己的目標函式(objectives)。</li>
<li>Apache 2.0 License</li>
</ul>
<h4>基本的xgboost實作</h4>
<p>xgboost 只能在都是「數值變數的矩陣」下運作(由於在空間中表示點的位置，所有特徵值須為數值)。因此，我們必須先將數據進行編碼轉換。</p>
<p>一般來說編碼類別變數有兩種方式，分別為Label Encoding和one-hot encoding，通常前者會衍伸出編碼後的數值變成有順序意義在的問題，以及在空間維度中代表不同距離的意義之問題，故通常最常使用one-hot encoding法是最適合的，來使類別變數中三個屬性在空間中距離原點的距離是相同的(*但必須注意的是，one-hot encoding只適用在類別種類少的情況，如果種類過多，過多展開的維度會衍伸出其他問題)。</p>
<p>在R中有幾個執行one-hot encoding的方式，包括Matrix::sparse.model.matrix， caret::dummyVars，但我們這邊會使用vtreat套件。vtreat是一個強大的資料前處理套件，且有助於處理因遺失值、或新資料中才新冒出的類別資料級別（原本不為訓練資料類別變數中的選項）等因素而造成的問題。然而vtreat在使用上不是很直覺。本篇學習筆記在此不會說明太多vtreat的功能，如需要了解可先參考<a href="https://arxiv.org/abs/1611.09477" target="_blank" rel="noopener noreferrer">連結1</a>，<a href="https://www.r-bloggers.com/a-demonstration-of-vtreat-data-preparation/" target="_blank" rel="noopener noreferrer">連結2</a>和<a href="https://github.com/WinVector/vtreat" target="_blank" rel="noopener noreferrer">連結3</a>。</p>
<p>以下使用vtreat將training &amp; testing資料即重新one-hot encoding編碼。</p><pre class="crayon-plain-tag"># variable names
features &lt;- setdiff(names(ames_train), "Sale_Price")

# Create the treatment plan from the training data
treatplan &lt;- vtreat::designTreatmentsZ(ames_train, features, verbose = FALSE)

# Get the "clean" variable names from the scoreFrame
new_vars &lt;- treatplan %&gt;%
  magrittr::use_series(scoreFrame) %&gt;%        
  dplyr::filter(code %in% c("clean", "lev")) %&gt;% 
  magrittr::use_series(varName)     

# Prepare the training data
features_train &lt;- vtreat::prepare(treatplan, ames_train, varRestriction = new_vars) %&gt;% as.matrix()
response_train &lt;- ames_train$Sale_Price

# Prepare the test data
features_test &lt;- vtreat::prepare(treatplan, ames_test, varRestriction = new_vars) %&gt;% as.matrix()
response_test &lt;- ames_test$Sale_Price</pre><p>編碼後的維度個數</p><pre class="crayon-plain-tag">dim(features_train)</pre><p></p><pre class="crayon-plain-tag">## [1] 2051  348</pre><p></p><pre class="crayon-plain-tag">dim(features_test)</pre><p></p><pre class="crayon-plain-tag">## [1] 879 348</pre><p>xgboost提供不同的訓練函數(像是xgb.train,xgb.cv)。而我們這邊會使用能夠進行cross-validation的xgb.cv。以下我們訓練一個使用5-fold cv且使用1000棵樹的xgb模型。xgb.cv中有許多可調整的參數(基本的參數都跟xgb.train是一樣的)，幾個比較常出現的參數（與其預設值）分別為以下：</p>
<ul>
<li>data: 只允許數值型矩陣，如xgb.DMatrix, matrix, dgCMartirx類型。</li>
<li>nrounds: 模型所使用的樹個數(迭代數)。</li>
<li>nfold: 將投入的data參數值（在此處為訓練資料集），隨機切割(partition)為n等分的子樣本。</li>
<li>params: list()，參數list。常用的參數包括：
<ul>
<li>objective : 目標函數(亦可使用params = list()進行參數指定)。常用的目標函數包括：</li>
<li>reg:linear : 線性迴歸</li>
<li>binary:logistic : 分類用的羅吉斯迴歸</li>
<li>eta: learning rate,學習步伐(default為0.3)</li>
<li>max_depth: tree depth, 樹模型的深度(default為6)</li>
<li>min_child_weight: minimum node size,最小節點個數值(default為1)</li>
<li>subsample: percentage of training data to sample for each tree (就如同gbm套件中的bag.fraction參數),每棵樹模型將抽樣使用多少比例的訓練資料集(default: 100% -&gt; 沒有OOB sample)，用來避免overfitting，亦可加快運算(分析較少的資料)。</li>
</ul>
</li>
</ul>
<p>其中cross-validation會執行nrounds次，每次迭代中，nfold個子樣本都會輪流作為驗證資料集，來驗證nfold-1子集合所訓練出的模型。</p><pre class="crayon-plain-tag"># reproducibility
set.seed(123)

system.time(
  xgb.fit1 &lt;- xgb.cv(
  data = features_train,
  label = response_train,
  nrounds = 1000,
  nfold = 5,
  objective = "reg:linear",  # for regression models
  verbose = 0               # silent,不要顯示詳細資訊
)
)</pre><p></p><pre class="crayon-plain-tag">##    user  system elapsed 
## 234.376   2.540 244.823</pre><p>檢視每次迭代的cross-validation的結果。分別會有訓練資料集的平均RMSE，和測試資料集的平均RMSE，希望兩者越接近越好。</p><pre class="crayon-plain-tag">print(xgb.fit1,verbose = TRUE)</pre><p></p><pre class="crayon-plain-tag">## ##### xgb.cv 5-folds
## call:
##   xgb.cv(data = features_train, nrounds = 1000, nfold = 5, label = response_train, 
##     verbose = 0, objective = &quot;reg:linear&quot;)
## params (as set within xgb.cv):
##   objective = &quot;reg:linear&quot;, silent = &quot;1&quot;
## callbacks:
##   cb.evaluation.log()
## niter: 1000
## evaluation_log:
##     iter train_rmse_mean train_rmse_std test_rmse_mean test_rmse_std
##        1    1.420236e+05   850.15595494      142612.98      4504.553
##        2    1.023304e+05   645.18845214      104198.60      4628.932
##        3    7.443451e+04   535.78249514       77533.40      4635.993
##        4    5.484559e+04   468.37246662       59185.94      4420.339
##        5    4.118994e+04   386.94999310       47545.03      4452.632
## ---                                                                 
##      996    4.831320e-02     0.01131165       27373.21      3243.812
##      997    4.831320e-02     0.01131165       27373.21      3243.812
##      998    4.831320e-02     0.01131165       27373.21      3243.812
##      999    4.831320e-02     0.01131165       27373.21      3243.811
##     1000    4.831320e-02     0.01131165       27373.21      3243.812</pre><p>檢視回傳xbg.fit1物件的屬性(attributes)。</p><pre class="crayon-plain-tag">attributes(xgb.fit1)</pre><p></p><pre class="crayon-plain-tag">## $names
## [1] &quot;call&quot;           &quot;params&quot;         &quot;callbacks&quot;     
## [4] &quot;evaluation_log&quot; &quot;niter&quot;          &quot;nfeatures&quot;     
## [7] &quot;folds&quot;         
## 
## $class
## [1] &quot;xgb.cv.synchronous&quot;</pre><p>回傳的xgb.fit1物件包含很多重要資訊。特別像是我們可以擷取xgb.fit1$evaluation_log來觀察發生在訓練資料集和測試資料集的最小的RMSE和最適的樹數量(跟print(xgb.fit1)效果一樣)，以及cross-validation error。</p><pre class="crayon-plain-tag">xgb.fit1$evaluation_log</pre><p></p><pre class="crayon-plain-tag">##       iter train_rmse_mean train_rmse_std test_rmse_mean
##    1:    1    1.420236e+05   850.15595494      142612.98
##    2:    2    1.023304e+05   645.18845214      104198.60
##    3:    3    7.443451e+04   535.78249514       77533.40
##    4:    4    5.484559e+04   468.37246662       59185.94
##    5:    5    4.118994e+04   386.94999310       47545.03
##   ---                                                   
##  996:  996    4.831320e-02     0.01131165       27373.21
##  997:  997    4.831320e-02     0.01131165       27373.21
##  998:  998    4.831320e-02     0.01131165       27373.21
##  999:  999    4.831320e-02     0.01131165       27373.21
## 1000: 1000    4.831320e-02     0.01131165       27373.21
##       test_rmse_std
##    1:      4504.553
##    2:      4628.932
##    3:      4635.993
##    4:      4420.339
##    5:      4452.632
##   ---              
##  996:      3243.812
##  997:      3243.812
##  998:      3243.812
##  999:      3243.811
## 1000:      3243.812</pre><p>我們找出使得訓練和測試誤差最小的迭代數(模型所使用的樹個數)，以及所對應的RMSE。由下表所示，訓練誤差持續下降，並約在924棵樹時逼近為零(0.048)。然而，交叉驗證誤差約在60棵樹左右達到最小RMSE(約27K)。</p><pre class="crayon-plain-tag"># get number of trees that minimize error
xgb.fit1$evaluation_log %&gt;%
  dplyr::summarise(
    ntrees.train = which(train_rmse_mean == min(train_rmse_mean))[1],
    rmse.train   = min(train_rmse_mean),
    ntrees.test  = which(test_rmse_mean == min(test_rmse_mean))[1],
    rmse.test   = min(test_rmse_mean)
  )</pre><p></p><pre class="crayon-plain-tag">##   ntrees.train rmse.train ntrees.test rmse.test
## 1          924  0.0483002          60  27337.79</pre><p></p><pre class="crayon-plain-tag">##   ntrees.train rmse.train ntrees.test rmse.test
## 1          965  0.5022836          60  27572.31</pre><p>將詳細xgboost模型迭代資訊繪出如下，紅色線代表訓練誤差，藍色線表示交叉驗證誤差。</p><pre class="crayon-plain-tag"># plot error vs number trees
ggplot(xgb.fit1$evaluation_log) +
  geom_line(aes(iter, train_rmse_mean), color = "red") +
  geom_line(aes(iter, test_rmse_mean), color = "blue")</pre><p><img src="/wp-content/uploads/2019/04/unnamed-chunk-36-1-1.png" alt="gradient boosting machines, GBM" /></p>
<p>一個xbm.cv滿不錯的功能就是early stopping。該功能讓我們可在cross validation error在連續第n棵樹不再下降的情況下，告訴函式該停止。以上面的例子來說，我們可以設定當cv error在連續10個樹模型(迭代)沒有下降時停止迭代(early_stopping_rounds = 10)。該功能有助於加速下一個tuning校正過程。</p><pre class="crayon-plain-tag"># reproducibility
set.seed(123)

xgb.fit2 &lt;- xgb.cv(
  data = features_train,
  label = response_train,
  nrounds = 1000,
  nfold = 5,
  objective = "reg:linear",  # for regression models
  verbose = 0,               # silent,
  early_stopping_rounds = 10 # stop if no improvement for 10 consecutive trees
)</pre><p>將迭代的過程細節繪出：</p><pre class="crayon-plain-tag"># plot error vs number trees
ggplot(xgb.fit2$evaluation_log) +
  geom_line(aes(iter, train_rmse_mean), color = "red") +
  geom_line(aes(iter, test_rmse_mean), color = "blue")</pre><p><img src="/wp-content/uploads/2019/04/unnamed-chunk-38-1-1.png" alt="gradient boosting machines, GBM" /></p>
<h4>Tuning</h4>
<p>要tune XGBoost模型，我們會傳入一個parameters的list物件給params參數。幾個最常見的參數如下：</p>
<ul>
<li>eta : 控制學習步伐</li>
<li>max_depth: 樹的深度</li>
<li>min_child_weight: 末梢節點的最小觀測值個數</li>
<li>subsample: 每棵樹模型所抽樣訓練資料集的比例</li>
<li>colsample_bytrees: 每棵樹模型所抽樣的欄位數目</li>
</ul>
<p>舉例來說，如果想要指定特定參數值，我們可以將上面的模型設定重新編輯如下：</p><pre class="crayon-plain-tag"># create parameter list
  params &lt;- list(
    eta = .1,
    max_depth = 5,
    min_child_weight = 2,
    subsample = .8,
    colsample_bytree = .9
  )

# reproducibility
set.seed(123)

# train model
system.time(
xgb.fit3 &lt;- xgb.cv(
  params = params,
  data = features_train,
  label = response_train,
  nrounds = 1000,
  nfold = 5,
  objective = "reg:linear",  # for regression models
  verbose = 0,               # silent,
  early_stopping_rounds = 10 # stop if no improvement for 10 consecutive trees
)
)</pre><p></p><pre class="crayon-plain-tag">##    user  system elapsed 
##  39.185   0.124  39.446</pre><p></p><pre class="crayon-plain-tag"># assess results
xgb.fit3$evaluation_log %&gt;%
  dplyr::summarise(
    ntrees.train = which(train_rmse_mean == min(train_rmse_mean))[1],
    rmse.train   = min(train_rmse_mean),
    ntrees.test  = which(test_rmse_mean == min(test_rmse_mean))[1],
    rmse.test   = min(test_rmse_mean)
  )</pre><p></p><pre class="crayon-plain-tag">##   ntrees.train rmse.train ntrees.test rmse.test
## 1          220   5054.546         210  24159.13</pre><p>想要執行更大型的search grid，我們可以使用和gbm相同的程序。先產生一個超參數hyperparameter search grid和儲存結果的欄位(最適樹模型個數與最小RMSE)。</p>
<p>以下我們創立一個4*4*4*3*3 = 576個參數排列組合的hyper grid。</p><pre class="crayon-plain-tag"># create hyperparameter grid
hyper_grid &lt;- expand.grid(
  eta = c(.01, .05, .1, .3),
  max_depth = c(1, 3, 5, 7),
  min_child_weight = c(1, 3, 5, 7),
  subsample = c(.65, .8, 1), 
  colsample_bytree = c(.8, .9, 1),
  optimal_trees = 0,               # a place to dump results
  min_RMSE = 0                     # a place to dump results
)

nrow(hyper_grid)</pre><p></p><pre class="crayon-plain-tag">## [1] 576</pre><p>接著，我們使用迴圈一一去執行XGBoost模型套用不同參數組合的結果，並將結果指標儲存。（*這段程序耗時，約6小時以上）</p><pre class="crayon-plain-tag"># grid search 
for(i in 1:nrow(hyper_grid)) {

  # create parameter list
  params &lt;- list(
    eta = hyper_grid$eta[i],
    max_depth = hyper_grid$max_depth[i],
    min_child_weight = hyper_grid$min_child_weight[i],
    subsample = hyper_grid$subsample[i],
    colsample_bytree = hyper_grid$colsample_bytree[i]
  )

  # reproducibility
  set.seed(123)

  # train model
  xgb.tune &lt;- xgb.cv(
    params = params,
    data = features_train,
    label = response_train,
    nrounds = 5000,
    nfold = 5,
    objective = "reg:linear",  # for regression models
    verbose = 0,               # silent,
    early_stopping_rounds = 10 # stop if no improvement for 10 consecutive trees
  )

  # add min training error and trees to grid
  hyper_grid$optimal_trees[i] &lt;- which.min(xgb.tune$evaluation_log$test_rmse_mean)
  hyper_grid$min_RMSE[i] &lt;- min(xgb.tune$evaluation_log$test_rmse_mean)
}

hyper_grid %&gt;%
  dplyr::arrange(min_RMSE) %&gt;%
  head(10)</pre><p></p><pre class="crayon-plain-tag">##     eta max_depth min_child_weight subsample colsample_bytree optimal_trees min_RMSE
## 1  0.01         5                3      0.65              0.8          1501 23255.95
## 2  0.05         5                5      0.80              0.9           486 23269.22
## 3  0.01         5                3      0.65              0.9          1325 23373.22
## 4  0.01         5                1      0.65              0.8          1257 23396.13
## 5  0.05         5                7      0.65              1.0           508 23437.00
## 6  0.01         3                3      0.65              1.0          2301 23457.89
## 7  0.01         5                3      0.80              0.8          1488 23499.83
## 8  0.01         7                3      0.65              0.8          1178 23519.53
## 9  0.01         3                5      0.65              0.9          2274 23526.33
## 10 0.05         5                7      0.80              0.8           401 23555.05</pre><p>經過評估後，可能還會繼續測是幾個不同的參數組合，去找到最能影響模型成效的參數。這邊有<a href="https://www.analyticsvidhya.com/blog/2016/03/complete-guide-parameter-tuning-xgboost-with-codes-python/">一篇很棒的文章</a>在討論tuning XGBoost的策略法。但為了簡短，在此我們即假設上述結果為globally最適的模型，並使用xgb.train()來配飾最終模型。(*xgboost)</p><pre class="crayon-plain-tag"># parameter list
params &lt;- list(
  eta = 0.01,
  max_depth = 5,
  min_child_weight = 5,
  subsample = 0.65,
  colsample_bytree = 1
)

# train final model
xgb.fit.final &lt;- xgboost(
  params = params,
  data = features_train,
  label = response_train,
  nrounds = 1576,
  objective = "reg:linear",
  verbose = 0
)</pre><p></p>
<h4>Visualization</h4>
<h5>Variable importance</h5>
<p>xgboost提供內建的變數重要性繪圖功能。首先，可以使用xgb.importance()函數建立一個重要矩陣(importance matrix)的data.table，然後再將這個重要矩陣(importance matrix)投入xgb.plot.importance()函數進行繪圖。</p>
<p>在重要性矩陣中，Gain, Cover, Frequency欄位分別代表三種不同的變數重要性衡量的方法（此為tree model的衡量指標，如果是linear mode，衡量指標則會是Weight(模型中的線性係數)和Class）：</p>
<ol>
<li>Gain(貢獻度): 相應特徵對模型的相對貢獻度，計算特徵在模型中每棵樹的貢獻。其與gbm套件中的relative.influence是同意的。</li>
<li>Cover(觀測值個數涵蓋率): 與該特徵相關的相對觀察值個數(%)。比如說，你有100個觀察值，4個特徵變數3棵樹，並假設feature 1是用來區分葉節點並在樹tree1, tree2, tree3有各有10,5,2個觀察值；於是feature 1的cover會被計算為10+5+2=17個觀察值。feature2 ~ feature4亦會計算各自的cover，並以該特徵涵蓋變數個數相對於所有特徵總涵蓋變數個數計算百分比。</li>
<li>Frequency(出現在模型所有樹的相對次數):代表某特徵出現在模型中樹的相對次數百分比(%)。就上面的範例來說，假設feature 1分別在tree1, tree2,tree3的分割樹(splits)分別是2, 1, 3，那麼feature 1的權重將是2+1+3 = 6。feature 1的frequency則是計算該特徵的權重相對於其他features的權重加總。</li>
</ol>
<p></p><pre class="crayon-plain-tag"># create importance matrix
importance_matrix &lt;- xgb.importance(model = xgb.fit.final)

importance_matrix</pre><p></p><pre class="crayon-plain-tag">##                                                          Feature         Gain        Cover    Frequency
##   1:                                                 Garage_Cars 2.508517e-01 1.780750e-02 8.503913e-03
##   2:                                                 Gr_Liv_Area 1.629517e-01 7.008097e-02 6.596177e-02
##   3:                                   Bsmt_Qual_lev_x_Excellent 1.249057e-01 1.408468e-02 7.111680e-03
##   4:                                               Total_Bsmt_SF 6.487028e-02 5.422924e-02 5.535069e-02
##   5:                                                  Year_Built 5.279356e-02 2.547546e-02 2.697923e-02
##  ---                                                                                                   
## 238:                                   Garage_Type_lev_x_Basment 9.872921e-07 1.100922e-04 3.762793e-05
## 239:                                   Lot_Shape_lev_x_Irregular 8.863554e-07 9.469465e-05 3.762793e-05
## 240:                                       Functional_lev_x_Maj2 8.741157e-07 1.330922e-04 3.762793e-05
## 241: MS_SubClass_lev_x_Two_Family_conversion_All_Styles_and_Ages 7.552052e-07 3.820506e-05 3.762793e-05
## 242:    MS_SubClass_lev_x_One_and_Half_Story_Unfinished_All_Ages 1.986944e-07 1.443516e-06 3.762793e-05</pre><p>將剛剛得到的data.table放入xgb.plot.importance()，繪製指定的&#8221;Gain&#8221;變數重要性圖表。</p><pre class="crayon-plain-tag"># variable importance plot
xgb.plot.importance(importance_matrix, top_n = 10, measure = "Gain")</pre><p><img src="/wp-content/uploads/2019/04/unnamed-chunk-45-1-1.png" alt="gradient boosting machines, GBM" /></p>
<p>改使用&#8217;Cover&#8217;當作變數重要衡量法的結果與上面差很多。</p><pre class="crayon-plain-tag"># variable importance plot using 'cover'
xgb.plot.importance(importance_matrix, top_n = 10, measure = "Cover")</pre><p><img src="/wp-content/uploads/2019/04/unnamed-chunk-46-1-1.png" alt="gradient boosting machines, GBM" /></p>
<h5>Partial dependence plots</h5>
<p>PDPs和ICE的運作與之前gbm套件是相似的。唯一差別在於你必須在partial()函數中加入訓練資料(train = features_train)(因為在此case中，partial無法自動擷取object所使用的training data)。我們以Garage_Cars為範例。</p><pre class="crayon-plain-tag">pdp &lt;- xgb.fit.final %&gt;%
  partial(pred.var = "Garage_Cars", n.trees = 1576, grid.resolution = 100, train = features_train) %&gt;%
  autoplot(rug = TRUE, train = features_train) +
  scale_y_continuous(labels = scales::dollar) +
  ggtitle("PDP")

ice &lt;- xgb.fit.final %&gt;%
  partial(pred.var = "Garage_Cars", n.trees = 1576, grid.resolution = 100, train = features_train, ice = TRUE) %&gt;%
  autoplot(rug = TRUE, train = features_train, alpha = .1, center = TRUE) +
  scale_y_continuous(labels = scales::dollar) +
  ggtitle("ICE")</pre><p></p><pre class="crayon-plain-tag">gridExtra::grid.arrange(pdp, ice, nrow = 1)</pre><p><img src="/wp-content/uploads/2019/04/unnamed-chunk-47-1-1.png" alt="gradient boosting machines, GBM" /></p>
<h5>LIME</h5>
<p>LIME內建提供給xgboost物件的功能(可以使用?model.type)。然而需要注意的是，要分析的局部觀察值需要採用與train, test相同的編碼處理程序(one-hot encoded)。並且當將資料投入lime::lime函式時，必須將其從matrix轉換成dataframe。</p><pre class="crayon-plain-tag"># one-hot encode the local observations to be assessed.
local_obs_onehot &lt;- vtreat::prepare(treatplan, local_obs, varRestriction = new_vars)

# apply LIME
explainer &lt;- lime(data.frame(features_train), xgb.fit.final)
explanation &lt;- explain(local_obs_onehot, explainer, n_features = 5)
plot_features(explanation)</pre><p><img src="/wp-content/uploads/2019/04/unnamed-chunk-48-1-1.png" alt="gradient boosting machines, GBM" /></p>
<h4>Predicting</h4>
<p>最後，我們使用predict()函數來對新資料集進行預測。然而，不像gbm，我們並不需要提供樹模型的個數。<br />
由下的結果可知，我們測試資料集的RMSE與先前gbm模型的RMSE(22K)是較低的(只差了$600左右，差距很小)。</p><pre class="crayon-plain-tag"># predict values for test data
pred &lt;- predict(xgb.fit.final, features_test)

# results
caret::RMSE(pred, response_test)</pre><p></p><pre class="crayon-plain-tag">## [1] 21433.41</pre><p></p>
<h3>h2o</h3>
<p>R的h2O套件是一個強大高效能的java-based介面，允許基於local和cluster-based的佈署。該套件有相當完整的<a href="http://docs.h2o.ai/h2o/latest-stable/h2o-docs/index.html" target="_blank" rel="noopener noreferrer">線上資源</a>，包括方法、code文件與教學。</p>
<p>h2o的幾個特色包括：</p>
<ul>
<li>在單一節點或多節點群集上進行分散式或平行式運算。</li>
<li>根據用戶指定的指標和使用者指定的相對容忍度收斂時，自動提前停止。</li>
<li>隨機GBM同時對欄位跟資料列進行抽樣(每次分割與每棵樹)以利得到廣義的解。</li>
<li>除了二項式binomial(Bernoulli)、高斯和多項式分佈函式外，亦支援指數型系列(Poisson, Gamma, Tweedie)和損失函數。</li>
<li>Grid Search超參數優化和模型挑選。</li>
<li>數據分散(data-distributed) &#8211; 代表整個資料集不必侷限在單一節點的記憶體，能夠擴展到任意大小的訓練資料集。</li>
<li>使用直方圖(histogram)來近似連續變數來加速。</li>
<li>使用動態分箱法(dynamic binning)，分箱的標準會依照每一顆樹模型切割時的最大最小值來動態調整。</li>
<li>使用平方誤差(squared error)來決定最適的切割點。</li>
<li>factor levels沒有限制。</li>
</ul>
<h4>基本的h2o實作</h4>
<p></p><pre class="crayon-plain-tag">h2o.no_progress()
h2o.init(max_mem_size = "5g")</pre><p></p><pre class="crayon-plain-tag">##  Connection successful!
## 
## R is connected to the H2O cluster: 
##     H2O cluster uptime:         1 days 10 hours 
##     H2O cluster timezone:       Asia/Taipei 
##     H2O data parsing timezone:  UTC 
##     H2O cluster version:        3.22.1.1 
##     H2O cluster version age:    3 months and 12 days !!! 
##     H2O cluster name:           H2O_started_from_R_peihsuan_hxs725 
##     H2O cluster total nodes:    1 
##     H2O cluster total memory:   2.54 GB 
##     H2O cluster total cores:    4 
##     H2O cluster allowed cores:  4 
##     H2O cluster healthy:        TRUE 
##     H2O Connection ip:          localhost 
##     H2O Connection port:        54321 
##     H2O Connection proxy:       NA 
##     H2O Internal Security:      FALSE 
##     H2O API Extensions:         XGBoost, Algos, AutoML, Core V3, Core V4 
##     R Version:                  R version 3.5.2 (2018-12-20)</pre><p>gbm.h2o函數可允許我們透過H2O套件來執行GBM。然而，在我們開始執行初始模型時，我們需要將訓練資料轉換成h2o物件。h2o.gbm預設會採用以下參數來建立GBM模型：</p>
<ul>
<li>number of tree (ntrees): 50</li>
<li>learning rate (learning_rate): 0.1</li>
<li>tree depth(max_depth): 5</li>
<li>末梢節點的最小觀測值個數 (min_rows): 10</li>
<li>對資料列和資料欄位沒有抽樣</li>
</ul>
<p></p><pre class="crayon-plain-tag"># create feature names
y &lt;- "Sale_Price"
x &lt;- setdiff(names(ames_train), y)

# turn training set into h2o object
train.h2o &lt;- as.h2o(ames_train)

# training basic GBM model with defaults
h2o.fit1 &lt;- h2o.gbm(
  x = x,
  y = y,
  training_frame = train.h2o,
  nfolds = 5
)

# assess model results
h2o.fit1</pre><p></p><pre class="crayon-plain-tag">## Model Details:
## ==============
## 
## H2ORegressionModel: gbm
## Model ID:  GBM_model_R_1554713367949_3 
## Model Summary: 
##   number_of_trees number_of_internal_trees model_size_in_bytes min_depth max_depth mean_depth min_leaves max_leaves mean_leaves
## 1              50                       50               17160         5         5    5.00000         10         31    22.60000
## 
## 
## H2ORegressionMetrics: gbm
## ** Reported on training data. **
## 
## MSE:  165078993
## RMSE:  12848.31
## MAE:  9243.007
## RMSLE:  0.08504509
## Mean Residual Deviance :  165078993
## 
## 
## 
## H2ORegressionMetrics: gbm
## ** Reported on cross-validation data. **
## ** 5-fold cross-validation on training data (Metrics computed for combined holdout predictions) **
## 
## MSE:  707783149
## RMSE:  26604.19
## MAE:  15570.2
## RMSLE:  0.1404869
## Mean Residual Deviance :  707783149
## 
## 
## Cross-Validation Metrics Summary: 
##                               mean           sd  cv_1_valid   cv_2_valid   cv_3_valid  cv_4_valid  cv_5_valid
## mae                      15547.765     721.0162   16325.277    16366.696    13728.291    15117.01   16201.549
## mean_residual_deviance 7.0412026E8 1.68594576E8 6.8916365E8 1.12267443E9 3.96582368E8 5.8667603E8 7.2550477E8
## mse                    7.0412026E8 1.68594576E8 6.8916365E8 1.12267443E9 3.96582368E8 5.8667603E8 7.2550477E8
## r2                       0.8918067   0.02474849   0.8868936    0.8282497   0.92912257  0.91696167  0.89780617
## residual_deviance      7.0412026E8 1.68594576E8 6.8916365E8 1.12267443E9 3.96582368E8 5.8667603E8 7.2550477E8
## rmse                     26165.846    3119.9976   26251.926    33506.336    19914.377   24221.396   26935.195
## rmsle                   0.13949537  0.010692091  0.13955544   0.16392557   0.14536715  0.11926634  0.12936236</pre><p>跟XGBoost類似，我們可以使用自動停止功能，這樣就可以提高樹模型的個數，直到模型改善幅度減少或停止在終止訓練程序。亦可設定當執行時間超過一定水準後停止程序(參考max_runtime_secs)。</p>
<p>舉例來說，我們使用5000棵樹訓練一個預設參數的模型，但是設定當連續十棵樹模型在交叉驗證誤差上沒有進步就停止的指令。而在此例可以看到，模型在約使用3743棵樹模型後停止訓練過程，對應的交叉驗證誤差RMSE為$24,684。</p><pre class="crayon-plain-tag"># training basic GBM model with defaults
h2o.fit2 &lt;- h2o.gbm(
  x = x,
  y = y,
  training_frame = train.h2o,
  nfolds = 5,
  ntrees = 5000,
  stopping_rounds = 10,
  stopping_tolerance = 0,
  seed = 123
)

# model stopped after xx trees
h2o.fit2@parameters$ntrees</pre><p></p><pre class="crayon-plain-tag">## [1] 3712</pre><p></p><pre class="crayon-plain-tag"># cross validated RMSE
h2o.rmse(h2o.fit2, xval = TRUE)</pre><p></p><pre class="crayon-plain-tag">## [1] 24683.95</pre><p></p>
<h4>Tuning</h4>
<p>H2O套件提供需多可調整的參數。這部分值得你花時間閱讀相關的文件<a href="http://docs.h2o.ai/h2o/latest-stable/h2o-docs/data-science/gbm.html#gbm-tuning-guide" target="_blank" rel="noopener noreferrer">H2O.ai</a>。在本筆記中，只會先專注在幾個較長使用的超參數組合。包括：</p>
<ul>
<li>樹的複雜度
<ul>
<li>ntrees: 使用樹模型個數</li>
<li>max_depth: 每棵樹的深度</li>
<li>min_rows: 末梢節點中所允許的最少觀測值個數</li>
</ul>
</li>
<li>學習步伐
<ul>
<li>learn_rate: 損失函數梯度下降的步伐</li>
<li>learn_rate_annealing: 允許使用高的學習步伐當作初始值，但隨著樹個數的增加而降低。</li>
</ul>
</li>
<li>加入隨機的特性
<ul>
<li>sample_rate: 建置每棵數所抽樣的訓練資料列數。</li>
<li>col_sample_rate: 建置每棵樹所抽樣的欄位數(跟xgboost套件中的colsample_bytree是一樣的)。</li>
</ul>
</li>
</ul>
<p>值得注意的是，還有能夠控制類別變數和連續變數如何編碼、分箱、切割的參數。預設的參數可以得到相當不錯的結果，但在特定情境中仍能透過調整這些小地方來微提高模型的效果。</p>
<p>執行h2o模型的grid search tuning有兩種選擇：full 或 random discrete grid search。</p>
<h5>Full grid search</h5>
<p>在full cartesian grid search法中，會完整依序執行grid中指定的所有超參數組合。這就是我們先前在gbm和xgboost手動撰寫for迴圈執行的參數校正過程。然而為了加快H2O訓練的過程，可以使用驗證資料集(validation set)來取代k-fold cross validation。</p>
<p>以下我們製造一個參數的grid，包含468(=3*3*3*2*3*3)種超參數排列組合。我們使用h2o.grid()來執行full grid search並同時設定停止參數來節省訓練的時間。</p><pre class="crayon-plain-tag"># create training &amp; validation sets
split &lt;- h2o.splitFrame(train.h2o, ratios = 0.75)
train &lt;- split[[1]]
valid &lt;- split[[2]]

# create hyperparameter grid
hyper_grid &lt;- list(
  max_depth = c(1, 3, 5),
  min_rows = c(1, 5, 10),
  learn_rate = c(0.01, 0.05, 0.1),
  learn_rate_annealing = c(.99, 1),
  sample_rate = c(.5, .75, 1),
  col_sample_rate = c(.8, .9, 1)
)

# perform grid search 
system.time(
grid &lt;- h2o.grid(
  algorithm = "gbm",
  grid_id = "gbm_grid1",
  x = x, 
  y = y, 
  training_frame = train,
  validation_frame = valid,
  hyper_params = hyper_grid,
  ntrees = 5000,
  stopping_rounds = 10,
  stopping_tolerance = 0,
  seed = 123
  )
)</pre><p>full grid search所花的時間約為31分鐘。</p><pre class="crayon-plain-tag"># collect the results and sort by our model performance metric of choice
grid_perf &lt;- h2o.getGrid(
  grid_id = "gbm_grid1", 
  sort_by = "mse", 
  decreasing = FALSE
  )
grid_perf</pre><p></p><pre class="crayon-plain-tag">## H2O Grid Details
## ================
## 
## Grid ID: gbm_grid1 
## Used hyper parameters: 
##   -  col_sample_rate 
##   -  learn_rate 
##   -  learn_rate_annealing 
##   -  max_depth 
##   -  min_rows 
##   -  sample_rate 
## Number of models: 486 
## Number of failed models: 0 
## 
## Hyper-Parameter Search Summary: ordered by increasing mse
##   col_sample_rate learn_rate learn_rate_annealing max_depth min_rows sample_rate           model_ids                  mse
## 1             1.0       0.05                  1.0         5      1.0        0.75 gbm_grid1_model_213   4.64582634567234E8
## 2             0.8       0.01                  1.0         5      1.0         0.5  gbm_grid1_model_46  4.748883474543088E8
## 3             0.8       0.01                  1.0         5      1.0        0.75 gbm_grid1_model_208 4.7571620498865277E8
## 4             0.9       0.01                  1.0         5      1.0        0.75 gbm_grid1_model_209  4.775898758772956E8
## 5             1.0       0.01                  1.0         5      1.0         0.5  gbm_grid1_model_48 4.7783819706988806E8
## 
## ---
##     col_sample_rate learn_rate learn_rate_annealing max_depth min_rows sample_rate           model_ids                  mse
## 481             1.0       0.01                 0.99         1      5.0         1.0 gbm_grid1_model_381 2.9511012504833984E9
## 482             1.0       0.01                 0.99         1      1.0         1.0 gbm_grid1_model_327 2.9511012504833984E9
## 483             1.0       0.01                 0.99         1     10.0         1.0 gbm_grid1_model_435 2.9511012504833984E9
## 484             1.0       0.01                 0.99         1      1.0        0.75 gbm_grid1_model_165  2.951772702040925E9
## 485             1.0       0.01                 0.99         1      5.0        0.75 gbm_grid1_model_219  2.951772702040925E9
## 486             1.0       0.01                 0.99         1     10.0        0.75 gbm_grid1_model_273  2.951772702040925E9</pre><p>由以上資訊可知，模型切割數超過1次的深度、慢的學習步伐和隨機觀測值抽樣是表現的最不錯的組合類型。<br />
我們亦可查看更多有關最佳模型的詳細資訊。最佳模型可達到的驗證誤差RMSE為$21,554。</p><pre class="crayon-plain-tag"># Grab the model_id for the top model, chosen by validation error
best_model_id &lt;- grid_perf@model_ids[[1]]
best_model &lt;- h2o.getModel(best_model_id)

# Now let’s get performance metrics on the best model
h2o.performance(model = best_model, valid = TRUE)</pre><p></p><pre class="crayon-plain-tag">## H2ORegressionMetrics: gbm
## ** Reported on validation data. **
## 
## MSE:  464582635
## RMSE:  21554.18
## MAE:  14389.8
## RMSLE:  0.1268479
## Mean Residual Deviance :  464582635</pre><p></p>
<h5>Random discrete grid search</h5>
<p>當想要測試的超參數排列組合非常多時，每增加一個參數都對grid search所需完成的時間有巨大的影響。因此，h2o亦有提供Random discrete的grid search path法，採取隨機挑選超參數組合來執行，直到指定程度的改善幅度被達成或超過一定的執行時間或只執行過一定的模型數量時（或以上條件的組合）則停止。雖然說Random discrete path不一定會找到最適的模型，但在一定程度上可以找到相當不錯的模型。</p>
<p>以下便採用Random Discrete Path法來執行和剛剛一模一樣的hyperparameter grid。不過，在此我們會加入新的search條件：當連續有10個模型效果都無法超越目前最佳的模型獲得0.5%的MSE改善時，則停止。如果持續有在獲得改善，但超過360秒(60分鐘)時，也停止程序。</p><pre class="crayon-plain-tag"># random grid search criteria
search_criteria &lt;- list(
  strategy = "RandomDiscrete",
  stopping_metric = "mse",
  stopping_tolerance = 0.005,
  stopping_rounds = 10,
  max_runtime_secs = 60*60
  )

# perform grid search 
system.time(
grid &lt;- h2o.grid(
  algorithm = "gbm",
  grid_id = "gbm_grid2",
  x = x, 
  y = y, 
  training_frame = train,
  validation_frame = valid,
  hyper_params = hyper_grid,
  search_criteria = search_criteria, # add search criteria
  ntrees = 5000,
  stopping_rounds = 10,
  stopping_tolerance = 0,
  seed = 123
  )
)</pre><p></p><pre class="crayon-plain-tag">##     user   system  elapsed 
##   38.949   11.738 3602.198</pre><p>在此例子中，Random Grid Search花了約60分鐘(=3600/60)，評估了154/486個模型(32%)。</p><pre class="crayon-plain-tag"># collect the results and sort by our model performance metric of choice
grid_perf &lt;- h2o.getGrid(
  grid_id = "gbm_grid2", 
  sort_by = "mse", 
  decreasing = FALSE
  )
grid_perf</pre><p></p><pre class="crayon-plain-tag">## H2O Grid Details
## ================
## 
## Grid ID: gbm_grid2 
## Used hyper parameters: 
##   -  col_sample_rate 
##   -  learn_rate 
##   -  learn_rate_annealing 
##   -  max_depth 
##   -  min_rows 
##   -  sample_rate 
## Number of models: 154 
## Number of failed models: 0 
## 
## Hyper-Parameter Search Summary: ordered by increasing mse
##   col_sample_rate learn_rate learn_rate_annealing max_depth min_rows sample_rate           model_ids                  mse
## 1             0.9       0.01                  1.0         3      1.0        0.75  gbm_grid2_model_45  4.748951758832882E8
## 2             1.0       0.01                  1.0         3      1.0         0.5  gbm_grid2_model_80  4.803434026601322E8
## 3             1.0        0.1                  1.0         3      1.0        0.75  gbm_grid2_model_17  4.926287246284121E8
## 4             0.9       0.01                  1.0         3      1.0         0.5 gbm_grid2_model_115 5.0211786533732516E8
## 5             0.9       0.05                  1.0         5      1.0         0.5 gbm_grid2_model_107  5.069315439854374E8
## 
## ---
##     col_sample_rate learn_rate learn_rate_annealing max_depth min_rows sample_rate           model_ids                  mse
## 149             1.0       0.01                 0.99         1     10.0        0.75 gbm_grid2_model_146 3.4271307547685847E9
## 150             1.0       0.01                 0.99         1      5.0        0.75  gbm_grid2_model_24 3.4271307547685847E9
## 151             0.8       0.01                 0.99         1     10.0        0.75  gbm_grid2_model_41  3.427939673958527E9
## 152             0.8       0.01                 0.99         1     10.0         1.0  gbm_grid2_model_27 3.4288680514316573E9
## 153             1.0       0.01                 0.99         1      5.0         1.0 gbm_grid2_model_131 3.4293746592550063E9
## 154             1.0       0.01                  1.0         3      1.0        0.75 gbm_grid2_model_154  5.038339642534549E9</pre><p>透過Random Grid Search所得到的最佳模型的交叉驗證RMSE為$21,792。雖然沒有full grid search找到的好($21,554)，但通常兩者所找到模型的效果已是差不多的。</p><pre class="crayon-plain-tag"># Grab the model_id for the top model, chosen by validation error
best_model_id &lt;- grid_perf@model_ids[[1]]
best_model &lt;- h2o.getModel(best_model_id)

# Now let’s get performance metrics on the best model
h2o.performance(model = best_model, valid = TRUE)</pre><p></p><pre class="crayon-plain-tag">## H2ORegressionMetrics: gbm
## ** Reported on validation data. **
## 
## MSE:  474895176
## RMSE:  21792.09
## MAE:  13738.25
## RMSLE:  0.1245287
## Mean Residual Deviance :  474895176</pre><p>一旦我們找到了最佳模型後，就可以用所有的訓練資料再重新訓練一個模型。我們使用從full grid search所得到的最佳模型的參數組合並使用5-fold cross validation來估計穩健的誤差。</p><pre class="crayon-plain-tag"># train final model
h2o.final &lt;- h2o.gbm(
  x = x,
  y = y,
  training_frame = train.h2o,
  nfolds = 5,
  ntrees = 10000,
  learn_rate = 0.01,
  learn_rate_annealing = 1,
  max_depth = 3,
  min_rows = 10,
  sample_rate = 0.75,
  col_sample_rate = 1,
  stopping_rounds = 10,
  stopping_tolerance = 0,
  seed = 123
)</pre><p></p><pre class="crayon-plain-tag"># model stopped after xx trees
h2o.final@parameters$ntrees</pre><p></p><pre class="crayon-plain-tag">## [1] 8660</pre><p></p><pre class="crayon-plain-tag"># cross validated RMSE
h2o.rmse(h2o.final, xval = TRUE)</pre><p></p><pre class="crayon-plain-tag">## [1] 23214.71</pre><p></p>
<h4>Visualization</h4>
<h5>Variable importance</h5>
<p>h2o套件有提供內建的變數重要性繪圖功能。該函式只有一個衡量變數重要性的方法-relative importance，一種衡量每一個變數在每一個模型中，平均能對loss function造成多少影響。能對損失函數帶來最大平均影響者的變數被當作最重要的變數，且其他變數的重要性也是相對於最重要變數所計算而得的數值。另外，vip套件亦可繪製h2o物件的變數重要性圖。</p><pre class="crayon-plain-tag">h2o.varimp_plot(h2o.final, num_of_features = 10)</pre><p><img src="/wp-content/uploads/2019/04/unnamed-chunk-63-1.png" alt="gradient boosting machines, GBM" /></p>
<h5>Partial dependence plots</h5>
<p>我們亦可像之前一樣使用vip套件繪製PDP和ICE圖型來了解不同解釋變數邊際變動下對目標變數造成的影響。我們只需要透過一段專用函數，將投入的資料(newdata)轉換成h2o物件(as.h2o)，並將預測的結果在轉換為data frame型態，在當成pred.fun的參數投入。</p><pre class="crayon-plain-tag">pfun &lt;- function(object, newdata) {
  as.data.frame(predict(object, newdata = as.h2o(newdata)))[[1L]]
}

pdp &lt;- h2o.final %&gt;%
  partial(
    pred.var = "Gr_Liv_Area", 
    pred.fun = pfun, # 研究一下
    grid.resolution = 20, 
    train = ames_train
    ) %&gt;%
  autoplot(rug = TRUE, train = ames_train, alpha = .1) +
  scale_y_continuous(labels = scales::dollar) +
  ggtitle("PDP")</pre><p></p><pre class="crayon-plain-tag">ice &lt;- h2o.final %&gt;%
  partial(
    pred.var = "Gr_Liv_Area", 
    pred.fun = pfun,
    grid.resolution = 20, 
    train = ames_train,
    ice = TRUE
    ) %&gt;%
  autoplot(rug = TRUE, train = ames_train, alpha = .1, center = TRUE) +
  scale_y_continuous(labels = scales::dollar) +
  ggtitle("ICE")</pre><p></p><pre class="crayon-plain-tag">gridExtra::grid.arrange(pdp, ice, nrow = 1)</pre><p><img src="/wp-content/uploads/2019/04/unnamed-chunk-64-1.png" alt="gradient boosting machines, GBM" /></p>
<p>h2o並沒有提供內建的ICE曲線繪圖功能，但是他可以繪製平均邊際效益(標準的PDP圖)外加衡量不確定性的一個標準誤差的PDP圖。</p><pre class="crayon-plain-tag">h2o.partialPlot(h2o.final, data = train.h2o, cols = "Overall_Qual")</pre><p><img src="/wp-content/uploads/2019/04/unnamed-chunk-65-1.png" alt="gradient boosting machines, GBM" /></p><pre class="crayon-plain-tag">## PartialDependence: Partial Dependence Plot of model GBM_model_R_1554713367949_5 on column 'Overall_Qual'
##      Overall_Qual mean_response stddev_response std_error_mean_response
## 1   Above_Average 173439.744454    59206.888258             1307.342580
## 2         Average 169032.396430    58675.968674             1295.619387
## 3   Below_Average 165991.718878    61198.281190             1351.314368
## 4       Excellent 227862.381764    66306.055141             1464.098718
## 5            Fair 161119.245285    62126.019654             1371.799687
## 6            Good 185468.115459    62195.668588             1373.337600
## 7            Poor 156505.758628    63260.388765             1396.847601
## 8  Very_Excellent 228227.228142    66731.640843             1473.496042
## 9       Very_Good 206801.916781    64639.301392             1427.295261
## 10      Very_Poor 151217.679576    64366.405585             1421.269471</pre><p>但不幸的事，h2o的函數會把類別變數的levels以字母排序的方式繪出，而pdp()函式則是以他們所指定的level順序繪出，使推理更加直觀。</p><pre class="crayon-plain-tag">pdp &lt;- h2o.final %&gt;%
  partial(
    pred.var = "Overall_Qual", 
    pred.fun = pfun,
    grid.resolution = 20, 
    train = as.data.frame(ames_train)
    ) %&gt;%
  autoplot(rug = TRUE, train = ames_train, alpha = .1) +
  scale_y_continuous(labels = scales::dollar) +
  ggtitle("PDP")

ice &lt;- h2o.final %&gt;%
  partial(
    pred.var = "Overall_Qual", 
    pred.fun = pfun,
    grid.resolution = 20, 
    train = as.data.frame(ames_train),
    ice = TRUE
    ) %&gt;%
  autoplot(rug = TRUE, train = ames_train, alpha = .1, center = TRUE) +
  scale_y_continuous(labels = scales::dollar) +
  ggtitle("ICE")

gridExtra::grid.arrange(pdp, ice, nrow = 1)</pre><p><img src="/wp-content/uploads/2019/04/unnamed-chunk-66-1.png" alt="gradient boosting machines, GBM" /></p>
<h5>LIME</h5>
<p>LIME套件亦有提供內建的函數來處理h2o物件。</p><pre class="crayon-plain-tag"># apply LIME
explainer &lt;- lime(ames_train, h2o.final)
explanation &lt;- explain(local_obs, explainer, n_features = 5)
plot_features(explanation)</pre><p><img src="/wp-content/uploads/2019/04/unnamed-chunk-67-1.png" alt="gradient boosting machines, GBM" /></p>
<h4>Predicting</h4>
<p>最後，我們可以使用h2o.predict()或predict()兩種方式來進行模型對新資料的預測，並使用h2o.performance()來衡量模型模型套用在測試資料集的成效。驗證結果的RMSE為$20,198，跟gbm和xgboost是類似的($21~22K)。</p><pre class="crayon-plain-tag"># convert test set to h2o object
test.h2o &lt;- as.h2o(ames_test)

# evaluate performance on new data
h2o.performance(model = h2o.final, newdata = test.h2o)</pre><p></p><pre class="crayon-plain-tag">## H2ORegressionMetrics: gbm
## 
## MSE:  407897003
## RMSE:  20196.46
## MAE:  12679.15
## RMSLE:  0.1008391
## Mean Residual Deviance :  407897003</pre><p></p><pre class="crayon-plain-tag"># predict with h2o.predict
h2o.predict(h2o.final, newdata = test.h2o)</pre><p></p><pre class="crayon-plain-tag">##    predict
## 1 129814.6
## 2 161987.0
## 3 262990.7
## 4 484455.6
## 5 218094.0
## 6 209430.8
## 
## [879 rows x 1 column]</pre><p></p><pre class="crayon-plain-tag"># predict values with predict
predict(h2o.final, test.h2o)</pre><p></p><pre class="crayon-plain-tag">##    predict
## 1 129814.6
## 2 161987.0
## 3 262990.7
## 4 484455.6
## 5 218094.0
## 6 209430.8
## 
## [879 rows x 1 column]</pre><p></p>
<h3>小結</h3>
<ul>
<li>Gradient Boosting Machines (GBM)是一個強大的集成學習演算法，通常具有一流的預測能力。雖然相較於其他演算法它比較不直覺且需要大型運算，但絕對是機器學習工具箱的必備款！</li>
</ul>
<hr />
<p>參考連結：</p>
<ol>
<li><a href="http://uc-r.github.io/gbm_regression" target="_blank" rel="noopener noreferrer">Gradient Boosting Machines (GBM)</a></li>
<li><a href="https://medium.com/jameslearningnote/%E8%B3%87%E6%96%99%E5%88%86%E6%9E%90-%E6%A9%9F%E5%99%A8%E5%AD%B8%E7%BF%92-%E7%AC%AC2-4%E8%AC%9B-%E8%B3%87%E6%96%99%E5%89%8D%E8%99%95%E7%90%86-missing-data-one-hot-encoding-feature-scaling-3b70a7839b4a" target="_blank" rel="noopener noreferrer">類別資料的處理(有序、無序):one-hot encoding</a></li>
<li><a href="https://towardsdatascience.com/choosing-the-right-encoding-method-label-vs-onehot-encoder-a4434493149b" target="_blank" rel="noopener noreferrer">Choosing the right Encoding method-Label vs OneHot Encoder</a></li>
</ol>
<hr />
<p>更多Decision Tree相關的統計學習筆記：</p>
<p><a href="/random-forests-%e9%9a%a8%e6%a9%9f%e6%a3%ae%e6%9e%97/" target="_blank" rel="noopener noreferrer">Random Forests 隨機森林 | randomForest, ranger, h2o | R語言</a></p>
<p><a href="/decision-tree-cart-%e6%b1%ba%e7%ad%96%e6%a8%b9/" target="_blank" rel="noopener noreferrer">Decision Tree 決策樹 | CART, Conditional Inference Tree, RandomForest</a></p>
<p><a href="/regression-tree-%e8%bf%b4%e6%ad%b8%e6%a8%b9-bagging-bootstrap-aggrgation-r%e8%aa%9e%e8%a8%80/" target="_blank" rel="noopener noreferrer">Regression Tree | 迴歸樹, Bagging, Bootstrap Aggregation | R語言</a></p>
<p><a href="/decision-tree-surrogate-in-cart/" target="_blank" rel="noopener noreferrer">Tree Surrogate | Tree Surrogate Variables in CART | R 統計</a></p>
<p>更多Regression相關統計學習筆記：</p>
<p><a href="/linear-regression-%e7%b7%9a%e6%80%a7%e8%bf%b4%e6%ad%b8%e6%a8%a1%e5%9e%8b/" target="_blank" rel="noopener noreferrer">Linear Regression | 線性迴歸模型 | using AirQuality Dataset</a></p>
<p><a href="/logistic-regression-part1-%e7%be%85%e5%90%89%e6%96%af%e8%bf%b4%e6%ad%b8/" target="_blank" rel="noopener noreferrer">Logistic Regression 羅吉斯迴歸 | part1 – 資料探勘與處理 | 統計 R語言</a></p>
<p><a href="/logistic-regression-part2-%e7%be%85%e5%90%89%e6%96%af%e8%bf%b4%e6%ad%b8/" target="_blank" rel="noopener noreferrer">Logistic Regression 羅吉斯迴歸 | part2 – 模型建置、診斷與比較 | R語言</a></p>
<p><a href="/regularized-regression-ridge-lasso-elastic/" target="_blank" rel="noopener noreferrer">Regularized Regression | 正規化迴歸 – Ridge, Lasso, Elastic Net | R語言</a></p>
<p>更多Clustering集群分析統計學習筆記：</p>
<p><a href="/partitional-clustering-kmeans-kmedoid/" target="_blank" rel="noopener noreferrer">Partitional Clustering 切割式分群 | Kmeans, Kmedoid | Clustering 資料分群</a></p>
<p><a href="/hierarchical-clustering-%e9%9a%8e%e5%b1%a4%e5%bc%8f%e5%88%86%e7%be%a4/" target="_blank" rel="noopener noreferrer">Hierarchical Clustering 階層式分群 | Clustering 資料分群 | R 統計</a></p>
<p>其他統計學習筆記：</p>
<p><a href="/principal-components-analysis-pca-%e4%b8%bb%e6%88%90%e4%bb%bd%e5%88%86%e6%9e%90/" target="_blank" rel="noopener noreferrer">Principal Components Analysis (PCA) | 主成份分析 | R 統計</a></p>
<p>這篇文章 <a rel="nofollow" href="/gradient-boosting-machines-gbm/">Gradient Boosting Machines GBM | gbm, xgboost, h2o | R語言</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></content:encoded>
					
					<wfw:commentRss>/gradient-boosting-machines-gbm/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
			</item>
		<item>
		<title>Random Forests 隨機森林 &#124; randomForest, ranger, h2o &#124; R語言</title>
		<link>/random-forests-%e9%9a%a8%e6%a9%9f%e6%a3%ae%e6%9e%97/</link>
					<comments>/random-forests-%e9%9a%a8%e6%a9%9f%e6%a3%ae%e6%9e%97/#comments</comments>
		
		<dc:creator><![CDATA[jamleecute]]></dc:creator>
		<pubDate>Tue, 19 Mar 2019 14:33:31 +0000</pubDate>
				<category><![CDATA[ 程式與統計]]></category>
		<category><![CDATA[統計模型]]></category>
		<category><![CDATA[decision tree]]></category>
		<category><![CDATA[h2o]]></category>
		<category><![CDATA[random forests]]></category>
		<category><![CDATA[randomForest]]></category>
		<category><![CDATA[ranger]]></category>
		<category><![CDATA[Regression Tree]]></category>
		<category><![CDATA[隨機森林]]></category>
		<guid isPermaLink="false">/?p=2802</guid>

					<description><![CDATA[<p>Bagging法綜合多個樹模型結果，可以降低單一樹模型的高變異性並提升預測正確率。但Bagging法中樹與樹之間的相關性會降低模型整體的表現。隨機森林 Rand [&#8230;]</p>
<p>這篇文章 <a rel="nofollow" href="/random-forests-%e9%9a%a8%e6%a9%9f%e6%a3%ae%e6%9e%97/">Random Forests 隨機森林 | randomForest, ranger, h2o | R語言</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></description>
										<content:encoded><![CDATA[<p><a href="/regression-tree-%e8%bf%b4%e6%ad%b8%e6%a8%b9-bagging-bootstrap-aggrgation-r%e8%aa%9e%e8%a8%80/" target="_blank" rel="noopener noreferrer">Bagging法</a>綜合多個樹模型結果，可以降低單一樹模型的高變異性並提升預測正確率。但Bagging法中樹與樹之間的相關性會降低模型整體的表現。隨機森林 Random forests 是Bagging修改後的版本，它是由「去相關性」的樹模型所組成的集成演算法，有很不錯的預測正確率且是一個受歡迎、開箱即用的演算法。</p>
<h3>載入所需套件</h3>
<p></p><pre class="crayon-plain-tag">library(rsample)      # data splitting 
library(randomForest) # basic implementation
library(ranger)       # a faster implementation of randomForest
library(caret)        # an aggregator package for performing many machine learning models
library(h2o)          # an extremely fast java-based platform
library(dplyr)
library(magrittr)</pre><p>準備資料。</p>
<ul>
<li>使用AmesHousing套件中的Ames Housing Data。</li>
<li>使用resample package中的initial_split()將資料切分成7:3(將參數設定為prop = 0.7)。</li>
<li>再分別用training()和testing()函數將切分好的資料萃取出。</li>
<li>並使用set.seed()來確保資料切分結果是可再現的。</li>
</ul>
<p></p><pre class="crayon-plain-tag"># Create training (70%) and test (30%) sets for the AmesHousing::make_ames() data.
# Use set.seed for reproducibility
set.seed(123)
ames_split &lt;- initial_split(data = AmesHousing::make_ames(), prop = .7)
ames_train &lt;- training(ames_split)
ames_test  &lt;- testing(ames_split)</pre><p></p>
<h3>Random Forests 概念介紹</h3>
<p>隨機森林模型的基礎概念和Decision Trees和Bagging一樣的(可以參考<a href="/decision-tree-cart-%e6%b1%ba%e7%ad%96%e6%a8%b9/" target="_blank" rel="noopener noreferrer">決策樹,Decision Trees</a>和<a href="/regression-tree-%E8%BF%B4%E6%AD%B8%E6%A8%B9-bagging-bootstrap-aggrgation-r%E8%AA%9E%E8%A8%80/" target="_blank" rel="noopener noreferrer">Bagging</a>)。Bagging Trees模型在演算法中納入了隨機的元素，有效的降低了單一樹模型的高變異性與提升模型預測正確率。然而在bagging中的trees並非所有都是彼此相互獨立的，因為在每一棵樹切分節點時都是考慮所有原始的預測變數。也因爲上述關係，來自不同bootstrapped samples的樹彼此的結構都會有些類似（尤其是在樹的上半部，用來切割的前幾大變數都會非常類似）。</p>
<p>樹的結構相遇的這個特性就稱作tree correlation，它阻礙了Bagging最適地降低預測目標值的變異(variance)。為了更近一步降低變異，我們需要最小化樹與樹之間的相關性。這可以透過注入更多的隨機性到長樹的過程。 Random Forests是透過以下兩步驟來達成的：</p>
<ol>
<li>Bootstrap (拔靴法) : 跟Bagging很類似，每一顆樹都是建立自不同的bootstrapped sample，讓他們稍稍不一樣並稍稍去相關性。</li>
<li>Split-variable randomization (變數切割的隨機性) : 每一次在執行變數切割時，搜尋切割變數的範圍被限縮為隨機的子集合，即隨機挑選m個隸屬於總p個變數的子集合作為切割搜尋變數的範圍。對回歸樹來說，預設使用\(m=\frac{p}{3}\)，是個可經調教的參數。當\(m = p\)的時候，則跟只進行步驟1的結果一樣。</li>
</ol>
<p>因為每棵樹都是來自不同的隨機bootstrapped sample且每一次切割都是隨機挑選變數的子集合，因此樹與樹之間的關聯性會下降地較Bagging更低。</p>
<h4>OOB error vs. test set error</h4>
<p>和Bagging一樣，bootstrap resample法的一個天然好處，就是隨機森林模型可以透過out-of-bag(OOB)的樣本誤差來作為有效與合理近似實驗誤差(test error)。不需要額外產生或犧牲訓練資料集，OOB sample可供作為一個內建的驗證子集合。OOB sample 的存在讓尋找使模型錯誤率趨於穩定的最適樹模型數量(ntree)更有效率。但是OOB error和test error終究還是預期會不太相同。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2804" src="/wp-content/uploads/2019/03/Rplot.png" alt="random forests-隨機森林" width="800" height="500" srcset="/wp-content/uploads/2019/03/Rplot.png 800w, /wp-content/uploads/2019/03/Rplot-300x188.png 300w, /wp-content/uploads/2019/03/Rplot-768x480.png 768w, /wp-content/uploads/2019/03/Rplot-230x144.png 230w, /wp-content/uploads/2019/03/Rplot-350x219.png 350w, /wp-content/uploads/2019/03/Rplot-480x300.png 480w" sizes="(max-width: 800px) 100vw, 800px" /></p>
<p>[上圖：Random forest out-of-bag error versus validation error.]</p>
<p>&nbsp;</p>
<p>此外，有很多package都沒有可以追蹤在某一棵樹模型中，哪些是OOB sample哪些不是的功能。這樣在比須比較多個模型的成效時，想要使用相同的驗證資料集來幫每個模型打分數是不可行的。而且，技術上雖然可以對OOB sample計算特定指標(metrics)如root mean squared logarithmic error (RMSLE)，但並非所有package都有內建這樣的運算功能。所以如果你想要比較多個模型的成效或是使用較不傳統的損失函數指標，你可能還是會選擇cross validation。</p>
<h4>Advantages &amp; Disadvantages of Random Forests</h4>
<h5>優點</h5>
<ol>
<li>隨機森林模型通常具有非常好的成效。</li>
<li>非常好的「開箱即用」的模型-不太需要調整什麼參數。</li>
<li>有內建的驗證資料集validation set &#8211; 不須為了額外驗證而犧牲資料。</li>
<li>不需前處理(pre-processing)。</li>
<li>對於離群值的處理是強大的。</li>
</ol>
<h5>缺點</h5>
<ol>
<li>當運算大型資料時會變的非常慢。</li>
<li>雖然模型預測正確率高，但通常無法跟更先進的boosting演算法相比。</li>
<li>較不易解釋。</li>
</ol>
<h3>基本實作</h3>
<p>在R中有超過20種的Random Forests Packages。以下會使用歷史最悠久且最受歡迎randomForest套件來說明示範基本的Random Forests模型實作。但必須注意，當你的資料集變得很大的時候，randomForest回無法很好的擴展到大型資料（即使使用foreach進行平行運算）。此外，為了探索和比較不同模型參數的效果，我們也可找到更多有效的套件。因此，在模型tuning階段，我們會說明如何使用ranger和h2o package來進行更有效率的Random Forests modeling。</p>
<p>randomForest::randomForest可以使用formula或x,y matrix表示的方式來指定模型資料。我們以下以formula的方式來指定模型設定並使用randomForest模型預設參數。</p><pre class="crayon-plain-tag"># for reproduciblity
set.seed(123)

# default RF model
m1 &lt;- randomForest(
  formula = Sale_Price ~ .,
  data    = ames_train
)

m1</pre><p></p><pre class="crayon-plain-tag">## 
## Call:
##  randomForest(formula = Sale_Price ~ ., data = ames_train) 
##                Type of random forest: regression
##                      Number of trees: 500
## No. of variables tried at each split: 26
## 
##           Mean of squared residuals: 661089658
##                     % Var explained: 89.8</pre><p>從m1結果來看：</p>
<ul>
<li>randomForest預設會使用500棵樹。</li>
<li>每一次切割(each split)會隨機篩選出\(\frac{Features}{3}=26\)個預測變數作為base。(原始data扣除目標變數Sale_Price的number of features = 80)</li>
<li>m1$mse(regression only)代表的是由OOB sample所計算出的「平均誤差平方(mean squared erre)」向量，即殘差平方和(sum of squared residuals)除上樹的個數(n)。</li>
<li>綜合500棵樹的mse(OOB error)為m1$mse[500] = 6.6108966 × 10<sup>8</sup>。</li>
</ul>
<p>我們可以進一步將不同棵樹所組成的隨機森林模型(ntree)對應的平均誤差(MSE)給繪出：</p><pre class="crayon-plain-tag">plot(m1)</pre><p><img src="/wp-content/uploads/2019/03/unnamed-chunk-4-1-3.png" alt="random forests-隨機森林" /></p>
<p>從上圖可以發現，模型平均誤差大概在100棵樹時開始趨於穩定，且平均誤差值降低的速度開始於300棵樹左右時開始變緩。</p>
<p>我們可以進一步找出使得MSE最小的樹的個數。</p><pre class="crayon-plain-tag">which.min(m1$mse)</pre><p></p><pre class="crayon-plain-tag">## [1] 447</pre><p>最適隨機森林的RMSE則為(平均Sale_Price的誤差值)：</p><pre class="crayon-plain-tag">sqrt(m1$mse[which.min(m1$mse)])</pre><p></p><pre class="crayon-plain-tag">## [1] 25648.78</pre><p>如果我們不想要OOB error，randomForest函數亦提供驗證資料集(validation set)來幫助我們計算模型預測正確率。</p>
<p>要計算驗證誤差，首先我們進一步將訓練資料集依據8:2的比例切成訓練和驗證資料集，並分別使用analysis()和assessment()函數萃取出訓練和驗證資料。</p><pre class="crayon-plain-tag"># create training and validation data 
set.seed(123)
valid_split &lt;- initial_split(ames_train, .8)

# training data
ames_train_v2 &lt;- analysis(valid_split)

# validation datas
ames_valid &lt;- assessment(valid_split)

# 將驗證資料整理成x_test和y_test
x_test &lt;- ames_valid[setdiff(names(ames_valid),"Sale_Price")]
y_test &lt;- ames_valid$Sale_Price

# 在randomForest函數中使用x-test和y-test當作驗證資料集的參數
rf_oob_comp &lt;- randomForest(
  formula = Sale_Price ~ .,
  data = ames_train_v2,
  xtest = x_test,
  ytest = y_test
)

rf_oob_comp</pre><p></p><pre class="crayon-plain-tag">## 
## Call:
##  randomForest(formula = Sale_Price ~ ., data = ames_train_v2,      xtest = x_test, ytest = y_test) 
##                Type of random forest: regression
##                      Number of trees: 500
## No. of variables tried at each split: 26
## 
##           Mean of squared residuals: 667486651
##                     % Var explained: 89.17
##                        Test set MSE: 841004412
##                     % Var explained: 89.16</pre><p>可以看到模型結果多了Test set MSE，和原始的OOB MES不太一樣。我們將不同顆樹組成的模型所對應的OOB error和test error萃取出來並畫出誤差隨著樹的數量的變化圖，並比較兩者的差距。</p><pre class="crayon-plain-tag"># extract OOB &amp; validation errors
oob &lt;- sqrt(rf_oob_comp$mse)
validation &lt;- sqrt(rf_oob_comp$test$mse)

data.frame(
  ntrees = 1:rf_oob_comp$ntree,
  OOB.error = oob,
  Test.error = validation
) %&gt;% 
  gather(key = metric, value = RMSE, 2:3) %&gt;% 
  ggplot(aes(x = ntrees, y = RMSE, color = metric)) +
  geom_line() +
  scale_y_continuous(labels = scales::dollar) +
  xlab("Number of trees")</pre><p><img src="/wp-content/uploads/2019/03/unnamed-chunk-8-1-3.png" alt="random forests-隨機森林" /></p>
<p>Random Forests是其中一個很好的「開箱即用」的演算法之一。基本上不需要調整什麼參數(tuning)，模型的預測能力就可ㄧ有很好的成效。</p>
<p>舉例來說，從上圖中，我們不需要調整參數就可以得到小於$30K的RMSE，比完整tuning後的<a href="/regression-tree-%E8%BF%B4%E6%AD%B8%E6%A8%B9-bagging-bootstrap-aggrgation-r%E8%AA%9E%E8%A8%80/" target="_blank" rel="noopener noreferrer">Bagging模</a>RMSE降低超過$6K；比完整tuning的<a href="/regularized-regression-ridge-lasso-elastic/" target="_blank" rel="noopener noreferrer">elastic net模型</a>RMSE降低超過$2K(沒有將目標變數取log的elastic net model版本請參考以下)。而我們還可以進一步透過參數調整tuning將Random Forests模型的預測正確性優化。</p><pre class="crayon-plain-tag"># elastic net
library(caret)
ames_train_x &lt;- model.matrix(object = Sale_Price ~ ., data =  ames_train)[, -1]
ames_train_y &lt;- ames_train$Sale_Price

# ames_test_x &lt;- model.matrix(Sale_Price ~ ., ames_test)[, -1]
# ames_test_y &lt;- ames_test$Sale_Price

train_control &lt;- trainControl(method = "cv", number = 10)

caret_mod &lt;- train(
  x = ames_train_x, 
  y = ames_train_y,
  method = "glmnet", 
  prePro = c("center","scale","zv","nzv"),
  trControl = train_control,
  tuneLength = 10
)

min(caret_mod$results$RMSE)</pre><p></p><pre class="crayon-plain-tag">## [1] 32268.14</pre><p></p>
<h4>tuning</h4>
<p>Random Forests在tuning上非常簡單，因為只有幾個tuning parameters。通常tuning模型一開始最主要的考量點就是每一次分割所用來挑選的潛在變數名單，另外就是幾個需要注意的hyperparameters，包括如下：(這些hyperparameters在不同package的命名可能有所不同)</p>
<ul>
<li>ntree : number of trees。我們希望有足夠的樹來穩定模型的誤差，但過多的樹會是沒效率且沒必要的，特別是遇到大型資料集的時候。</li>
<li>mtry : 每次在決定切割變數時，所隨機抽樣的潛在變數清單數量。當mtry = p(即所有特徵變數數量)，Random Forests的結果就會和bagging一樣。而當mtry = 1，會造就每一次split所使用的變數completely random，每個變數都有機會但會造成非常偏差的結果。</li>
<li>sampsize : 訓練每棵樹模型的樣本數大小。預設是使用63.25%訓練資料集的比例，因為這個是獨立觀察值出現在bootstrapped sample的期望機率值。較低的樣本數大小雖然會降低訓練時間，但可能會產生不必要的偏差。增加樣本數大小可以提升模型正確率，但有可能會產生overfitting(因為會增加模型變異性)。所以一般來說，我們校正此樣本大小參數時會使用60-80%的比例。</li>
<li>nodesize : 末梢(葉)節點最小觀察資料個數。用來控制樹模型的複雜度。小的葉節點大小允許更深更複雜的樹模型，大的葉節點大小則會產生叫淺的樹模型。這又是一種「偏差v.s.變異度(bias -variance)」的權衡，當樹長得越深時，模型變異性愈高(有過度配適的風險)，而當樹長得越潛時則會有較多偏差(有沒辦法完整捕捉資料中的模式跟關係)。</li>
<li>maxnode : 內部節點最大個數值。另一種控制模型複雜度的變數，內部節點樹越多則會長出更深的樹，內部節點越少則產生越淺的樹。</li>
</ul>
<h4>Initial tuning with randomForest</h4>
<p>如果一開始只針對mtry進行校正，可以使用randomForest::tuneRF來進行簡易快速的評估。tunRF會從指定的mtry值開始，並每次增加給定的間距，直到模型OOB error降低的幅度開始小於特定幅度為止。</p>
<p>比如說，以下想知道mtry從5開始，每間隔相加1.5，所得到到的OOB error，直到OOB error改善的不度不超過1%為止。</p>
<p>因為tuneRF需要使用x,y形式指定資料，因此首先我們先使用setdiff()函數將變數名稱依據目標變數與預測變數分開。</p>
<p>模型跑完後會自動將每個mtry值所對應的OOB error值繪出。我們可以發現，當mtry &gt; 22後，OOB開始不再下降，最適mtry水準值約與features/3 = 80/3 = 26差不多。</p><pre class="crayon-plain-tag"># 篩選出預測變數名稱
features &lt;- setdiff(x = names(ames_train), y = "Sale_Price")

# 固定不同mtry參數值的模型所使用的隨機OOB sample一樣的
set.seed(123)

m2 &lt;- tuneRF(x = ames_train[features], y = ames_train$Sale_Price, mtryStart = 5, ntreeTry = 500 ,stepFactor = 1.5, improve = 0.01, trace = FALSE)</pre><p><img src="/wp-content/uploads/2019/03/unnamed-chunk-10-1-4.png" alt="random forests-隨機森林" /></p><pre class="crayon-plain-tag">plot(m2)</pre><p><img src="/wp-content/uploads/2019/03/unnamed-chunk-10-2-4.png" alt="random forests-隨機森林" /></p>
<h4>Full grid search with ranger</h4>
<p>如果想要套用綜合mtry以及其他參數的hyperparameter組合，我們需要建立一個grid並使用loop迴圈的方式，去測試每一個hyperparameter的組合和模型的成效。但因為randomForest()函數無法有效的將運算擴展至大型數據運算，因此我們會使用以c++執行的ranger()函數來解決。</p>
<p>我們可先使用Sys.time()稍稍比較tuneRF和ranger執行一種隨機森林模型所需的時間。</p><pre class="crayon-plain-tag">system.time(
  ames_randomForest &lt;- randomForest(
    formula = Sale_Price ~ ., 
    data = ames_train, 
    ntree = 500, 
    mtry = floor(length(features)/3)
  )
)</pre><p></p><pre class="crayon-plain-tag">##    user  system elapsed 
## 111.957   0.735 169.989</pre><p></p><pre class="crayon-plain-tag">system.time(
  ames_ranger &lt;- ranger(
    formula   = Sale_Price ~ ., 
    data      = ames_train, 
    num.trees = 500,
    mtry      = floor(length(features) / 3)
  )
)</pre><p></p><pre class="crayon-plain-tag">##    user  system elapsed 
##  10.367   0.174   5.665</pre><p>由以上結果我們可以看到，同樣是執行一次隨機森林，ranger()所需的時間僅約6秒，而randomForests則需要169秒。</p>
<p>為了進行grid search，我們首先先建立一個hyperparameters的grid，由許多不同的mtry, minimum node size,和 sample size所組成。總共會有96種組合。</p><pre class="crayon-plain-tag"># hyperparameter grid search
hyper_grid &lt;- expand.grid(
  mtry = seq(20, 30, by = 2),
  node_size = seq(3, 9, by = 2),
  sample_size = c(0.55, 0.632, 0.7, 0.8),
  OOB_RMSE = 0
)

# total number of combinations
nrow(hyper_grid)</pre><p></p><pre class="crayon-plain-tag">## [1] 96</pre><p>我們使用loop迴圈，一一帶入不同hyperparameters到ranger()函數中，並固定每一次randomForests的的森林樹木數量為500(因為從前面經驗我們知道500棵樹即足夠使OOB error趨於穩定並收斂)。另外每一次randomForests執行時，我們也固定隨機亂數種子，讓同樣sample_size參數值所對應的抽樣樣本可以相同，凸顯其他參數變化所帶來的效果。</p><pre class="crayon-plain-tag">for (i in 1:nrow(hyper_grid)) {
  # train model
  model &lt;- ranger(
    formula = Sale_Price ~ .,
    data = ames_train, 
    num.trees = 500, 
    mtry = hyper_grid$mtry[i],
    min.node.size = hyper_grid$node_size[i], 
    sample.fraction = hyper_grid$sample_size[i],
    seed = 123
  )

  # 並將每一此訓練模型的OOB RMSE萃取儲存
  hyper_grid$OOB_RMSE[i] &lt;- sqrt(model$prediction.error)
}

# 我們將結果依序OOB_RMSE由小至大排列，取模型成效前十名印出
hyper_grid %&gt;% 
  dplyr::arrange(OOB_RMSE) %&gt;% 
  head(10)</pre><p></p><pre class="crayon-plain-tag">##    mtry node_size sample_size OOB_RMSE
## 1    20         5         0.8 25918.20
## 2    20         3         0.8 25963.96
## 3    28         3         0.8 25997.78
## 4    22         5         0.8 26041.05
## 5    22         3         0.8 26050.63
## 6    20         7         0.8 26061.72
## 7    26         3         0.8 26069.40
## 8    28         5         0.8 26069.83
## 9    26         7         0.8 26075.71
## 10   20         9         0.8 26091.08</pre><p>從前十名模型成效結果我們可以發現：</p>
<ul>
<li>OOB_RMSE大致落在26K左右。</li>
<li>最適mtry的值落在所有20~30範圍區間。表示mtry在此區間對於OOB_RMSE沒有太大影響。</li>
<li>最適最小節點觀察值數量大約落在3~5。</li>
<li>最適抽樣比例約為0.8。</li>
<li>表示抽樣比例高(~80%)和深度較長(葉節點觀測個數大小3~5)的隨機森林成效較好(OOB RMSE)。</li>
</ul>
<h5>調整變數型態</h5>
<p>雖然我們已知random forests對於原始類別型變數處理效果是不錯的，我們還是進一步來試試將類別變數重新編碼為dummy variables是否能提升random forests的預測表現。</p>
<p>以下，我們使用dummyVars()函數將類別變數重新編碼為虛擬變數。</p><pre class="crayon-plain-tag">to_dum &lt;- dummyVars(formula = ~., data = ames_train, fullRank = FALSE)</pre><p>原始類別預測變數(80)被轉換完後變成353個欄位。</p><pre class="crayon-plain-tag">ames_to_dum &lt;- predict(to_dum, newdata = ames_train) %&gt;% as.data.frame()</pre><p>將資料名稱變成ranger相容的名稱。</p><pre class="crayon-plain-tag">names(ames_to_dum) &lt;- make.names(names = names(ames_to_dum), allow_ = FALSE)</pre><p>建立hyperparameter grid。並將mtry的區間調整為更大範圍。並執行grid search。</p><pre class="crayon-plain-tag">hyper_grid_2 &lt;- expand.grid(
  mtry = seq(50, 200, by = 25),
  node_size  = seq(3, 9, by = 2),
  sampe_size = c(.55, .632, .70, .80),
  OOB_RMSE  = 0
)

for(i in 1:nrow(hyper_grid_2)){
  model &lt;- ranger(
    formula = Sale.Price ~.,
    data = ames_to_dum, 
    num.trees = 500, 
    mtry = hyper_grid_2$mtry[i],
    min.node.size = hyper_grid_2$node_size[i], 
    sample.fraction = hyper_grid_2$sampe_size[i],
    seed = 123
  )

  hyper_grid_2$OOB_RMSE[i] &lt;- sqrt(model$prediction.error)
}</pre><p></p><pre class="crayon-plain-tag">hyper_grid_2 %&gt;% 
  dplyr::arrange(OOB_RMSE) %&gt;% 
  head(10)</pre><p></p><pre class="crayon-plain-tag">##    mtry node_size sampe_size OOB_RMSE
## 1    50         3        0.8 26981.17
## 2    75         3        0.8 27000.85
## 3    75         5        0.8 27040.55
## 4    75         7        0.8 27086.80
## 5    50         5        0.8 27113.23
## 6   125         3        0.8 27128.26
## 7   100         3        0.8 27131.08
## 8   125         5        0.8 27136.93
## 9   125         3        0.7 27155.03
## 10  200         3        0.8 27171.37</pre><p>由結果可分發線</p>
<ul>
<li>OOB RMSE 落在27K左右，並沒有比類別變數重新編碼前的26K來得好。</li>
<li>將類別變數重新編碼成dummy variables是無法提升模型成效的。</li>
</ul>
<p>所以到目前為至，最適的random forests模型參數分別為mtry = 20, node_size = 5, sample_size = 0.8。我們重複執行100次這個參數設定的模型，來計算此模型的error rate的期望值大小。</p><pre class="crayon-plain-tag">OOB_RMSE &lt;- vector(mode = "numeric", length = 100)

for(i in 1:length(OOB_RMSE)){
  optimal_ranger &lt;- ranger(
    formula         = Sale_Price ~ ., 
    data            = ames_train, 
    num.trees       = 500,
    mtry            = 20,
    min.node.size   = 5,
    sample.fraction = .8,
    importance      = 'impurity'
  )

  OOB_RMSE[i] &lt;- sqrt(optimal_ranger$prediction.error)
}

hist(OOB_RMSE, breaks = 20)</pre><p><img src="/wp-content/uploads/2019/03/unnamed-chunk-19-1-3.png" alt="random forests-隨機森林" /></p>
<p>執行100次random forests的結果後，我們可以觀察到OOB RMSE的期望值約落在26000~26200區間。</p>
<p>另外，我們在在模型參數importance = &#8216;impurity&#8217;。這表示我們是依據節點不純度(node impurity)的改善幅度來衡量每個變數的重要性。變數的重要性是計算每一次使用不同變數切割結點後，總能使MSE下降的程度(跨多棵樹模型)，而那些無法透過該變數切割所降低的模型錯誤率，則被稱作node impurity。而能夠降低越多MSE的變數則被重要性越高。</p>
<p>因此，在每一次節點分割時，我們都會計算每個變數所造成的MSE下降程度，而累積下降MSE幅度最高者，則被認為是較為重要的變數。</p>
<p>我們將變數重要性結果繪出：</p><pre class="crayon-plain-tag">options(scipen = -1)
optimal_ranger$variable.importance %&gt;% 
  as.matrix() %&gt;% 
  as.data.frame() %&gt;% 
  add_rownames() %&gt;% 
  `colnames&lt;-`(c("varname","imp")) %&gt;%
  arrange(desc(imp)) %&gt;% 
  top_n(25,wt = imp) %&gt;% 
  ggplot(mapping = aes(x = reorder(varname, imp), y = imp)) +
  geom_col() +
  coord_flip() +
  ggtitle(label = "Top 25 important variables") +
  theme(
    axis.title = element_blank()
  )</pre><p></p><pre class="crayon-plain-tag">## Warning: Deprecated, use tibble::rownames_to_column() instead.</pre><p><img src="/wp-content/uploads/2019/03/unnamed-chunk-20-1-3.png" alt="random forests-隨機森林" /></p>
<p>由上圖我們可以看到前三名重要變數依序為：Overall_Qual, Gr_Liv_Area, Garage_Cars。</p>
<h4>Full grid search with H2O</h4>
<p>我們已經知道剛剛在執行ranger進行hyperparameter grid計算時，還花滿長一段時間的。雖然ranger在計算上是有效率的，<br />
但是當遇到大型的grid時，我們手寫的loop迴圈會變得非常沒有效率。</p>
<p>而這時候，h2o套件則是一個強大有效率的java-based介面，可以提供平行分布式運算方法。此外，h20還可以提供不同的&#8221;search path&#8221;。有別於一一執行每一種hyperparameter grid組合，h2o可允許不同的最適搜尋路徑來執行，直到模型成效改善達一定程度等search path。使得在tuning模型上更具效率。以下便來介紹如何使用h2o套件執行random forests。</p><pre class="crayon-plain-tag"># start up h2o
h2o.no_progress() # turn off progress bars when creating reports/tutorials)
h2o.init(max_mem_size = "4g")</pre><p></p><pre class="crayon-plain-tag">##  Connection successful!
## 
## R is connected to the H2O cluster: 
##     H2O cluster uptime:         1 days 3 hours 
##     H2O cluster timezone:       Asia/Taipei 
##     H2O data parsing timezone:  UTC 
##     H2O cluster version:        3.22.1.1 
##     H2O cluster version age:    2 months and 19 days  
##     H2O cluster name:           H2O_started_from_R_peihsuan_qcx617 
##     H2O cluster total nodes:    1 
##     H2O cluster total memory:   0.04 GB 
##     H2O cluster total cores:    4 
##     H2O cluster allowed cores:  4 
##     H2O cluster healthy:        FALSE 
##     H2O Connection ip:          localhost 
##     H2O Connection port:        54321 
##     H2O Connection proxy:       NA 
##     H2O Internal Security:      FALSE 
##     H2O API Extensions:         XGBoost, Algos, AutoML, Core V3, Core V4 
##     R Version:                  R version 3.5.2 (2018-12-20)</pre><p>首先我們先來使用完整grid search path (又叫做full cartesian)，即表示會逐一檢視所有我們所指派的參數組合(hyper_grid.h2o)。<br />
根據hyper_grid.h2o的參數組合，共會有4*3*2 = 24種組合。也因為這邊是採用cartisian法，所以也不會比上面的方法快多少。</p><pre class="crayon-plain-tag"># create feature names
y &lt;- "Sale_Price"
x &lt;- setdiff(names(ames_train), y)

# turn training set into h2o object
train.h2o &lt;- as.h2o(ames_train)</pre><p></p><pre class="crayon-plain-tag"># 指派參數組合 hyperparameter grid
hyper_grid.h2o &lt;- list(
  ntrees      = seq(200, 500, by = 100),
  mtries      = seq(20, 25, by = 2),
  sample_rate = c(.70, .80)
)

# build grid search 
# 以「cartesian」法逐一執行每一個參數組合的隨機森林模型

# 測試24種組合所需的時間
system.time(
grid &lt;- h2o.grid(
  algorithm = "randomForest",
  grid_id = "rf_grid",
  x = x, 
  y = y, 
  training_frame = train.h2o,
  hyper_params = hyper_grid.h2o,
  search_criteria = list(strategy = "Cartesian")
  )
)</pre><p></p><pre class="crayon-plain-tag">##   user  system elapsed 
##  9.628   3.104 874.954</pre><p></p><pre class="crayon-plain-tag"># 蒐集結果並依照每一種參數組合模型的MSE誤差來排名
# collect the results and sort by our model performance metric of choice
grid_perf &lt;- h2o.getGrid(
  grid_id = "rf_grid", 
  sort_by = "mse", 
  decreasing = FALSE
  )</pre><p></p><pre class="crayon-plain-tag">print(grid_perf)</pre><p></p><pre class="crayon-plain-tag">## H2O Grid Details
## ================
## 
## Grid ID: rf_grid 
## Used hyper parameters: 
##   -  mtries 
##   -  ntrees 
##   -  sample_rate 
## Number of models: 91 
## Number of failed models: 0 
## 
## Hyper-Parameter Search Summary: ordered by increasing mse
##   mtries ntrees sample_rate        model_ids                 mse
## 1     20    400         0.8 rf_grid_model_85 6.073124636667156E8
## 2     26    300         0.8 rf_grid_model_82 6.119220802095695E8
## 3     20    300         0.8 rf_grid_model_79 6.148210280053709E8
## 4     26    500         0.7 rf_grid_model_70 6.154919117655025E8
## 5     26    400         0.8 rf_grid_model_88 6.155747553830479E8
## 
## ---
##    mtries ntrees sample_rate        model_ids                 mse
## 86     24    200        0.55  rf_grid_model_3 6.629919566473577E8
## 87     28    200         0.7 rf_grid_model_53 6.643770708728626E8
## 88     28    300        0.55 rf_grid_model_11 6.644256979260525E8
## 89     30    200        0.55  rf_grid_model_6 6.658494098992392E8
## 90     22    500        0.55 rf_grid_model_20 6.755417850891622E8
## 91     28    200        0.55  rf_grid_model_5 6.786043491214715E8</pre><p>然而我們從上述結果可以注意到，最好的模型的OOB RMSE只有2.464371 × 10<sup>4</sup> (&lt;25K)，比我們先前所校正的模型效果都還更好。<br />
這是由於h2o套件在參數包括「最小節點大小(minimum node size)」、「樹的深度(tree depth)」等都更「慷慨」，比如說h2o預設最小節點大小為1，而ranger和randomForest該參數則都預設為5。</p>
<h4>Random Discrete grid search with H2O</h4>
<p>當遇到參數變很多的情況下，額外增加一個參數將會巨幅拉大grid search執行時間。為了因應這樣的不變，h2o提供了一種叫做「RandomDiscrete」的grid search搜尋路徑，有別於「Cartisian」逐一執行所有組合，「RandomDiscrete」會隨機挑選參數組合，直到達到一定程度的改善幅度、或是超過一定的時間、或是已執行一定數目的模型數（或是以上三種情況的交叉組合）。雖然使用「RandomDiscrete」搜尋可能會錯過最佳的參數組合效果，但基本上他已經能夠調教出不錯的模型了。</p>
<p>比如說，以下範例的參數組同樣為24種，我們設計一個「RandomDiscrete」grid search，停止條件為達成以下任一條件：近10組模型的MSE相較於最佳模性的改善幅度未超過0.5%、執行時間超過600秒(30 min)。</p><pre class="crayon-plain-tag"># hyperparameter grid
hyper_grid.h2o &lt;- list(
  ntrees      = seq(200, 500, by = 100),
  mtries      = seq(20, 25, by = 2),
  sample_rate = c(.70, .80)
)

# random grid search criteria
search_criteria &lt;- list(
  strategy = "RandomDiscrete",
  stopping_metric = "mse",
  stopping_tolerance = 0.005,
  stopping_rounds = 10,
  max_runtime_secs = 30*60
  )


# build grid search 
system.time(
random_grid &lt;- h2o.grid(
  algorithm = "randomForest",
  grid_id = "rf_grid2",
  x = x,
  y = y,
  training_frame = train.h2o,
  hyper_params = hyper_grid.h2o,
  search_criteria = search_criteria
  )
)</pre><p></p><pre class="crayon-plain-tag">##  user  system elapsed 
##  6.721   1.877 713.918</pre><p></p><pre class="crayon-plain-tag"># collect the results and sort by our model performance metric of choice
grid_perf2 &lt;- h2o.getGrid(
  grid_id = "rf_grid2",
  sort_by = "mse",
  decreasing = FALSE
  )</pre><p></p><pre class="crayon-plain-tag">print(grid_perf2)</pre><p></p><pre class="crayon-plain-tag">H2O Grid Details
================

Grid ID: rf_grid2 
Used hyper parameters: 
  -  mtries 
  -  ntrees 
  -  sample_rate 
Number of models: 24 
Number of failed models: 0 

Hyper-Parameter Search Summary: ordered by increasing mse
  mtries ntrees sample_rate         model_ids                 mse
1     20    500         0.8 rf_grid2_model_19 5.996100879211967E8
2     22    500         0.8 rf_grid2_model_24  6.09073686599265E8
3     22    500         0.7  rf_grid2_model_4 6.096855932933546E8
4     24    400         0.8  rf_grid2_model_8 6.132880206896532E8
5     22    400         0.8 rf_grid2_model_13 6.151492899918578E8

---
   mtries ntrees sample_rate         model_ids                 mse
19     20    500         0.7 rf_grid2_model_12 6.347692770119294E8
20     22    300         0.7 rf_grid2_model_21 6.361713674445038E8
21     24    400         0.7  rf_grid2_model_6 6.431105576136292E8
22     20    400         0.7  rf_grid2_model_9   6.4353236575248E8
23     22    200         0.7  rf_grid2_model_5 6.477837564818393E8
24     24    200         0.8  rf_grid2_model_1  6.50234231493715E8</pre><p>檢視「RandomDiscrete」grid search結果我們發現，經「隨機」檢視24組參數組合後，最佳的模型MSE只有2.448694 × 10<sup>4</sup>  (v.s. Cartisian grid search找到的2.464371 × 10<sup>4</sup>已非常接近)。且random discrete法只花了約11分鐘(=713/60)的時間(v.s. complete search的15分鐘(=874 sec / 60)。</p>
<p>一旦找到了最佳模型，我們就可以將模型套用在hold-out test set測試資料上來計算最後的「驗證誤差 test error」。結果顯示驗證RMSE誤差為23K，比elastic nets(32K)和bagging(36K)法低了$10K左右。</p><pre class="crayon-plain-tag"># 根據Cartesian法中，選出MSE最低的model，
# Grab the model_id for the top model, chosen by validation error
best_model_id &lt;- grid_perf2@model_ids[[1]]
best_model &lt;- h2o.getModel(best_model_id)</pre><p></p><pre class="crayon-plain-tag"># Now let’s evaluate the model performance on a test set
ames_test.h2o &lt;- as.h2o(ames_test)</pre><p></p><pre class="crayon-plain-tag">best_model_perf &lt;- h2o.performance(model = best_model, newdata = ames_test.h2o)</pre><p></p><pre class="crayon-plain-tag"># RMSE of best model
h2o.mse(best_model_perf) %&gt;% sqrt()</pre><p></p><pre class="crayon-plain-tag">## [1] 23303.05</pre><p></p>
<h3>預測</h3>
<p>一但我們挑出了我們偏好的模型，就像之前一樣，可以使用predict()函數將模型套用在新的資料集上做預測。我們可以來比較所有模型類別的預測效果(randomForest, ranger, h2o)(隨然呈現的結果有稍稍的不一樣)。另外要注意的就是h2o模型使用資料的格式不太依樣。</p>
<p>randomForest</p><pre class="crayon-plain-tag"># randomForest
pred_randomForest &lt;- predict(ames_randomForest, ames_test)
head(pred_randomForest)</pre><p></p><pre class="crayon-plain-tag">##        1        2        3        4        5        6 
## 128454.9 155459.6 264329.4 382519.7 211966.4 214173.0</pre><p>ranger</p><pre class="crayon-plain-tag"># ranger
pred_ranger &lt;- predict(ames_ranger, ames_test)
head(pred_ranger$predictions)</pre><p></p><pre class="crayon-plain-tag">## [1] 128893.3 154095.1 270183.4 389106.2 222629.6 210352.8</pre><p>h2o</p><pre class="crayon-plain-tag"># h2o
pred_h2o &lt;- predict(best_model, ames_test.h2o)</pre><p></p><pre class="crayon-plain-tag">head(pred_h2o)</pre><p></p><pre class="crayon-plain-tag">##    predict
## 1 119430.6
## 2 152900.0
## 3 278208.3
## 4 283966.7
## 5 225166.7
## 6 200583.3</pre><p></p>
<h3>小結</h3>
<ol>
<li>random forest是一個非常強大的「開箱即用」的演算法。不用太多的參數調教就會有相當不錯的預測能力。</li>
<li>此外，random forest也是模型中對資料前處理要求最少的模型，不太需要做資料轉換，是許多解決預測問題時最快能應用的方法。</li>
<li>以bagging為基礎，並透過(1)每棵樹進行bootstrapped sample 與 (2)節點分割時隨機挑選變數清單來「去除樹模型間的相關性」，能有效提升模型的高變異性與提升預測精準度。</li>
</ol>
<hr />
<p>參考文章連結：</p>
<p><a href="http://uc-r.github.io/random_forests" target="_blank" rel="noopener noreferrer">隨機森林 random forest</a></p>
<p>更多Decision Tree相關的統計學習筆記：</p>
<p><a href="/gradient-boosting-machines-gbm/" target="_blank" rel="noopener noreferrer">Gradient Boosting Machines GBM | gbm, xgboost, h2o | R語言</a></p>
<p><a href="/decision-tree-cart-%e6%b1%ba%e7%ad%96%e6%a8%b9/" target="_blank" rel="noopener noreferrer">Decision Tree 決策樹 | CART, Conditional Inference Tree, RandomForest</a></p>
<p><a href="/regression-tree-%e8%bf%b4%e6%ad%b8%e6%a8%b9-bagging-bootstrap-aggrgation-r%e8%aa%9e%e8%a8%80/" target="_blank" rel="noopener noreferrer">Regression Tree | 迴歸樹, Bagging, Bootstrap Aggregation | R語言</a></p>
<p><a href="/decision-tree-surrogate-in-cart/" target="_blank" rel="noopener noreferrer">Tree Surrogate | Tree Surrogate Variables in CART | R 統計</a></p>
<p>更多Regression相關統計學習筆記：</p>
<p><a href="/linear-regression-%e7%b7%9a%e6%80%a7%e8%bf%b4%e6%ad%b8%e6%a8%a1%e5%9e%8b/" target="_blank" rel="noopener noreferrer">Linear Regression | 線性迴歸模型 | using AirQuality Dataset</a></p>
<p><a href="/logistic-regression-part1-%e7%be%85%e5%90%89%e6%96%af%e8%bf%b4%e6%ad%b8/" target="_blank" rel="noopener noreferrer">Logistic Regression 羅吉斯迴歸 | part1 – 資料探勘與處理 | 統計 R語言</a></p>
<p><a href="/logistic-regression-part2-%e7%be%85%e5%90%89%e6%96%af%e8%bf%b4%e6%ad%b8/" target="_blank" rel="noopener noreferrer">Logistic Regression 羅吉斯迴歸 | part2 – 模型建置、診斷與比較 | R語言</a></p>
<p><a href="/regularized-regression-ridge-lasso-elastic/" target="_blank" rel="noopener noreferrer">Regularized Regression | 正規化迴歸 – Ridge, Lasso, Elastic Net | R語言</a></p>
<p>更多Clustering集群分析統計學習筆記：</p>
<p><a href="/partitional-clustering-kmeans-kmedoid/" target="_blank" rel="noopener noreferrer">Partitional Clustering 切割式分群 | Kmeans, Kmedoid | Clustering 資料分群</a></p>
<p><a href="/hierarchical-clustering-%e9%9a%8e%e5%b1%a4%e5%bc%8f%e5%88%86%e7%be%a4/" target="_blank" rel="noopener noreferrer">Hierarchical Clustering 階層式分群 | Clustering 資料分群 | R 統計</a></p>
<p>其他統計學習筆記：</p>
<p><a href="/principal-components-analysis-pca-%e4%b8%bb%e6%88%90%e4%bb%bd%e5%88%86%e6%9e%90/" target="_blank" rel="noopener noreferrer">Principal Components Analysis (PCA) | 主成份分析 | R 統計</a></p>
<p>這篇文章 <a rel="nofollow" href="/random-forests-%e9%9a%a8%e6%a9%9f%e6%a3%ae%e6%9e%97/">Random Forests 隨機森林 | randomForest, ranger, h2o | R語言</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></content:encoded>
					
					<wfw:commentRss>/random-forests-%e9%9a%a8%e6%a9%9f%e6%a3%ae%e6%9e%97/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
			</item>
		<item>
		<title>雞籠山 &#124; 登高眺望九份山景與海景的登山步道 &#124; 基隆 九份</title>
		<link>/%e9%9b%9e%e7%b1%a0%e5%b1%b1-%e4%b9%9d%e4%bb%bd-%e5%9f%ba%e9%9a%86/</link>
					<comments>/%e9%9b%9e%e7%b1%a0%e5%b1%b1-%e4%b9%9d%e4%bb%bd-%e5%9f%ba%e9%9a%86/#respond</comments>
		
		<dc:creator><![CDATA[jamleecute]]></dc:creator>
		<pubDate>Sun, 03 Mar 2019 07:50:49 +0000</pubDate>
				<category><![CDATA[台灣旅遊]]></category>
		<category><![CDATA[旅遊]]></category>
		<category><![CDATA[九份]]></category>
		<category><![CDATA[九份登山步道]]></category>
		<category><![CDATA[九份老街]]></category>
		<category><![CDATA[基隆]]></category>
		<category><![CDATA[基隆山]]></category>
		<category><![CDATA[基隆登山步道]]></category>
		<category><![CDATA[登山步道]]></category>
		<category><![CDATA[雞籠山]]></category>
		<guid isPermaLink="false">/?p=2592</guid>

					<description><![CDATA[<p>2019年2月初的冬天初訪位在 基隆 九分老街 附近的「 雞籠山 」登山步道，步道入口距離九份老街入口不過走路5分鐘左右的腳程，很適合兩個景點一起玩。九份的天氣 [&#8230;]</p>
<p>這篇文章 <a rel="nofollow" href="/%e9%9b%9e%e7%b1%a0%e5%b1%b1-%e4%b9%9d%e4%bb%bd-%e5%9f%ba%e9%9a%86/">雞籠山 | 登高眺望九份山景與海景的登山步道 | 基隆 九份</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></description>
										<content:encoded><![CDATA[<p>2019年2月初的冬天初訪位在 基隆 九分老街 附近的「 雞籠山 」登山步道，步道入口距離九份老街入口不過走路5分鐘左右的腳程，很適合兩個景點一起玩。九份的天氣陰晴不定，我們登山的時間是有點偏晚，接近中午前後，那時候太陽出來，山頂上正熱，好處是不易碰到颳風下雨，壞處是太陽很烈，建議早一點登山避開中午的尖峰。</p>
<p>登山入口</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2716" src="/wp-content/uploads/2019/03/IMG_4099.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4099.jpg 1384w, /wp-content/uploads/2019/03/IMG_4099-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4099-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4099-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4099-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4099-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4099-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4099-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p>登山步道-前段</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2717" src="/wp-content/uploads/2019/03/IMG_4101.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4101.jpg 1384w, /wp-content/uploads/2019/03/IMG_4101-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4101-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4101-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4101-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4101-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4101-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4101-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-2718" src="/wp-content/uploads/2019/03/IMG_4102.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4102.jpg 1384w, /wp-content/uploads/2019/03/IMG_4102-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4102-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4102-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4102-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4102-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4102-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4102-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-2721" src="/wp-content/uploads/2019/03/IMG_4107.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4107.jpg 1384w, /wp-content/uploads/2019/03/IMG_4107-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4107-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4107-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4107-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4107-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4107-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4107-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p>我們今天走的主要是步道地圖上右邊的「主線」（單趟步行約50分鐘）</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2719" src="/wp-content/uploads/2019/03/IMG_4106.jpg" alt="雞籠山-基隆-九份" width="1843" height="1383" srcset="/wp-content/uploads/2019/03/IMG_4106.jpg 1843w, /wp-content/uploads/2019/03/IMG_4106-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4106-768x576.jpg 768w, /wp-content/uploads/2019/03/IMG_4106-1024x768.jpg 1024w, /wp-content/uploads/2019/03/IMG_4106-830x623.jpg 830w, /wp-content/uploads/2019/03/IMG_4106-230x173.jpg 230w, /wp-content/uploads/2019/03/IMG_4106-350x263.jpg 350w, /wp-content/uploads/2019/03/IMG_4106-480x360.jpg 480w" sizes="(max-width: 1843px) 100vw, 1843px" /></p>
<p>岔路口的地方。我們會走右邊的「主線」。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2720" src="/wp-content/uploads/2019/03/IMG_4110.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4110.jpg 1384w, /wp-content/uploads/2019/03/IMG_4110-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4110-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4110-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4110-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4110-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4110-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4110-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p>第一個瞭望台</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2722" src="/wp-content/uploads/2019/03/IMG_4116.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4116.jpg 1384w, /wp-content/uploads/2019/03/IMG_4116-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4116-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4116-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4116-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4116-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4116-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4116-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p>中段路程 有些微陡</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2723" src="/wp-content/uploads/2019/03/IMG_4122.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4122.jpg 1384w, /wp-content/uploads/2019/03/IMG_4122-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4122-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4122-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4122-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4122-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4122-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4122-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-2724" src="/wp-content/uploads/2019/03/IMG_4128.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4128.jpg 1384w, /wp-content/uploads/2019/03/IMG_4128-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4128-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4128-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4128-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4128-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4128-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4128-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p>第二個瞭望台</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2725" src="/wp-content/uploads/2019/03/IMG_4124.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4124.jpg 1384w, /wp-content/uploads/2019/03/IMG_4124-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4124-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4124-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4124-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4124-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4124-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4124-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p>陡峭又無樹蔭的階梯</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2727" src="/wp-content/uploads/2019/03/IMG_4133.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4133.jpg 1384w, /wp-content/uploads/2019/03/IMG_4133-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4133-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4133-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4133-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4133-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4133-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4133-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p>第一個涼亭</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2726" src="/wp-content/uploads/2019/03/IMG_4134.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4134.jpg 1384w, /wp-content/uploads/2019/03/IMG_4134-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4134-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4134-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4134-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4134-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4134-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4134-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-2730" src="/wp-content/uploads/2019/03/IMG_4135.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4135.jpg 1384w, /wp-content/uploads/2019/03/IMG_4135-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4135-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4135-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4135-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4135-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4135-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4135-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p>告示牌：第一涼亭距離第二涼亭（山頂）尚有215m</p>
<p>這邊的路又更陡了</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2729" src="/wp-content/uploads/2019/03/IMG_4137.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4137.jpg 1384w, /wp-content/uploads/2019/03/IMG_4137-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4137-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4137-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4137-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4137-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4137-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4137-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-2731" src="/wp-content/uploads/2019/03/IMG_4142.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4142.jpg 1384w, /wp-content/uploads/2019/03/IMG_4142-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4142-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4142-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4142-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4142-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4142-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4142-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p>第二個涼亭（山頂）</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2728" src="/wp-content/uploads/2019/03/IMG_4176.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4176.jpg 1384w, /wp-content/uploads/2019/03/IMG_4176-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4176-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4176-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4176-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4176-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4176-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4176-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p>山頂的瞭望台</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2734" src="/wp-content/uploads/2019/03/IMG_4155.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4155.jpg 1384w, /wp-content/uploads/2019/03/IMG_4155-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4155-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4155-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4155-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4155-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4155-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4155-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p>山頂風景</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2732" src="/wp-content/uploads/2019/03/IMG_4150.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4150.jpg 1384w, /wp-content/uploads/2019/03/IMG_4150-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4150-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4150-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4150-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4150-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4150-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4150-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p>天氣好的時候，風景滿漂亮的。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2735" src="/wp-content/uploads/2019/03/IMG_4165.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4165.jpg 1384w, /wp-content/uploads/2019/03/IMG_4165-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4165-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4165-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4165-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4165-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4165-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4165-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p><img loading="lazy" class="alignnone size-full wp-image-2736" src="/wp-content/uploads/2019/03/IMG_4151.jpg" alt="雞籠山-基隆-九份" width="1384" height="1037" srcset="/wp-content/uploads/2019/03/IMG_4151.jpg 1384w, /wp-content/uploads/2019/03/IMG_4151-300x225.jpg 300w, /wp-content/uploads/2019/03/IMG_4151-768x575.jpg 768w, /wp-content/uploads/2019/03/IMG_4151-1024x767.jpg 1024w, /wp-content/uploads/2019/03/IMG_4151-830x622.jpg 830w, /wp-content/uploads/2019/03/IMG_4151-230x172.jpg 230w, /wp-content/uploads/2019/03/IMG_4151-350x262.jpg 350w, /wp-content/uploads/2019/03/IMG_4151-480x360.jpg 480w" sizes="(max-width: 1384px) 100vw, 1384px" /></p>
<p>&nbsp;</p>
<p><strong><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/270f.png" alt="✏" class="wp-smiley" style="height: 1em; max-height: 1em;" />心得</strong></p>
<p>整體來說，如果遇到晴天的話，雞籠山山頂山風景是很美的，甚至有機會看清楚海上的島嶼。</p>
<p>只是當天登頂時雖是大中午，但平地還是籠罩在pm2.5的陰霾下，非常可惜無法看到清楚的山下風景。</p>
<p>因為山上都沒有樹蔭遮蔽，所以整體爬起來很曬，一路上不僅戴帽子也還撐陽傘在爬，因為太陽真的很烈。風也特別大，所以帽子要繫緊傘也要拿好。</p>
<p>建議要爬的話挑早一點的上午時間來，中午雖然陽光充足，但真的會爬得特別累（兩壺水喝光光）。</p>
<p>我們自己的去回步行時間加上一點點涼亭休憩時間約2.5小時。</p>
<p>因為中後段步道都有點抖，不太敢回頭看山下的九份風景（有點小懼高），腳會發抖<img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f602.png" alt="😂" class="wp-smiley" style="height: 1em; max-height: 1em;" /><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f602.png" alt="😂" class="wp-smiley" style="height: 1em; max-height: 1em;" /><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f602.png" alt="😂" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>爬完後可以去九份老街吃個小吃補充能量（如：阿柑姨芋圓），很適合一日遊的行程。</p>
<p>回到九份山下，下午四五點天氣就會轉陰（飄雨），溫差大，記得要做好保暖～</p>
<p>&nbsp;</p>
<p><strong><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f68c.png" alt="🚌" class="wp-smiley" style="height: 1em; max-height: 1em;" />交通資訊</strong></p>
<p>可從台北搭乘1062公車前往九份。我是在「<strong>捷運忠孝復興站</strong>」搭車的，<a href="http://www.kl-bus.com.tw/Content/routeContact.aspx?t=2&amp;id=5" target="_blank" rel="noopener noreferrer"><span style="color: #9f6ad4;">2019新的等車地點為「捷運站2號出口」</span></a>。</p>
<p><a href="/%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2-web-crawler-text-mining-python/" target="_blank" rel="noopener noreferrer">1062公車路線資訊 （如下圖）</a></p>
<p>下圖參考公車資訊連結：</p>
<p><img loading="lazy" class="alignnone wp-image-2737" src="/wp-content/uploads/2019/03/1071123-1062公車路線.jpg" alt="1071123-1062公車路線" width="986" height="919" /></p>
<p>乘車資訊 ：<a href="http://www.kl-bus.com.tw/Content/routeContact.aspx?t=2&amp;id=5" target="_blank" rel="noopener noreferrer">http://www.kl-bus.com.tw/Content/routeContact.aspx?t=2&amp;id=5</a></p>
<p><a href="http://www.kl-bus.com.tw/Content/routeContact.aspx?t=2&amp;id=5" target="_blank" rel="noopener noreferrer">公車時刻表</a> （截圖如下）</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2738" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-03-下午3.40.17.png" alt="1062公車時刻表" width="1138" height="897" srcset="/wp-content/uploads/2019/03/螢幕快照-2019-03-03-下午3.40.17.png 1138w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-下午3.40.17-300x236.png 300w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-下午3.40.17-768x605.png 768w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-下午3.40.17-1024x807.png 1024w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-下午3.40.17-830x654.png 830w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-下午3.40.17-230x181.png 230w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-下午3.40.17-350x276.png 350w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-下午3.40.17-480x378.png 480w" sizes="(max-width: 1138px) 100vw, 1138px" /></p>
<p>&nbsp;</p>
<p><strong><img src="https://s.w.org/images/core/emoji/13.0.1/72x72/1f4cd.png" alt="📍" class="wp-smiley" style="height: 1em; max-height: 1em;" />雞籠山位置 （距離九份老街很近，步行約5分鐘可到）</strong></p>
<p><iframe loading="lazy" width="600" height="450" style="border: 0;" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d7331.794023011275!2d121.84497185041174!3d25.11263174040747!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x1f7ea99f3bb0d213!2z6Zue57Gg5bGx55m75bGx5q2l6YGT!5e0!3m2!1szh-TW!2stw!4v1551598256142" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p>
<p>google map步行時間估計</p>
<p><img loading="lazy" class="alignnone wp-image-2739" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-03-下午3.43.01.png" alt="雞籠山-基隆-九份" width="646" height="697" /></p>
<p>&nbsp;</p>
<hr />
<p><strong>更多台灣旅遊好去處：</strong></p>
<p><a href="/new-taipei-city-fulong-%e6%96%b0%e5%8c%97%e7%a6%8f%e9%9a%86-%e8%8d%89%e5%b6%ba%e5%8f%a4%e9%81%93/" target="_blank" rel="noopener noreferrer">草嶺古道 | 「說走就走」適合踏青散心的 台北近郊一日遊景點 | 新北福隆</a></p>
<p><a href="/%e5%a5%a7%e8%90%ac%e5%a4%a7/" target="_blank" rel="noopener noreferrer">奧萬大 賞櫻 賞楓 | 四季美景兼具的國家森林遊樂區 | 南投</a></p>
<p><a href="/%e5%8d%97%e6%8a%95%e4%b8%89%e5%a4%a9%e5%85%a9%e5%a4%9c-%e8%87%aa%e7%94%b1%e8%a1%8c/" target="_blank" rel="noopener noreferrer">南投三天兩夜 自由行 | 清境 合歡山 奧萬大 日月潭 | 暖冬小旅遊</a></p>
<p><a href="/%e6%a1%82%e6%9c%88%e6%9d%91-lauravilla/" target="_blank" rel="noopener noreferrer">桂月村 | 乾淨舒適寬敞、設計感滿分、服務親切、CP值高民宿 | 日月潭</a></p>
<p>這篇文章 <a rel="nofollow" href="/%e9%9b%9e%e7%b1%a0%e5%b1%b1-%e4%b9%9d%e4%bb%bd-%e5%9f%ba%e9%9a%86/">雞籠山 | 登高眺望九份山景與海景的登山步道 | 基隆 九份</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></content:encoded>
					
					<wfw:commentRss>/%e9%9b%9e%e7%b1%a0%e5%b1%b1-%e4%b9%9d%e4%bb%bd-%e5%9f%ba%e9%9a%86/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Bounce rate v.s. Exit rate &#124; 跳出率與離開率的差別 &#124; google analytics</title>
		<link>/bounce-rate-exit-rate-%e8%b7%b3%e5%87%ba%e7%8e%87-%e9%9b%a2%e9%96%8b%e7%8e%87-ga/</link>
					<comments>/bounce-rate-exit-rate-%e8%b7%b3%e5%87%ba%e7%8e%87-%e9%9b%a2%e9%96%8b%e7%8e%87-ga/#respond</comments>
		
		<dc:creator><![CDATA[jamleecute]]></dc:creator>
		<pubDate>Sun, 03 Mar 2019 04:42:46 +0000</pubDate>
				<category><![CDATA[ 程式與統計]]></category>
		<category><![CDATA[統計分析]]></category>
		<category><![CDATA[bounce rate]]></category>
		<category><![CDATA[exit rate]]></category>
		<category><![CDATA[GA]]></category>
		<category><![CDATA[google analytics]]></category>
		<category><![CDATA[跳出率]]></category>
		<category><![CDATA[離開率]]></category>
		<guid isPermaLink="false">/?p=2595</guid>

					<description><![CDATA[<p>本篇筆記想要介紹，在使用google analytics分析網站流量狀況時，常見的兩個指標: bounce rate (跳出率)與 exit rate (離開率 [&#8230;]</p>
<p>這篇文章 <a rel="nofollow" href="/bounce-rate-exit-rate-%e8%b7%b3%e5%87%ba%e7%8e%87-%e9%9b%a2%e9%96%8b%e7%8e%87-ga/">Bounce rate v.s. Exit rate | 跳出率與離開率的差別 | google analytics</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></description>
										<content:encoded><![CDATA[<p>本篇筆記想要介紹，在使用google analytics分析網站流量狀況時，常見的兩個指標: bounce rate (跳出率)與 exit rate (離開率) 間的定義與計算差別，分子分母的組成與意義，並分「網站」層次和「個別頁面」層次說明計算邏輯。</p>
<p>&nbsp;</p>
<h3>bounce rate 跳出率</h3>
<p><span style="color: #9f6ad4;">是判斷所有session(工作階段)中，哪些session只看了單一頁面(pageview = 1)即離站的比例。</span></p>
<p>比如說，今天整體網站的session數為100，其中有50個session只看了單一頁面即離站，沒有與網站近一步互動，那整體網站的bounce rate = bounce / session = 50/100 = 50%。而個別頁面的bounce rate = (屬於該頁面的bounce)/(含此頁面的session數)。</p>
<h3> </h3>
<h3><strong>exit rate 離開率</strong></h3>
<p><span style="color: #9f6ad4;">是判斷所有pageview(網頁瀏覽)中，哪些瀏覽是工作階段中的最後一頁的比例。</span></p>
<p>比如說頁面A共有100次瀏覽次數，其中有30次瀏覽是工作階段中的最後一頁(exit)，沒有再繼續瀏覽其他頁面的紀錄，則網頁A的exit rate = exit / pageview = 30/100 = 30%。那整體網站的離開率則是：(所有的頁面加總的exit)/(所有頁面加總的pageview)。</p>
<h3> </h3>
<h3>全站v.s.個別頁面的跳出率與離開率</h3>
<p>我們可以想像原始瀏覽資料的紀錄格式可能如下：</p>
<p>紀錄了基本工作階段流水號(session)、每個工作階段瀏覽頁面的資訊(page ID)、標記每個工作階段是否為跳出(bounce)、標記每個瀏覽頁面是否為該工作階段的最後一頁(exit)。</p>
<table class="wp-block-table has-fixed-layout">
<tbody>
<tr>
<td>session ID</td>
<td>page ID</td>
<td>bounce (0/1)</td>
<td>exit (0/1)</td>
</tr>
<tr>
<td>1</td>
<td>a</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>b</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>c</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>a</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p><!-- /wp:table -->

<!-- wp:paragraph --></p>
<p><span style="text-decoration: underline;"><strong>計算指標如下：</strong></span></p>
<p>頁面a的跳出率bounce rate = bounce / session = 1/2 = 50%</p>
<p>全站的跳出率bounce rate = sum(bounce)/sum(session) = 1/2 = 50%</p>
<p>頁面a的離開率exit rate = exit / pageview = 1/2 = 50%</p>
<p>全站的離開率exit rate = sum(exit)/sum(pageview) = 2/4 = 50%</p>
<p>&nbsp;</p>
<hr />
<p>參考文章：</p>
<p><a href="https://support.google.com/analytics/answer/2525491?hl=en" target="_blank" rel="noopener noreferrer">Exit Rate vs. Bounce Rate</a></p>
<hr class="wp-block-separator" />
<p>更多有關「流量 traffic」的學習筆記：</p>
<p><a href="/app-mobile-ad-revenue-admob-%e8%a1%8c%e5%8b%95%e5%bb%a3%e5%91%8a%e6%94%b6%e5%85%a5/" target="_blank" rel="noopener noreferrer">開發一個免費App能賺多少錢？ 靠 AdMob 廣告月收3萬實例分享</a></p><p>這篇文章 <a rel="nofollow" href="/bounce-rate-exit-rate-%e8%b7%b3%e5%87%ba%e7%8e%87-%e9%9b%a2%e9%96%8b%e7%8e%87-ga/">Bounce rate v.s. Exit rate | 跳出率與離開率的差別 | google analytics</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></content:encoded>
					
					<wfw:commentRss>/bounce-rate-exit-rate-%e8%b7%b3%e5%87%ba%e7%8e%87-%e9%9b%a2%e9%96%8b%e7%8e%87-ga/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Text Mining &#038; 網路爬蟲 web crawler &#124; Google新聞與文章文字雲 &#124; Python</title>
		<link>/%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2-web-crawler-text-mining-python/</link>
					<comments>/%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2-web-crawler-text-mining-python/#respond</comments>
		
		<dc:creator><![CDATA[jamleecute]]></dc:creator>
		<pubDate>Sun, 03 Mar 2019 03:42:35 +0000</pubDate>
				<category><![CDATA[ 程式與統計]]></category>
		<category><![CDATA[資料處理]]></category>
		<category><![CDATA[google news]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[text mining]]></category>
		<category><![CDATA[web crawler]]></category>
		<category><![CDATA[word cloud]]></category>
		<category><![CDATA[文字雲]]></category>
		<category><![CDATA[網路爬蟲]]></category>
		<guid isPermaLink="false">/?p=2647</guid>

					<description><![CDATA[<p>本篇學習筆記將要示範如何使用 Python 來執行 網路爬蟲 web crawler 與 basic text mining ，並以爬取Google News  [&#8230;]</p>
<p>這篇文章 <a rel="nofollow" href="/%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2-web-crawler-text-mining-python/">Text Mining &#038; 網路爬蟲 web crawler | Google新聞與文章文字雲 | Python</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></description>
										<content:encoded><![CDATA[<p>本篇學習筆記將要示範如何使用 Python 來執行 網路爬蟲 web crawler 與 basic text mining ，並以爬取<a href="https://news.google.com/topics/CAAqJQgKIh9DQkFTRVFvSUwyMHZNR3QwTlRFU0JYcG9MVlJYS0FBUAE?hl=zh-TW&amp;gl=TW&amp;ceid=TW%3Azh-Hant" target="_blank" rel="noopener noreferrer">Google News 的「健康」類別新聞</a>為例。筆記包含以下部分：(1) 爬取新聞標題 (2) 爬取新聞連結 (3) 新聞文章斷詞(jieba)與字詞頻率分析(文字雲) 。</p>
<h2>網路爬蟲 web crawler</h2>
<p>載入套件、指定目標URL、並解析HTML</p><pre class="crayon-plain-tag">import requests 
from bs4 import BeautifulSoup
import pandas as pd


url = 'https://news.google.com/topics/CAAqJQgKIh9DQkFTRVFvSUwyMHZNR3QwTlRFU0JYcG9MVlJYS0FBUAE?hl=zh-TW&amp;gl=TW&amp;ceid=TW%3Azh-Hant'
r = requests.get(url)
web_content = r.text
soup = BeautifulSoup(web_content,'lxml')</pre><p></p>
<h3></h3>
<h3>1. 找出所有新聞的標題</h3>
<p>先檢視新聞標題在HTML的規則。</p>
<p>可以發現：</p>
<ul>
<li>每個文章小卡都是包覆在class = &#8216;xrnccd&#8217;的div物件中
<ul>
<li>整個文章小卡點擊區塊連結: class = &#8220;VDXfz&#8221;</li>
</ul>
</li>
<li>文章小卡中的標題則是包覆在class為&#8217;mEaVNd&#8217;的div物件中
<ul>
<li>標題文字則是在&lt;span&gt;&lt;/span&gt;標籤中</li>
</ul>
</li>
</ul>
<p><img loading="lazy" class="alignnone size-full wp-image-2670" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.33.06-1.png" alt="螢幕快照 2019-03-03 上午9.33.06" width="1599" height="548" srcset="/wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.33.06-1.png 1599w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.33.06-1-300x103.png 300w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.33.06-1-768x263.png 768w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.33.06-1-1024x351.png 1024w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.33.06-1-830x284.png 830w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.33.06-1-230x79.png 230w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.33.06-1-350x120.png 350w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.33.06-1-480x165.png 480w" sizes="(max-width: 1599px) 100vw, 1599px" /></p>
<p>找出所有文章小卡中class = &#8216;mEaVNd&#8217;的「標題區塊」的元素並儲存為一個list (named title)</p>
<p>list中每一個「標題區塊」元素是以逗號做區隔</p><pre class="crayon-plain-tag">title = soup.find_all('div', class_='mEaVNd')
print(title)</pre><p><img loading="lazy" class="alignnone size-full wp-image-2667" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.26.02.png" alt="螢幕快照 2019-03-03 上午9.26.02" width="889" height="484" srcset="/wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.26.02.png 889w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.26.02-300x163.png 300w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.26.02-768x418.png 768w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.26.02-830x452.png 830w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.26.02-230x125.png 230w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.26.02-350x191.png 350w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午9.26.02-480x261.png 480w" sizes="(max-width: 889px) 100vw, 889px" /></p>
<p>再從「標題區塊」list中，找出每個元素的&lt;span&gt;&lt;/span&gt;標籤，並萃取出標題文字</p><pre class="crayon-plain-tag">titles = [t.find('span').text for t in title]
titles</pre><p></p><pre class="crayon-plain-tag">['腰頸常疼痛嗎？研究發現這或許與糖尿病有關',
 '不認真刷牙？日本專家：忽略口腔護理，恐引發致命疾病',
 '不舉、憂鬱、沒精神，恐怕是「男性更年期」來報到？醫生：出現這8種症狀，趕快去檢查',
 '一餐吃十幾塊蘿蔔糕，血糖就意外飆高…營養師4大建議，吃東西真的要謹慎啊！',
 '男性更年期同樣讓人崩潰！50歲上下都得注意，醫師3招緩解情緒不穩、早洩問題',
 '原來做巧克力餅乾這麼簡單！微波爐5分鐘搞定，颱風天在家做做看吧']</pre><p></p>
<h3></h3>
<h3>2. 找出新聞標題所對應的資料來源links</h3>
<p>新聞連結的取得是比較tricky的部分，<span style="text-decoration: underline;">因為google news網頁中html &lt;a&gt; &lt;/a&gt;標籤中的連結是經過另外轉換的</span>，<span style="text-decoration: underline;"><strong><span style="color: #9d6ad4; text-decoration: underline;">所以需要request.get()另外取得轉換後的真實文章URL</span></strong></span>。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2650" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.58.10.png" alt="web-crawler-text-mining" width="2536" height="1074" srcset="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.58.10.png 2536w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.58.10-300x127.png 300w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.58.10-768x325.png 768w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.58.10-1024x434.png 1024w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.58.10-830x352.png 830w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.58.10-230x97.png 230w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.58.10-350x148.png 350w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.58.10-480x203.png 480w" sizes="(max-width: 2536px) 100vw, 2536px" /></p>
<p>取得新聞文章真實URL:</p>
<ol>
<li>找出標題區塊&lt;a&gt;&lt;/a&gt;標籤並<span style="color: #9d6ad4;">萃取出href的值</span></li>
<li><span style="color: #9d6ad4;">將href值中&#8217;.&#8217;取代為當下的domain</span>，得到<span style="text-decoration: underline;">須經轉換的URL</span></li>
<li>將<span style="text-decoration: underline;">須經轉換的URL</span>丟入<span style="color: #9d6ad4;">request.get()</span>函式中，並使用<span style="color: #9f6ad4;">.url</span>取得文章真實的URL</li>
</ol>
<p></p><pre class="crayon-plain-tag">newUrls = [requests.get(t.find('a')['href'].replace('.','https://news.google.com',1)).url for t in title]
newUrls</pre><p></p><pre class="crayon-plain-tag">['https://tw.news.yahoo.com/%E8%85%B0%E9%A0%B8%E5%B8%B8%E7%96%BC%E7%97%9B%E5%97%8E-%E7%A0%94%E7%A9%B6%E7%99%BC%E7%8F%BE%E9%80%99%E6%88%96%E8%A8%B1%E8%88%87%E7%B3%96%E5%B0%BF%E7%97%85%E6%9C%89%E9%97%9C-090011577.html',
 'https://n.yam.com/Article/20190301775078',
 'https://www.storm.mg/lifestyle/469667',
 'https://www.storm.mg/lifestyle/219203',
 'https://www.storm.mg/lifestyle/294616',
 'https://www.storm.mg/lifestyle/110852']</pre><p></p>
<h3></h3>
<h3>3. 將標題與連結合併成data frame</h3>
<p>這樣就能新聞標題和真實出處URL做一個簡易的資訊表格整理</p><pre class="crayon-plain-tag">df = pd.DataFrame(
{
    'title': titles,
    'links': newUrls
})

df</pre><p><img loading="lazy" class="alignnone size-full wp-image-2651" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.02.11.png" alt="web-crawler-text-mining" width="1718" height="442" srcset="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.02.11.png 1718w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.02.11-300x77.png 300w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.02.11-768x198.png 768w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.02.11-1024x263.png 1024w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.02.11-830x214.png 830w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.02.11-230x59.png 230w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.02.11-350x90.png 350w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.02.11-480x123.png 480w" sizes="(max-width: 1718px) 100vw, 1718px" /></p>
<p>其他爬蟲結果輸出可以參考「<a href="/python-web-crawler-beautifulsoup-%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2/" target="_blank" rel="noopener noreferrer">網路爬蟲 Web Crawler | 資料不求人 基礎篇 | using Python BeautifulSoup</a>」。</p>
<p>&nbsp;</p>
<h2>Text mining 簡易字頻分析 (文字雲 word cloud)</h2>
<h3>4. 使用jieba套件，進行文章中文斷詞分析</h3>
<p>先使用某一篇文章內文為範例，我們使用剛剛新聞清單的<a href="https://tw.news.yahoo.com/%E8%85%B0%E9%A0%B8%E5%B8%B8%E7%96%BC%E7%97%9B%E5%97%8E-%E7%A0%94%E7%A9%B6%E7%99%BC%E7%8F%BE%E9%80%99%E6%88%96%E8%A8%B1%E8%88%87%E7%B3%96%E5%B0%BF%E7%97%85%E6%9C%89%E9%97%9C-090011577.html" target="_blank" rel="noopener noreferrer">第一個連結</a>去得到文章內容。並以該文章內容進行字頻分析(文字雲)。</p><pre class="crayon-plain-tag">url = df['links'][0]
print(url)
r = requests.get(url)
web_content = r.text
soup = BeautifulSoup(web_content,'lxml')</pre><p>看一下文章段落在HTML的規則：</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2652" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.06.00.png" alt="web-crawler-text-mining" width="2522" height="1190" srcset="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.06.00.png 2522w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.06.00-300x142.png 300w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.06.00-768x362.png 768w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.06.00-1024x483.png 1024w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.06.00-830x392.png 830w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.06.00-230x109.png 230w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.06.00-350x165.png 350w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午4.06.00-480x226.png 480w" sizes="(max-width: 2522px) 100vw, 2522px" /></p>
<p>擷取文章內容如下:</p><pre class="crayon-plain-tag">articleContent = soup.find_all('p')
articleContent</pre><p></p><pre class="crayon-plain-tag">[&lt;p&gt;&lt;span class=""&gt;腰頸疼痛是常見的肌肉骨骼疾病，根據統計，大約80%的成年人會經歷腰痛，47%的人會經歷脖子痛。同樣，糖尿病也是一種越來越普遍的慢性病，​​全球大約有3.82億人患有這種代謝疾病。&lt;/span&gt;&lt;/p&gt;,
 &lt;p&gt;近日，一項刊載於《PLOS ONE》期刊的研究指出，與沒有糖尿病的人相比，糖尿病患者發生腰痛的風險要高35%，脖子痛的風險要高24%。糖尿病患者更容易出現慢性軀體疼痛，包括糖尿病周圍神經病變。而且，同時患有糖尿病和肌肉骨骼疼痛，會導致更高程度的疼痛、殘疾和心理困擾，其所帶來的負擔遠遠大於僅患有其中一種疾病。&lt;/p&gt;,
 &lt;p&gt;而糖尿病和背痛也有共同的危險因素，比如說肥胖、缺乏體育。年輕的時候身體質量指數（BMI）越高的人，在晚年患糖尿病的可能性，要高出9倍以上；同樣的，肥胖是導致嚴重腰痛的重要因子。糖尿病患者也不太可能經常參加運動活動，因此有較高的風險發展成慢性肌肉骨骼疾病，如背部和頸部疼痛。&lt;/p&gt;,
 &lt;p&gt;過去的研究表明，糖尿病患者可能會因為繼發性糖尿病相關的腰椎間盤微血管病變，而發展為腰椎間盤疾病。此外，糖尿病動物模型中，椎間盤退變更佳迅速。&lt;/p&gt;,
 &lt;p&gt;該論文的作者Manuela Ferreira副教授說，目前還沒有足夠的證據證明糖尿病與腰頸疼痛之間存在因果關係，但這種積極聯繫值得進一步調查和研究。論文還建議醫護人員，應該考慮對長期頸痛或腰痛患者進行糖尿病篩查。&lt;/p&gt;,
 &lt;p&gt;「越來越多的人同時受到頸背疼痛和糖尿病的折磨，」論文共同作者Paulo Ferreira說道，「所以，值得投入更多的資源來研究它們之間的相互關係。改變糖尿病的治療干預措施可，或許以減少背痛的發病率，反之亦然。」&lt;/p&gt;,
 &lt;p&gt;&lt;strong&gt;參考資料：&lt;/strong&gt;&lt;a class="link rapid-noclick-resp" data-ylk="slk:Study links diabetes and back pain" href="https://medicalxpress.com/news/2019-02-links-diabetes-pain.html" rel="nofollow noopener" target="_blank"&gt;Study links diabetes and back pain&lt;/a&gt;&lt;/p&gt;,
 &lt;p&gt;&lt;strong&gt;期刊小檔案：&lt;/strong&gt;《PLOS ONE》為一份同行評審的開放獲取科學期刊，由公共科學圖書館自2006年發行，為全世界文章刊載數量最多的期刊，所刊載的文章包含科學及醫學各領域的基礎研究。&lt;/p&gt;,
 &lt;p&gt;&lt;span&gt;更多Heho健康網文章&lt;/span&gt;&lt;br/&gt;&lt;a class="link rapid-noclick-resp" data-ylk="slk:糖友肺炎風險高2.8倍 醫：加打肺炎鏈球菌疫苗保健康" href="https://heho.com.tw/archives/40152" rel="nofollow noopener" target="_blank"&gt;糖友肺炎風險高2.8倍 醫：加打肺炎鏈球菌疫苗保健康&lt;/a&gt;&lt;br/&gt;&lt;a class="link rapid-noclick-resp" data-ylk="slk:讓其他細胞分泌胰島素 動物實驗逆轉糖尿病！" href="https://heho.com.tw/archives/39757" rel="nofollow noopener" target="_blank"&gt;讓其他細胞分泌胰島素 動物實驗逆轉糖尿病！&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;,
 &lt;p&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;,
 &lt;p&gt;文／林以璿 圖／許嘉真&lt;/p&gt;]</pre><p>將所有&lt;p&gt;&lt;/p&gt;中的text取出並放進list。</p><pre class="crayon-plain-tag"># 將所有tag p中的text取出並放進list。
article = []
for p in articleContent:
    article.append(p.text)</pre><p>將list中的text元素join合併成一個字串，並以特殊字元&#8217;\n&#8217;來間隔 (主要是印出好看用)</p><pre class="crayon-plain-tag">articleAll = '\n'.join(article)
print(articleAll)</pre><p></p><pre class="crayon-plain-tag">腰頸疼痛是常見的肌肉骨骼疾病，根據統計，大約80%的成年人會經歷腰痛，47%的人會經歷脖子痛。同樣，糖尿病也是一種越來越普遍的慢性病，​​全球大約有3.82億人患有這種代謝疾病。
近日，一項刊載於《PLOS ONE》期刊的研究指出，與沒有糖尿病的人相比，糖尿病患者發生腰痛的風險要高35%，脖子痛的風險要高24%。糖尿病患者更容易出現慢性軀體疼痛，包括糖尿病周圍神經病變。而且，同時患有糖尿病和肌肉骨骼疼痛，會導致更高程度的疼痛、殘疾和心理困擾，其所帶來的負擔遠遠大於僅患有其中一種疾病。
而糖尿病和背痛也有共同的危險因素，比如說肥胖、缺乏體育。年輕的時候身體質量指數（BMI）越高的人，在晚年患糖尿病的可能性，要高出9倍以上；同樣的，肥胖是導致嚴重腰痛的重要因子。糖尿病患者也不太可能經常參加運動活動，因此有較高的風險發展成慢性肌肉骨骼疾病，如背部和頸部疼痛。
過去的研究表明，糖尿病患者可能會因為繼發性糖尿病相關的腰椎間盤微血管病變，而發展為腰椎間盤疾病。此外，糖尿病動物模型中，椎間盤退變更佳迅速。
該論文的作者Manuela Ferreira副教授說，目前還沒有足夠的證據證明糖尿病與腰頸疼痛之間存在因果關係，但這種積極聯繫值得進一步調查和研究。論文還建議醫護人員，應該考慮對長期頸痛或腰痛患者進行糖尿病篩查。
「越來越多的人同時受到頸背疼痛和糖尿病的折磨，」論文共同作者Paulo Ferreira說道，「所以，值得投入更多的資源來研究它們之間的相互關係。改變糖尿病的治療干預措施可，或許以減少背痛的發病率，反之亦然。」
參考資料：Study links diabetes and back pain
期刊小檔案：《PLOS ONE》為一份同行評審的開放獲取科學期刊，由公共科學圖書館自2006年發行，為全世界文章刊載數量最多的期刊，所刊載的文章包含科學及醫學各領域的基礎研究。
更多Heho健康網文章糖友肺炎風險高2.8倍 醫：加打肺炎鏈球菌疫苗保健康讓其他細胞分泌胰島素 動物實驗逆轉糖尿病！</pre><p>載入斷詞分析的套件</p><pre class="crayon-plain-tag">import jieba
import nltk</pre><p>指定字典(使用預設字典)</p><pre class="crayon-plain-tag">jieba.load_userdict('/user_dict.txt') # 輸入自己字典的路徑</pre><p>移除標點符號 punctuation removal</p><pre class="crayon-plain-tag">d = c.replace('[^\w\s]','').replace('／',"").replace('《','').replace('》','').replace('，','').replace('。','').replace('「','').replace('」','').replace('（','').replace('）','').replace('！','').replace('？','').replace('、','').replace('▲','').replace('…','').replace('：','')
print(d)</pre><p></p><pre class="crayon-plain-tag">腰頸疼痛是常見的肌肉骨骼疾病根據統計大約80%的成年人會經歷腰痛47%的人會經歷脖子痛同樣糖尿病也是一種越來越普遍的慢性病​​全球大約有3.82億人患有這種代謝疾病
近日一項刊載於PLOS ONE期刊的研究指出與沒有糖尿病的人相比糖尿病患者發生腰痛的風險要高35%脖子痛的風險要高24%糖尿病患者更容易出現慢性軀體疼痛包括糖尿病周圍神經病變而且同時患有糖尿病和肌肉骨骼疼痛會導致更高程度的疼痛殘疾和心理困擾其所帶來的負擔遠遠大於僅患有其中一種疾病
而糖尿病和背痛也有共同的危險因素比如說肥胖缺乏體育年輕的時候身體質量指數BMI越高的人在晚年患糖尿病的可能性要高出9倍以上；同樣的肥胖是導致嚴重腰痛的重要因子糖尿病患者也不太可能經常參加運動活動因此有較高的風險發展成慢性肌肉骨骼疾病如背部和頸部疼痛
過去的研究表明糖尿病患者可能會因為繼發性糖尿病相關的腰椎間盤微血管病變而發展為腰椎間盤疾病此外糖尿病動物模型中椎間盤退變更佳迅速
該論文的作者Manuela Ferreira副教授說目前還沒有足夠的證據證明糖尿病與腰頸疼痛之間存在因果關係但這種積極聯繫值得進一步調查和研究論文還建議醫護人員應該考慮對長期頸痛或腰痛患者進行糖尿病篩查
越來越多的人同時受到頸背疼痛和糖尿病的折磨論文共同作者Paulo Ferreira說道所以值得投入更多的資源來研究它們之間的相互關係改變糖尿病的治療干預措施可或許以減少背痛的發病率反之亦然
參考資料Study links diabetes and back pain
期刊小檔案PLOS ONE為一份同行評審的開放獲取科學期刊由公共科學圖書館自2006年發行為全世界文章刊載數量最多的期刊所刊載的文章包含科學及醫學各領域的基礎研究
更多Heho健康網文章糖友肺炎風險高2.8倍 醫加打肺炎鏈球菌疫苗保健康讓其他細胞分泌胰島素 動物實驗逆轉糖尿病

文林以璿 圖許嘉真</pre><p>避免過多的文字log訊息出現</p><pre class="crayon-plain-tag">jieba.setLogLevel(20)</pre><p>分別使用不同斷詞模式</p><pre class="crayon-plain-tag">Sentence = jieba.cut(d, cut_all=True)
print('全模式'+": "  + "/ ".join(Sentence) + '\n')   

Sentence = jieba.cut(d, cut_all=False)
print('精確模式'+": " + "/ ".join(Sentence)+ '\n')  

Sentence = jieba.cut(d)  
print('Default為精確模式'+": " + "/ ".join(Sentence)+ '\n')

Sentence = jieba.cut_for_search(d)  
print('搜索引擎模式'+": " + "/ ".join(Sentence)+ '\n')</pre><p></p><pre class="crayon-plain-tag">全模式: 腰/ 頸/ 疼痛/ 是/ 常/ 見/ 的/ 肌肉/ 骨骼/ 疾病/ 病根/ 據/ 統/ 計/ 大/ 約/ 80/ / 的/ 成年/ 成年人/ 會/ 經/ 歷/ 腰痛/ 47/ / 的/ 人/ 會/ 經/ 歷/ 脖子/ 痛/ 同/ 樣/ 糖尿/ 糖尿病/ 也/ 是/ 一/ 種/ 越/ 來/ 越/ 普遍/ 的/ 慢性/ 慢性病/ 性病/ / / / 全球/ 大/ 約/ 有/ 3/ 82/ 億/ 人/ 患有/ 這/ 種/ 代/ 謝/ 疾病/ 
/ 近日/ 一/ 項/ 刊/ 載/ 於/ PLOS/ ONE/ 期刊/ 的/ 研究/ 指出/ 與/ 沒/ 有/ 糖尿/ 糖尿病/ 的/ 人/ 相比/ 糖尿/ 糖尿病/ 病患/ 病患者/ 患者/ 發/ 生/ 腰痛/ 的/ 風/ 險/ 要/ 高/ 35/ / 脖子/ 痛/ 的/ 風/ 險/ 要/ 高/ 24/ / 糖尿/ 糖尿病/ 病患/ 病患者/ 患者/ 更/ 容易/ 出/ 現/ 慢性/ 軀/ 體/ 疼痛/ 包括/ 糖尿/ 糖尿病/ 周/ 圍/ 神/ 經/ 病/ 變/ 而且/ 同/ 時/ 患有/ 糖尿/ 糖尿病/ 和/ 肌肉/ 骨骼/ 疼痛/ 會/ 導/ 致/ 更/ 高程/ 程度/ 的/ 疼痛/ 殘/ 疾/ 和/ 心理/ 困/ 擾/ 其/ 所/ 帶/ 來/ 的/ 負/ 擔/ 遠/ 遠/ 大/ 於/ 僅/ 患有/ 其中/ 一/ 種/ 疾病/ 
/ 而/ 糖尿/ 糖尿病/ 和/ 背痛/ 也/ 有/ 共同/ 的/ 危/ 險/ 因素/ 比如/ 說/ 肥胖/ 缺乏/ 體/ 育/ 年/ 輕/ 的/ 時/ 候/ 身/ 體/ 質/ 量/ 指/ 數/ BMI/ 越/ 高/ 的/ 人/ 在/ 晚年/ 患/ 糖尿/ 糖尿病/ 的/ 可能/ 可能性/ 要/ 高出/ 9/ 倍/ 以上/ / / 同/ 樣/ 的/ 肥胖/ 是/ 導/ 致/ 嚴/ 重/ 腰痛/ 的/ 重要/ 因子/ 糖尿/ 糖尿病/ 病患/ 病患者/ 患者/ 也/ 不太可能/ 可能/ 經/ 常/ 參/ 加/ 運/ 動/ 活/ 動/ 因此/ 有/ 較/ 高/ 的/ 風/ 險/ 發/ 展/ 成/ 慢性/ 肌肉/ 骨骼/ 疾病/ 如/ 背部/ 和/ 頸/ 部/ 疼痛/ 
/ 過/ 去/ 的/ 研究/ 表明/ 糖尿/ 糖尿病/ 病患/ 病患者/ 患者/ 可能/ 會/ 因/ 為/ 繼/ 發/ 性/ 糖尿/ 糖尿病/ 相/ 關/ 的/ 腰椎/ 間/ 盤/ 微血管/ 血管/ 血管病/ 變/ 而/ 發/ 展/ 為/ 腰椎/ 間/ 盤/ 疾病/ 此外/ 糖尿/ 糖尿病/ 動/ 物/ 模型/ 中/ 椎/ 間/ 盤/ 退/ 變/ 更佳/ 迅速/ 
/ 該/ 論/ 文/ 的/ 作者/ Manuela/ Ferreira/ 副教授/ 教授/ 說/ 目前/ 還/ 沒/ 有/ 足/ 夠/ 的/ 證/ 據/ 證/ 明/ 糖尿/ 糖尿病/ 與/ 腰/ 頸/ 疼痛/ 之/ 間/ 存在/ 因果/ 關/ 係/ 但/ 這/ 種/ 積/ 極/ 聯/ 繫/ 值得/ 進/ 一步/ 調/ 查/ 和/ 研究/ 論/ 文/ 還/ 建/ 議/ 醫/ 護/ 人/ 員/ 應/ 該/ 考/ 慮/ 對/ 長/ 期/ 頸/ 痛/ 或/ 腰痛/ 患者/ 進/ 行/ 糖尿/ 糖尿病/ 篩/ 查/ 
/ 越/ 來/ 越多/ 的/ 人/ 同/ 時/ 受到/ 頸/ 背/ 疼痛/ 和/ 糖尿/ 糖尿病/ 的/ 折磨/ 論/ 文/ 共同/ 作者/ Paulo/ Ferreira/ 說/ 道/ 所以/ 值得/ 投入/ 更多/ 的/ 資/ 源/ 來/ 研究/ 它/ 們/ 之/ 間/ 的/ 相互/ 關/ 係/ 改/ 變/ 糖尿/ 糖尿病/ 的/ 治療/ 干/ 預/ 措施/ 可/ 或/ 許/ 以/ 減/ 少背/ 背痛/ 的/ 發/ 病/ 率/ 反之/ 反之亦然/ 亦然/ 
/ 參/ 考/ 資/ 料/ Study/ links/ diabetes/ and/ back/ pain
/ 期刊/ 小/ 檔/ 案/ PLOS/ ONE/ 為/ 一份/ 同行/ 評/ 審/ 的/ 開/ 放/ 獲/ 取/ 科/ 學/ 期刊/ 由/ 公共/ 科/ 學/ 圖/ 書/ 館/ 自/ 2006/ 年/ 發/ 行/ 為/ 全世界/ 世界/ 文章/ 刊/ 載/ 數/ 量/ 最多/ 的/ 期刊/ 所/ 刊/ 載/ 的/ 文章/ 包含/ 科/ 學/ 及/ 醫/ 學/ 各/ 領/ 域/ 的/ 基/ 礎/ 研究/ 
/ 更多/ Heho/ 健康/ 網/ 文章/ 糖/ 友/ 肺炎/ 風/ 險/ 高/ 2/ 8/ 倍/ / / 醫/ 加打/ 肺炎/ 鏈/ 球菌/ 疫苗/ 保健/ 健康/ 讓/ 其他/ 細/ 胞/ 分泌/ 胰/ 島/ 素/ / / 動/ 物/ 實/ 驗/ 逆/ 轉/ 糖尿/ 糖尿病/ 

/ 文林/ 以/ 璿/ / / 圖/ 許/ 嘉/ 真

精確模式: 腰頸/ 疼痛/ 是/ 常見/ 的/ 肌肉/ 骨骼/ 疾病/ 根據/ 統計大約/ 80%/ 的/ 成年人/ 會經歷/ 腰痛/ 47%/ 的/ 人會/ 經歷/ 脖子/ 痛同樣/ 糖尿病/ 也/ 是/ 一種/ 越來/ 越/ 普遍/ 的/ 慢性病/ ​/ ​/ 全球/ 大約/ 有/ 3.82/ 億人/ 患有/ 這種/ 代謝/ 疾病/ 
/ 近日/ 一項/ 刊載/ 於/ PLOS/  / ONE/ 期刊/ 的/ 研究/ 指出/ 與/ 沒/ 有/ 糖尿病/ 的/ 人/ 相比/ 糖尿病/ 患者/ 發生/ 腰痛/ 的/ 風險/ 要/ 高/ 35%/ 脖子/ 痛/ 的/ 風險/ 要/ 高/ 24%/ 糖尿病/ 患者/ 更/ 容易/ 出現/ 慢性/ 軀體/ 疼痛/ 包括/ 糖尿病/ 周圍/ 神經/ 病變/ 而且/ 同時/ 患有/ 糖尿病/ 和/ 肌肉/ 骨骼/ 疼痛/ 會導致/ 更/ 高/ 程度/ 的/ 疼痛/ 殘疾/ 和/ 心理/ 困擾/ 其/ 所/ 帶/ 來/ 的/ 負擔/ 遠遠大/ 於僅/ 患有/ 其中/ 一種/ 疾病/ 
/ 而/ 糖尿病/ 和/ 背痛/ 也/ 有/ 共同/ 的/ 危險/ 因素/ 比如/ 說/ 肥胖/ 缺乏/ 體育/ 年/ 輕/ 的/ 時候/ 身體/ 質量/ 指數/ BMI/ 越高/ 的/ 人/ 在/ 晚年/ 患/ 糖尿病/ 的/ 可能性/ 要/ 高出/ 9/ 倍/ 以上/ ；/ 同樣/ 的/ 肥胖/ 是/ 導致/ 嚴重/ 腰痛/ 的/ 重要/ 因子/ 糖尿病/ 患者/ 也/ 不太可能/ 經常/ 參加/ 運動/ 活動/ 因此/ 有/ 較/ 高/ 的/ 風險/ 發展/ 成/ 慢性/ 肌肉/ 骨骼/ 疾病/ 如/ 背部/ 和/ 頸部/ 疼痛/ 
/ 過去/ 的/ 研究/ 表明/ 糖尿病/ 患者/ 可能/ 會/ 因為/ 繼發性/ 糖尿病/ 相關/ 的/ 腰椎/ 間盤/ 微血管/ 病變/ 而/ 發展/ 為/ 腰椎/ 間盤/ 疾病/ 此外/ 糖尿病/ 動物/ 模型/ 中椎間/ 盤/ 退變/ 更佳/ 迅速/ 
/ 該論文/ 的/ 作者/ Manuela/  / Ferreira/ 副教授/ 說/ 目前/ 還沒有/ 足夠/ 的/ 證據/ 證明/ 糖尿病/ 與/ 腰/ 頸/ 疼痛/ 之間/ 存在/ 因果/ 關/ 係/ 但/ 這種/ 積極/ 聯/ 繫/ 值得/ 進/ 一步/ 調查/ 和/ 研究/ 論文/ 還建議/ 醫護/ 人員應/ 該/ 考慮/ 對長/ 期頸痛/ 或/ 腰痛/ 患者/ 進行/ 糖尿病/ 篩查/ 
/ 越來/ 越/ 多/ 的/ 人/ 同時/ 受到/ 頸/ 背/ 疼痛/ 和/ 糖尿病/ 的/ 折磨/ 論文/ 共同/ 作者/ Paulo/  / Ferreira/ 說道/ 所以/ 值得/ 投入/ 更/ 多/ 的/ 資源/ 來/ 研究/ 它們/ 之間/ 的/ 相互/ 關/ 係/ 改變/ 糖尿病/ 的/ 治療/ 干預/ 措施/ 可/ 或/ 許以/ 減少/ 背痛/ 的/ 發病率/ 反之亦然/ 
/ 參考/ 資料/ Study/  / links/  / diabetes/  / and/  / back/  / pain/ 
/ 期刊/ 小檔案/ PLOS/  / ONE/ 為/ 一份/ 同行/ 評審/ 的/ 開放/ 獲取/ 科學/ 期刊/ 由/ 公共/ 科學/ 圖書館/ 自/ 2006/ 年/ 發行/ 為/ 全世界/ 文章/ 刊載/ 數量/ 最/ 多/ 的/ 期刊/ 所刊/ 載/ 的/ 文章/ 包含/ 科學及/ 醫學/ 各/ 領域/ 的/ 基礎/ 研究/ 
/ 更/ 多/ Heho/ 健康/ 網/ 文章/ 糖友/ 肺炎/ 風險/ 高/ 2.8/ 倍/  / 醫加/ 打/ 肺炎/ 鏈/ 球菌/ 疫苗/ 保/ 健康/ 讓/ 其他/ 細胞/ 分泌/ 胰島素/  / 動物/ 實驗/ 逆轉/ 糖尿病/ 
/ 
/ 文林/ 以/ 璿/  / 圖許/ 嘉真

Default為精確模式: 腰頸/ 疼痛/ 是/ 常見/ 的/ 肌肉/ 骨骼/ 疾病/ 根據/ 統計大約/ 80%/ 的/ 成年人/ 會經歷/ 腰痛/ 47%/ 的/ 人會/ 經歷/ 脖子/ 痛同樣/ 糖尿病/ 也/ 是/ 一種/ 越來/ 越/ 普遍/ 的/ 慢性病/ ​/ ​/ 全球/ 大約/ 有/ 3.82/ 億人/ 患有/ 這種/ 代謝/ 疾病/ 
/ 近日/ 一項/ 刊載/ 於/ PLOS/  / ONE/ 期刊/ 的/ 研究/ 指出/ 與/ 沒/ 有/ 糖尿病/ 的/ 人/ 相比/ 糖尿病/ 患者/ 發生/ 腰痛/ 的/ 風險/ 要/ 高/ 35%/ 脖子/ 痛/ 的/ 風險/ 要/ 高/ 24%/ 糖尿病/ 患者/ 更/ 容易/ 出現/ 慢性/ 軀體/ 疼痛/ 包括/ 糖尿病/ 周圍/ 神經/ 病變/ 而且/ 同時/ 患有/ 糖尿病/ 和/ 肌肉/ 骨骼/ 疼痛/ 會導致/ 更/ 高/ 程度/ 的/ 疼痛/ 殘疾/ 和/ 心理/ 困擾/ 其/ 所/ 帶/ 來/ 的/ 負擔/ 遠遠大/ 於僅/ 患有/ 其中/ 一種/ 疾病/ 
/ 而/ 糖尿病/ 和/ 背痛/ 也/ 有/ 共同/ 的/ 危險/ 因素/ 比如/ 說/ 肥胖/ 缺乏/ 體育/ 年/ 輕/ 的/ 時候/ 身體/ 質量/ 指數/ BMI/ 越高/ 的/ 人/ 在/ 晚年/ 患/ 糖尿病/ 的/ 可能性/ 要/ 高出/ 9/ 倍/ 以上/ ；/ 同樣/ 的/ 肥胖/ 是/ 導致/ 嚴重/ 腰痛/ 的/ 重要/ 因子/ 糖尿病/ 患者/ 也/ 不太可能/ 經常/ 參加/ 運動/ 活動/ 因此/ 有/ 較/ 高/ 的/ 風險/ 發展/ 成/ 慢性/ 肌肉/ 骨骼/ 疾病/ 如/ 背部/ 和/ 頸部/ 疼痛/ 
/ 過去/ 的/ 研究/ 表明/ 糖尿病/ 患者/ 可能/ 會/ 因為/ 繼發性/ 糖尿病/ 相關/ 的/ 腰椎/ 間盤/ 微血管/ 病變/ 而/ 發展/ 為/ 腰椎/ 間盤/ 疾病/ 此外/ 糖尿病/ 動物/ 模型/ 中椎間/ 盤/ 退變/ 更佳/ 迅速/ 
/ 該論文/ 的/ 作者/ Manuela/  / Ferreira/ 副教授/ 說/ 目前/ 還沒有/ 足夠/ 的/ 證據/ 證明/ 糖尿病/ 與/ 腰/ 頸/ 疼痛/ 之間/ 存在/ 因果/ 關/ 係/ 但/ 這種/ 積極/ 聯/ 繫/ 值得/ 進/ 一步/ 調查/ 和/ 研究/ 論文/ 還建議/ 醫護/ 人員應/ 該/ 考慮/ 對長/ 期頸痛/ 或/ 腰痛/ 患者/ 進行/ 糖尿病/ 篩查/ 
/ 越來/ 越/ 多/ 的/ 人/ 同時/ 受到/ 頸/ 背/ 疼痛/ 和/ 糖尿病/ 的/ 折磨/ 論文/ 共同/ 作者/ Paulo/  / Ferreira/ 說道/ 所以/ 值得/ 投入/ 更/ 多/ 的/ 資源/ 來/ 研究/ 它們/ 之間/ 的/ 相互/ 關/ 係/ 改變/ 糖尿病/ 的/ 治療/ 干預/ 措施/ 可/ 或/ 許以/ 減少/ 背痛/ 的/ 發病率/ 反之亦然/ 
/ 參考/ 資料/ Study/  / links/  / diabetes/  / and/  / back/  / pain/ 
/ 期刊/ 小檔案/ PLOS/  / ONE/ 為/ 一份/ 同行/ 評審/ 的/ 開放/ 獲取/ 科學/ 期刊/ 由/ 公共/ 科學/ 圖書館/ 自/ 2006/ 年/ 發行/ 為/ 全世界/ 文章/ 刊載/ 數量/ 最/ 多/ 的/ 期刊/ 所刊/ 載/ 的/ 文章/ 包含/ 科學及/ 醫學/ 各/ 領域/ 的/ 基礎/ 研究/ 
/ 更/ 多/ Heho/ 健康/ 網/ 文章/ 糖友/ 肺炎/ 風險/ 高/ 2.8/ 倍/  / 醫加/ 打/ 肺炎/ 鏈/ 球菌/ 疫苗/ 保/ 健康/ 讓/ 其他/ 細胞/ 分泌/ 胰島素/  / 動物/ 實驗/ 逆轉/ 糖尿病/ 
/ 
/ 文林/ 以/ 璿/  / 圖許/ 嘉真

搜索引擎模式: 腰頸/ 疼痛/ 是/ 常見/ 的/ 肌肉/ 骨骼/ 疾病/ 根據/ 統計大約/ 80%/ 的/ 成年/ 成年人/ 會經歷/ 腰痛/ 47%/ 的/ 人會/ 經歷/ 脖子/ 痛同樣/ 糖尿/ 糖尿病/ 也/ 是/ 一種/ 越來/ 越/ 普遍/ 的/ 慢性/ 性病/ 慢性病/ ​/ ​/ 全球/ 大約/ 有/ 3.82/ 億人/ 患有/ 這種/ 代謝/ 疾病/ 
/ 近日/ 一項/ 刊載/ 於/ PLOS/  / ONE/ 期刊/ 的/ 研究/ 指出/ 與/ 沒/ 有/ 糖尿/ 糖尿病/ 的/ 人/ 相比/ 糖尿/ 糖尿病/ 患者/ 發生/ 腰痛/ 的/ 風險/ 要/ 高/ 35%/ 脖子/ 痛/ 的/ 風險/ 要/ 高/ 24%/ 糖尿/ 糖尿病/ 患者/ 更/ 容易/ 出現/ 慢性/ 軀體/ 疼痛/ 包括/ 糖尿/ 糖尿病/ 周圍/ 神經/ 病變/ 而且/ 同時/ 患有/ 糖尿/ 糖尿病/ 和/ 肌肉/ 骨骼/ 疼痛/ 會導致/ 更/ 高/ 程度/ 的/ 疼痛/ 殘疾/ 和/ 心理/ 困擾/ 其/ 所/ 帶/ 來/ 的/ 負擔/ 遠遠大/ 於僅/ 患有/ 其中/ 一種/ 疾病/ 
/ 而/ 糖尿/ 糖尿病/ 和/ 背痛/ 也/ 有/ 共同/ 的/ 危險/ 因素/ 比如/ 說/ 肥胖/ 缺乏/ 體育/ 年/ 輕/ 的/ 時候/ 身體/ 質量/ 指數/ BMI/ 越高/ 的/ 人/ 在/ 晚年/ 患/ 糖尿/ 糖尿病/ 的/ 可能/ 可能性/ 要/ 高出/ 9/ 倍/ 以上/ ；/ 同樣/ 的/ 肥胖/ 是/ 導致/ 嚴重/ 腰痛/ 的/ 重要/ 因子/ 糖尿/ 糖尿病/ 患者/ 也/ 可能/ 不太可能/ 經常/ 參加/ 運動/ 活動/ 因此/ 有/ 較/ 高/ 的/ 風險/ 發展/ 成/ 慢性/ 肌肉/ 骨骼/ 疾病/ 如/ 背部/ 和/ 頸部/ 疼痛/ 
/ 過去/ 的/ 研究/ 表明/ 糖尿/ 糖尿病/ 患者/ 可能/ 會/ 因為/ 繼發性/ 糖尿/ 糖尿病/ 相關/ 的/ 腰椎/ 間盤/ 血管/ 微血管/ 病變/ 而/ 發展/ 為/ 腰椎/ 間盤/ 疾病/ 此外/ 糖尿/ 糖尿病/ 動物/ 模型/ 中椎間/ 盤/ 退變/ 更佳/ 迅速/ 
/ 該論文/ 的/ 作者/ Manuela/  / Ferreira/ 教授/ 副教授/ 說/ 目前/ 還沒有/ 足夠/ 的/ 證據/ 證明/ 糖尿/ 糖尿病/ 與/ 腰/ 頸/ 疼痛/ 之間/ 存在/ 因果/ 關/ 係/ 但/ 這種/ 積極/ 聯/ 繫/ 值得/ 進/ 一步/ 調查/ 和/ 研究/ 論文/ 還建議/ 醫護/ 人員應/ 該/ 考慮/ 對長/ 期頸痛/ 或/ 腰痛/ 患者/ 進行/ 糖尿/ 糖尿病/ 篩查/ 
/ 越來/ 越/ 多/ 的/ 人/ 同時/ 受到/ 頸/ 背/ 疼痛/ 和/ 糖尿/ 糖尿病/ 的/ 折磨/ 論文/ 共同/ 作者/ Paulo/  / Ferreira/ 說道/ 所以/ 值得/ 投入/ 更/ 多/ 的/ 資源/ 來/ 研究/ 它們/ 之間/ 的/ 相互/ 關/ 係/ 改變/ 糖尿/ 糖尿病/ 的/ 治療/ 干預/ 措施/ 可/ 或/ 許以/ 減少/ 背痛/ 的/ 發病率/ 反之/ 亦然/ 反之亦然/ 
/ 參考/ 資料/ Study/  / links/  / diabetes/  / and/  / back/  / pain/ 
/ 期刊/ 小檔案/ PLOS/  / ONE/ 為/ 一份/ 同行/ 評審/ 的/ 開放/ 獲取/ 科學/ 期刊/ 由/ 公共/ 科學/ 圖書館/ 自/ 2006/ 年/ 發行/ 為/ 世界/ 全世界/ 文章/ 刊載/ 數量/ 最/ 多/ 的/ 期刊/ 所刊/ 載/ 的/ 文章/ 包含/ 科學及/ 醫學/ 各/ 領域/ 的/ 基礎/ 研究/ 
/ 更/ 多/ Heho/ 健康/ 網/ 文章/ 糖友/ 肺炎/ 風險/ 高/ 2.8/ 倍/  / 醫加/ 打/ 肺炎/ 鏈/ 球菌/ 疫苗/ 保/ 健康/ 讓/ 其他/ 細胞/ 分泌/ 胰島素/  / 動物/ 實驗/ 逆轉/ 糖尿/ 糖尿病/ 
/ 
/ 文林/ 以/ 璿/  / 圖許/ 嘉真</pre><p></p>
<h3>5.將字詞頻率以word cloud(文字雲)呈現</h3>
<p>將字詞頻率以文字雲繪出<br />
載入文字雲套件</p><pre class="crayon-plain-tag">import matplotlib.pyplot as plt
from wordcloud import WordCloud</pre><p>設定停用字stopwords(排除常用詞、無法代表特殊意義的字詞)，投入WordClour()函數中，其中參數stopwords形式可以是：</p>
<ul>
<li>dictionary {key : value}的格式</li>
<li>set {&#8216;a&#8217;, &#8216;b&#8217;, &#8216;c&#8217;, &#8230;}的格式</li>
</ul>
<p>*stopwords中， \n 是前面因為避免印出一長串沒有換行符號的article而加入的，故這邊再另外挑除</p><pre class="crayon-plain-tag"># 設定停用字詞 
stopwords = {}.fromkeys(["也","但","來","個","再","的","和","是","有","更","會","可能","有何","從","對","就", '\n','越','為','這種','多','越來',' '])
#stopwords = {"也","但","來","個","再","的","和","是","有","更","會","可能","有何","從","對","就",'\n','越','為','這種','多','越來',' '}</pre><p><strong>產生文字雲(方法1): 使用<span style="color: #9f6ad4;">generate_from_frequencies()</span></strong></p>
<ul>
<li><span style="color: #9f6ad4;">generate_from_frequencies()方法會忽略stopwords參數的部分</span>，<span style="text-decoration: underline;">故在產生hash dictionary字詞頻率的時候，須先自行處理挑除stopwords的部分</span>。</li>
</ul>
<p></p><pre class="crayon-plain-tag"># 使用cut_for_search(搜尋引擎)斷詞模式並產生字詞頻率的dictionary (並剔除stopwords的計算)
Sentence = jieba.cut_for_search(d) 

# create a python dictionary
hash = {}
for item in Sentence:

    if item in stopwords:
        continue
    
    if item in hash:
        hash[item] += 1
    else:
        hash[item] = 1

# 文字雲樣式設定
wc = WordCloud(font_path="/Users/hsuanlee/Library/Fonts/NotoSansCJKtc-Regular.otf", #設置字體
               background_color="white", #背景顏色
               max_words = 2000 ,        #文字雲顯示最大詞數
               stopwords=stopwords)      #停用字詞

# 使用dictionary的內容產生文字雲
wc.generate_from_frequencies(hash)

# 視覺化呈現
plt.imshow(wc)
plt.axis("off")
plt.figure(figsize=(20,10), dpi =200)
plt.show()</pre><p><img loading="lazy" class="alignnone size-full wp-image-2699" src="/wp-content/uploads/2019/03/文章文字雲3.png" alt="文章文字雲3" width="385" height="202" srcset="/wp-content/uploads/2019/03/文章文字雲3.png 385w, /wp-content/uploads/2019/03/文章文字雲3-300x157.png 300w, /wp-content/uploads/2019/03/文章文字雲3-230x121.png 230w, /wp-content/uploads/2019/03/文章文字雲3-350x184.png 350w" sizes="(max-width: 385px) 100vw, 385px" /></p>
<p><strong>產生文字雲(方法2): 使用generate_from_text()</strong></p>
<ul>
<li>由於generate_from_text()方法會採納stopwords參數，故事前不需要特別對text做stopwords的挑除</li>
</ul>
<p></p><pre class="crayon-plain-tag">Sentence = jieba.cut_for_search(d) 
text = ' '.join(Sentence)

# 文字雲樣式設定
wc = WordCloud(font_path="/Users/hsuanlee/Library/Fonts/NotoSansCJKtc-Regular.otf", #設置字體
               background_color="white", #背景顏色
               max_words = 2000 ,        #文字雲顯示最大詞數
               stopwords=stopwords)      #停用字詞

# 直接使用結巴斷詞後的文字來產生文字雲
wc.generate_from_text(text)

# 視覺化呈現
plt.imshow(wc)
plt.axis("off")
plt.figure(figsize=(20,10), dpi =200)
plt.show()</pre><p><img loading="lazy" class="alignnone size-full wp-image-2700" src="/wp-content/uploads/2019/03/文章文字雲4.png" alt="文章文字雲4" width="385" height="202" srcset="/wp-content/uploads/2019/03/文章文字雲4.png 385w, /wp-content/uploads/2019/03/文章文字雲4-300x157.png 300w, /wp-content/uploads/2019/03/文章文字雲4-230x121.png 230w, /wp-content/uploads/2019/03/文章文字雲4-350x184.png 350w" sizes="(max-width: 385px) 100vw, 385px" /></p>
<h3>6. 將dictionary轉換成data frame(並以key當作row: orient = &#8216;index&#8217;)</h3>
<p>將字詞頻率統計表依照「詞頻」由多至寡排列。</p><pre class="crayon-plain-tag">artDf = pd.DataFrame.from_dict(hash, orient='index', columns = ['詞頻'])
artDf.sort_values(by= ['詞頻'], ascending= False)</pre><p><img loading="lazy" class="alignnone size-full wp-image-2701" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-03-下午12.06.24.png" alt="螢幕快照 2019-03-03 下午12.06.24" width="101" height="295" /></p>
<hr />
<p>文章參考連結：</p>
<h3><a title="Python網路爬蟲：大數據擷取、清洗、儲存與分析：王者歸來" href="https://tinyurl.com/yc6la3vd" target="_blank" rel="mid_name noopener noreferrer"><span style="font-size: 12pt;">Python<em>網路</em><em>爬蟲</em>：大數據擷取、清洗、儲存與分析：王者歸來</span></a></h3>
<p><a href="https://amueller.github.io/word_cloud/generated/wordcloud.WordCloud.html#wordcloud.WordCloud.generate_from_frequencies" target="_blank" rel="noopener noreferrer">wordcloud.WordCloud</a></p>
<hr />
<p>更多Python網路爬蟲學習筆記：</p>
<p><a href="/python-web-crawler-beautifulsoup-%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2/" target="_blank" rel="noopener noreferrer">網路爬蟲 Web Crawler | 資料不求人 基礎篇 | using Python BeautifulSoup</a></p>
<p><a href="/%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2-web-crawler-python-yahoo-movies/" target="_blank" rel="noopener noreferrer">網路爬蟲 web crawler | 奇摩電影 yahoo movies | using Python</a></p>
<p><a href="/%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2-web-crawler-text-mining-python/" target="_blank" rel="noopener noreferrer">Text Mining &amp; 網路爬蟲 web crawler | Google新聞與文章文字雲 | Python</a></p>
<p>這篇文章 <a rel="nofollow" href="/%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2-web-crawler-text-mining-python/">Text Mining &#038; 網路爬蟲 web crawler | Google新聞與文章文字雲 | Python</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></content:encoded>
					
					<wfw:commentRss>/%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2-web-crawler-text-mining-python/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>網路爬蟲 web crawler &#124; 奇摩電影 yahoo movies &#124; using Python</title>
		<link>/%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2-web-crawler-python-yahoo-movies/</link>
					<comments>/%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2-web-crawler-python-yahoo-movies/#comments</comments>
		
		<dc:creator><![CDATA[jamleecute]]></dc:creator>
		<pubDate>Sun, 03 Mar 2019 03:12:25 +0000</pubDate>
				<category><![CDATA[ 程式與統計]]></category>
		<category><![CDATA[資料處理]]></category>
		<guid isPermaLink="false">/?p=2603</guid>

					<description><![CDATA[<p>本篇學習筆記將要示範如何使用 Python 來執行 網路爬蟲 web crawler，並以爬取雅虎奇摩電影的「每週新片」頁面資訊為例。筆記包含以下部分：(1)解 [&#8230;]</p>
<p>這篇文章 <a rel="nofollow" href="/%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2-web-crawler-python-yahoo-movies/">網路爬蟲 web crawler | 奇摩電影 yahoo movies | using Python</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></description>
										<content:encoded><![CDATA[<p>本篇學習筆記將要示範如何使用 Python 來執行 網路爬蟲 web crawler，並以爬取雅虎奇摩電影的「<a href="https://movies.yahoo.com.tw/movie_thisweek.html" target="_blank" rel="noreferrer noopener" aria-label="每週新片 (在新分頁中開啟)">每週新片</a>」頁面資訊為例。筆記包含以下部分：(1)解讀網頁資訊 (2) 萃取資訊 (3) 將資訊整理成data frame (4) 將電影爬蟲寫成函式 (5) 自動化判斷所有分頁url並套用電影爬蟲函數。</p>
<h3>(1) 解讀網頁資訊</h3>
<h4>載入所需套件</h4>
<p></p><pre class="crayon-plain-tag"># import libraries
import pandas as pd
import requests
from bs4 import BeautifulSoup</pre><p></p>
<h4>指定URL資訊</h4>
<p></p><pre class="crayon-plain-tag"># 指定所要爬網的URL
url = 'https://movies.yahoo.com.tw/movie_thisweek.html'
# GET request from url and parse via BeautifulSoup
r = requests.get(url)
# 擷取request回傳的文字部分
web_content = r.text</pre><p></p>
<h4>解讀(parse)網頁HTML</h4>
<p></p><pre class="crayon-plain-tag"># 使用BeautifulSoup來parse HTMl
soup = BeautifulSoup(web_content,'lxml')</pre><p></p>
<h3></h3>
<h3>(2) 將「每週新片」的中英文片名、電影介紹、預告片連結爬下來</h3>
<h4>2-1. 中英文片名</h4>
<p>先找到中英文片名在html架構中的規則(可<strong><span style="color: #9f6ad4;">右鍵點擊</span></strong>感興趣物件，並選擇「<span style="color: #9f6ad4;"><strong>檢查</strong></span>」)(如下圖)。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2628" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午12.54.30.png" alt="網路爬蟲-web-crawler" width="2344" height="1106" srcset="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午12.54.30.png 2344w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午12.54.30-300x142.png 300w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午12.54.30-768x362.png 768w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午12.54.30-1024x483.png 1024w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午12.54.30-830x392.png 830w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午12.54.30-230x109.png 230w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午12.54.30-350x165.png 350w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午12.54.30-480x226.png 480w" sizes="(max-width: 2344px) 100vw, 2344px" /></p>
<p>並使用.find_all()找出soup中物件為&#8217;div&#8217;且class_類別為&#8221;release_movie_name&#8221;的所有元素，集結成一個list (named newMovie2)，每個元素彼此使用逗號間隔。</p><pre class="crayon-plain-tag">newMovie2 = soup.find_all('div', class_ = "release_movie_name")
newMovie2</pre><p></p><pre class="crayon-plain-tag">[&lt;div class="release_movie_name"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','為副不仁']" href="https://movies.yahoo.com.tw/movieinfo_main/%E7%82%BA%E5%89%AF%E4%B8%8D%E4%BB%81-vice-8963"&gt;
                   為副不仁&lt;/a&gt;
 &lt;div class="en"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','為副不仁']" href="https://movies.yahoo.com.tw/movieinfo_main/%E7%82%BA%E5%89%AF%E4%B8%8D%E4%BB%81-vice-8963"&gt;
                     Vice&lt;/a&gt;
 &lt;/div&gt;
 &lt;dl class="levelbox"&gt;
 &lt;dt&gt;
 &lt;div class="level_name"&gt;期待度&lt;/div&gt;
 &lt;div class="leveltext"&gt;
 &lt;span&gt;62%&lt;/span&gt;
                     網友想看
                   &lt;/div&gt;
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;div class="level_name"&gt;滿意度&lt;/div&gt;
 &lt;div class="leveltext starwithnum"&gt;
 &lt;span class="count" data-num="3.4" data-run="0"&gt;0&lt;/span&gt;&lt;span&gt;分&lt;/span&gt;
 &lt;div class="starbox starnumbox"&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/dd&gt;
 &lt;/dl&gt;
 &lt;/div&gt;, &lt;div class="release_movie_name"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','吉娃娃羅曼死']" href="https://movies.yahoo.com.tw/movieinfo_main/%E5%90%89%E5%A8%83%E5%A8%83%E7%BE%85%E6%9B%BC%E6%AD%BB-chiwawa-9256"&gt;
                   吉娃娃羅曼死&lt;/a&gt;
 &lt;div class="en"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','吉娃娃羅曼死']" href="https://movies.yahoo.com.tw/movieinfo_main/%E5%90%89%E5%A8%83%E5%A8%83%E7%BE%85%E6%9B%BC%E6%AD%BB-chiwawa-9256"&gt;
                     Chiwawa&lt;/a&gt;
 &lt;/div&gt;
 &lt;dl class="levelbox"&gt;
 &lt;dt&gt;
 &lt;div class="level_name"&gt;期待度&lt;/div&gt;
 &lt;div class="leveltext"&gt;
 &lt;span&gt;43%&lt;/span&gt;
                     網友想看
                   &lt;/div&gt;
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;div class="level_name"&gt;滿意度&lt;/div&gt;
 &lt;div class="leveltext starwithnum"&gt;
 &lt;span class="count" data-num="3.8" data-run="0"&gt;0&lt;/span&gt;&lt;span&gt;分&lt;/span&gt;
 &lt;div class="starbox starnumbox"&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/dd&gt;
 &lt;/dl&gt;
 &lt;/div&gt;, &lt;div class="release_movie_name"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','酷寒殺手']" href="https://movies.yahoo.com.tw/movieinfo_main/%E9%85%B7%E5%AF%92%E6%AE%BA%E6%89%8B-cold-pursuit-9377"&gt;
                   酷寒殺手&lt;/a&gt;
 &lt;div class="en"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','酷寒殺手']" href="https://movies.yahoo.com.tw/movieinfo_main/%E9%85%B7%E5%AF%92%E6%AE%BA%E6%89%8B-cold-pursuit-9377"&gt;
                     Cold Pursuit&lt;/a&gt;
 &lt;/div&gt;
 &lt;dl class="levelbox"&gt;
 &lt;dt&gt;
 &lt;div class="level_name"&gt;期待度&lt;/div&gt;
 &lt;div class="leveltext"&gt;
 &lt;span&gt;87%&lt;/span&gt;
                     網友想看
                   &lt;/div&gt;
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;div class="level_name"&gt;滿意度&lt;/div&gt;
 &lt;div class="leveltext starwithnum"&gt;
 &lt;span class="count" data-num="3.4" data-run="0"&gt;0&lt;/span&gt;&lt;span&gt;分&lt;/span&gt;
 &lt;div class="starbox starnumbox"&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/dd&gt;
 &lt;/dl&gt;
 &lt;/div&gt;, &lt;div class="release_movie_name"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','法律女王']" href="https://movies.yahoo.com.tw/movieinfo_main/%E6%B3%95%E5%BE%8B%E5%A5%B3%E7%8E%8B-on-the-basis-of-sex-9389"&gt;
                   法律女王&lt;/a&gt;
 &lt;div class="en"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','法律女王']" href="https://movies.yahoo.com.tw/movieinfo_main/%E6%B3%95%E5%BE%8B%E5%A5%B3%E7%8E%8B-on-the-basis-of-sex-9389"&gt;
                     On the Basis of Sex&lt;/a&gt;
 &lt;/div&gt;
 &lt;dl class="levelbox"&gt;
 &lt;dt&gt;
 &lt;div class="level_name"&gt;期待度&lt;/div&gt;
 &lt;div class="leveltext"&gt;
 &lt;span&gt;78%&lt;/span&gt;
                     網友想看
                   &lt;/div&gt;
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;div class="level_name"&gt;滿意度&lt;/div&gt;
 &lt;div class="leveltext starwithnum"&gt;
 &lt;span class="count" data-num="3.4" data-run="0"&gt;0&lt;/span&gt;&lt;span&gt;分&lt;/span&gt;
 &lt;div class="starbox starnumbox"&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/dd&gt;
 &lt;/dl&gt;
 &lt;/div&gt;, &lt;div class="release_movie_name"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','恭喜八婆']" href="https://movies.yahoo.com.tw/movieinfo_main/%E6%81%AD%E5%96%9C%E5%85%AB%E5%A9%86-miss-behavior-9432"&gt;
                   恭喜八婆&lt;/a&gt;
 &lt;div class="en"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','恭喜八婆']" href="https://movies.yahoo.com.tw/movieinfo_main/%E6%81%AD%E5%96%9C%E5%85%AB%E5%A9%86-miss-behavior-9432"&gt;
                     Miss Behavior&lt;/a&gt;
 &lt;/div&gt;
 &lt;dl class="levelbox"&gt;
 &lt;dt&gt;
 &lt;div class="level_name"&gt;期待度&lt;/div&gt;
 &lt;div class="leveltext"&gt;
 &lt;span&gt;88%&lt;/span&gt;
                     網友想看
                   &lt;/div&gt;
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;div class="level_name"&gt;滿意度&lt;/div&gt;
 &lt;div class="leveltext starwithnum"&gt;
 &lt;span class="count" data-num="3.8" data-run="0"&gt;0&lt;/span&gt;&lt;span&gt;分&lt;/span&gt;
 &lt;div class="starbox starnumbox"&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/dd&gt;
 &lt;/dl&gt;
 &lt;/div&gt;, &lt;div class="release_movie_name"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','非．虛構情事']" href="https://movies.yahoo.com.tw/movieinfo_main/%E9%9D%9E-%E8%99%9B%E6%A7%8B%E6%83%85%E4%BA%8B-non-fiction-9475"&gt;
                   非．虛構情事&lt;/a&gt;
 &lt;div class="en"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','非．虛構情事']" href="https://movies.yahoo.com.tw/movieinfo_main/%E9%9D%9E-%E8%99%9B%E6%A7%8B%E6%83%85%E4%BA%8B-non-fiction-9475"&gt;
                     Non-fiction&lt;/a&gt;
 &lt;/div&gt;
 &lt;dl class="levelbox"&gt;
 &lt;dt&gt;
 &lt;div class="level_name"&gt;期待度&lt;/div&gt;
 &lt;div class="leveltext"&gt;
 &lt;span&gt;23%&lt;/span&gt;
                     網友想看
                   &lt;/div&gt;
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;div class="level_name"&gt;滿意度&lt;/div&gt;
 &lt;div class="leveltext starwithnum"&gt;
 &lt;span class="count" data-num="2.6" data-run="0"&gt;0&lt;/span&gt;&lt;span&gt;分&lt;/span&gt;
 &lt;div class="starbox starnumbox"&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/dd&gt;
 &lt;/dl&gt;
 &lt;/div&gt;, &lt;div class="release_movie_name"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','地獄自拍']" href="https://movies.yahoo.com.tw/movieinfo_main/%E5%9C%B0%E7%8D%84%E8%87%AA%E6%8B%8D-selfie-from-hell-9494"&gt;
                   地獄自拍&lt;/a&gt;
 &lt;div class="en"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','地獄自拍']" href="https://movies.yahoo.com.tw/movieinfo_main/%E5%9C%B0%E7%8D%84%E8%87%AA%E6%8B%8D-selfie-from-hell-9494"&gt;
                     Selfie From Hell&lt;/a&gt;
 &lt;/div&gt;
 &lt;dl class="levelbox"&gt;
 &lt;dt&gt;
 &lt;div class="level_name"&gt;期待度&lt;/div&gt;
 &lt;div class="leveltext"&gt;
 &lt;span&gt;57%&lt;/span&gt;
                     網友想看
                   &lt;/div&gt;
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;div class="level_name"&gt;滿意度&lt;/div&gt;
 &lt;div class="leveltext starwithnum"&gt;
 &lt;span class="count" data-num="1.4" data-run="0"&gt;0&lt;/span&gt;&lt;span&gt;分&lt;/span&gt;
 &lt;div class="starbox starnumbox"&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/dd&gt;
 &lt;/dl&gt;
 &lt;/div&gt;, &lt;div class="release_movie_name"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','證人']" href="https://movies.yahoo.com.tw/movieinfo_main/%E8%AD%89%E4%BA%BA-innocent-witness-9552"&gt;
                   證人&lt;/a&gt;
 &lt;div class="en"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','證人']" href="https://movies.yahoo.com.tw/movieinfo_main/%E8%AD%89%E4%BA%BA-innocent-witness-9552"&gt;
                     Innocent Witness&lt;/a&gt;
 &lt;/div&gt;
 &lt;dl class="levelbox"&gt;
 &lt;dt&gt;
 &lt;div class="level_name"&gt;期待度&lt;/div&gt;
 &lt;div class="leveltext"&gt;
 &lt;span&gt;96%&lt;/span&gt;
                     網友想看
                   &lt;/div&gt;
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;div class="level_name"&gt;滿意度&lt;/div&gt;
 &lt;div class="leveltext starwithnum"&gt;
 &lt;span class="count" data-num="4.8" data-run="0"&gt;0&lt;/span&gt;&lt;span&gt;分&lt;/span&gt;
 &lt;div class="starbox starnumbox"&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/dd&gt;
 &lt;/dl&gt;
 &lt;/div&gt;, &lt;div class="release_movie_name"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','溫泉屋小女將']" href="https://movies.yahoo.com.tw/movieinfo_main/%E6%BA%AB%E6%B3%89%E5%B1%8B%E5%B0%8F%E5%A5%B3%E5%B0%87-okkos-inn-9562"&gt;
                   溫泉屋小女將&lt;/a&gt;
 &lt;div class="en"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','溫泉屋小女將']" href="https://movies.yahoo.com.tw/movieinfo_main/%E6%BA%AB%E6%B3%89%E5%B1%8B%E5%B0%8F%E5%A5%B3%E5%B0%87-okkos-inn-9562"&gt;
                     Okko’s Inn&lt;/a&gt;
 &lt;/div&gt;
 &lt;dl class="levelbox"&gt;
 &lt;dt&gt;
 &lt;div class="level_name"&gt;期待度&lt;/div&gt;
 &lt;div class="leveltext"&gt;
 &lt;span&gt;80%&lt;/span&gt;
                     網友想看
                   &lt;/div&gt;
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;div class="level_name"&gt;滿意度&lt;/div&gt;
 &lt;div class="leveltext starwithnum"&gt;
 &lt;span class="count" data-num="3.7" data-run="0"&gt;0&lt;/span&gt;&lt;span&gt;分&lt;/span&gt;
 &lt;div class="starbox starnumbox"&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/dd&gt;
 &lt;/dl&gt;
 &lt;/div&gt;, &lt;div class="release_movie_name"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','密弑遊戲']" href="https://movies.yahoo.com.tw/movieinfo_main/%E5%AF%86%E5%BC%91%E9%81%8A%E6%88%B2-escape-room-9572"&gt;
                   密弑遊戲&lt;/a&gt;
 &lt;div class="en"&gt;
 &lt;a class="gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','密弑遊戲']" href="https://movies.yahoo.com.tw/movieinfo_main/%E5%AF%86%E5%BC%91%E9%81%8A%E6%88%B2-escape-room-9572"&gt;
                     Escape Room&lt;/a&gt;
 &lt;/div&gt;
 &lt;dl class="levelbox"&gt;
 &lt;dt&gt;
 &lt;div class="level_name"&gt;期待度&lt;/div&gt;
 &lt;div class="leveltext"&gt;
 &lt;span&gt;84%&lt;/span&gt;
                     網友想看
                   &lt;/div&gt;
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;div class="level_name"&gt;滿意度&lt;/div&gt;
 &lt;div class="leveltext starwithnum"&gt;
 &lt;span class="count" data-num="4.4" data-run="0"&gt;0&lt;/span&gt;&lt;span&gt;分&lt;/span&gt;
 &lt;div class="starbox starnumbox"&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;div class="star"&gt;
 &lt;div class="starovr"&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/dd&gt;
 &lt;/dl&gt;
 &lt;/div&gt;]</pre><p>但每個class = &#8221;release_movie_name&#8221;的元素中，並不是每個標籤都是我們感興趣的，為了萃取感興趣資訊，<span style="text-decoration: underline; color: #9f6ad4;">我們再從newMovies2 list中，一個一個元素去找出class = &#8216;gabtn&#8217; 的&lt;a&gt;&lt;/a&gt;標籤中的文字(如下段落所示)，並將換行與空白字符取消，存取成一個新的list (named NameCHs)</span>。</p>
<p><span style="text-decoration: underline;"><span style="font-size: 12pt;"><em>&lt;a class=&#8221;</em>gabtn<em>&#8221; data-ga=&#8221;[&#8216;本週新片&#8217;,&#8217;本週新片_本週新片第1頁&#8217;,&#8217;密弑遊戲&#8242;]&#8221;<br />
href=&#8221;https://movies.yahoo.com.tw/movieinfo_main/<br />
</em></span></span><span style="text-decoration: underline;"><span style="font-size: 12pt;"><em>%E5%AF%86%E5%BC%91%E9%81%8A%E6%88%B2-escape-room-9572&#8243;&gt;</em><em><span style="color: #0000ff; text-decoration: underline;">密弑遊戲</span>&lt;/a&gt;</em></span></span></p><pre class="crayon-plain-tag">NameCHs = [t.find('a', class_='gabtn').text.replace('\n','').replace(' ','') for t in newMovie2]
NameCHs</pre><p></p><pre class="crayon-plain-tag">['為副不仁',
 '吉娃娃羅曼死',
 '酷寒殺手',
 '法律女王',
 '恭喜八婆',
 '非．虛構情事',
 '地獄自拍',
 '證人',
 '溫泉屋小女將',
 '密弑遊戲']</pre><p>同理，找出英文片名的文字。</p><pre class="crayon-plain-tag">NameENs = [t.find('div', class_='en').find('a').text.replace('\n','').replace(' ','') for t in newMovie2]
NameENs</pre><p></p><pre class="crayon-plain-tag">['Vice',
 'Chiwawa',
 'ColdPursuit',
 'OntheBasisofSex',
 'MissBehavior',
 'Non-fiction',
 'SelfieFromHell',
 'InnocentWitness',
 'Okko’sInn',
 'EscapeRoom']</pre><p></p>
<h4>2-2. 預告片連結</h4>
<p>一樣，檢視感興趣目標在HTML中的結構規則。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2638" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.05.14.png" alt="網路爬蟲-web-crawler" width="2352" height="1126" srcset="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.05.14.png 2352w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.05.14-300x144.png 300w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.05.14-768x368.png 768w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.05.14-1024x490.png 1024w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.05.14-830x397.png 830w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.05.14-230x110.png 230w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.05.14-350x168.png 350w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.05.14-480x230.png 480w" sizes="(max-width: 2352px) 100vw, 2352px" /></p>
<p>找出所有class_為release_btn color_btnbox的div。</p><pre class="crayon-plain-tag">newMovie3 = soup.find_all('div',class_="release_btn color_btnbox")
newMovie3</pre><p></p><pre class="crayon-plain-tag">[&lt;div class="release_btn color_btnbox"&gt;
 &lt;a class="btn_s_introduction" data-ga="['本週新片','本週新片_本週新片第1頁','為副不仁']" href="https://movies.yahoo.com.tw/movieinfo_main/%E7%82%BA%E5%89%AF%E4%B8%8D%E4%BB%81-vice-8963"&gt;電影介紹&lt;/a&gt;
 &lt;a class="btn_s_vedio gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','為副不仁']" href="https://movies.yahoo.com.tw/video/%E7%82%BA%E5%89%AF%E4%B8%8D%E4%BB%81-%E4%B8%AD%E6%96%87%E9%A0%90%E5%91%8A-021801838.html?movie_id=8963"&gt;
                   預告片
                 &lt;/a&gt;
 &lt;a class="btn_s_foto" href="https://movies.yahoo.com.tw/movieinfo_photos.html/id=8963"&gt;劇照&lt;/a&gt;
 &lt;a class="btn_s_time gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','為副不仁']" href="https://movies.yahoo.com.tw/movietime_result.html/id=8963"&gt;
                   時刻表
                 &lt;/a&gt;
 &lt;/div&gt;, &lt;div class="release_btn color_btnbox"&gt;
 &lt;a class="btn_s_introduction" data-ga="['本週新片','本週新片_本週新片第1頁','吉娃娃羅曼死']" href="https://movies.yahoo.com.tw/movieinfo_main/%E5%90%89%E5%A8%83%E5%A8%83%E7%BE%85%E6%9B%BC%E6%AD%BB-chiwawa-9256"&gt;電影介紹&lt;/a&gt;
 &lt;a class="btn_s_vedio gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','吉娃娃羅曼死']" href="https://movies.yahoo.com.tw/video/%E5%90%89%E5%A8%83%E5%A8%83%E7%BE%85%E6%9B%BC%E6%AD%BB-%E7%B2%BE%E5%BD%A9%E7%89%87%E9%A0%AD%E6%90%B6%E5%85%88%E7%9C%8B-090102582.html?movie_id=9256"&gt;
                   預告片
                 &lt;/a&gt;
 &lt;a class="btn_s_foto" href="https://movies.yahoo.com.tw/movieinfo_photos.html/id=9256"&gt;劇照&lt;/a&gt;
 &lt;a class="btn_s_time gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','吉娃娃羅曼死']" href="https://movies.yahoo.com.tw/movietime_result.html/id=9256"&gt;
                   時刻表
                 &lt;/a&gt;
 &lt;/div&gt;, &lt;div class="release_btn color_btnbox"&gt;
 &lt;a class="btn_s_introduction" data-ga="['本週新片','本週新片_本週新片第1頁','酷寒殺手']" href="https://movies.yahoo.com.tw/movieinfo_main/%E9%85%B7%E5%AF%92%E6%AE%BA%E6%89%8B-cold-pursuit-9377"&gt;電影介紹&lt;/a&gt;
 &lt;a class="btn_s_vedio gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','酷寒殺手']" href="https://movies.yahoo.com.tw/video/%E9%85%B7%E5%AF%92%E6%AE%BA%E6%89%8B-%E4%B8%AD%E6%96%87%E9%A0%90%E5%91%8A-105035779.html?movie_id=9377"&gt;
                   預告片
                 &lt;/a&gt;
 &lt;a class="btn_s_foto" href="https://movies.yahoo.com.tw/movieinfo_photos.html/id=9377"&gt;劇照&lt;/a&gt;
 &lt;a class="btn_s_time gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','酷寒殺手']" href="https://movies.yahoo.com.tw/movietime_result.html/id=9377"&gt;
                   時刻表
                 &lt;/a&gt;
 &lt;/div&gt;, &lt;div class="release_btn color_btnbox"&gt;
 &lt;a class="btn_s_introduction" data-ga="['本週新片','本週新片_本週新片第1頁','法律女王']" href="https://movies.yahoo.com.tw/movieinfo_main/%E6%B3%95%E5%BE%8B%E5%A5%B3%E7%8E%8B-on-the-basis-of-sex-9389"&gt;電影介紹&lt;/a&gt;
 &lt;a class="btn_s_vedio gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','法律女王']" href="https://movies.yahoo.com.tw/video/%E6%B3%95%E5%BE%8B%E5%A5%B3%E7%8E%8B-%E6%9C%80%E6%96%B0%E9%A0%90%E5%91%8A-093658482.html?movie_id=9389"&gt;
                   預告片
                 &lt;/a&gt;
 &lt;a class="btn_s_foto" href="https://movies.yahoo.com.tw/movieinfo_photos.html/id=9389"&gt;劇照&lt;/a&gt;
 &lt;a class="btn_s_time gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','法律女王']" href="https://movies.yahoo.com.tw/movietime_result.html/id=9389"&gt;
                   時刻表
                 &lt;/a&gt;
 &lt;/div&gt;, &lt;div class="release_btn color_btnbox"&gt;
 &lt;a class="btn_s_introduction" data-ga="['本週新片','本週新片_本週新片第1頁','恭喜八婆']" href="https://movies.yahoo.com.tw/movieinfo_main/%E6%81%AD%E5%96%9C%E5%85%AB%E5%A9%86-miss-behavior-9432"&gt;電影介紹&lt;/a&gt;
 &lt;a class="btn_s_vedio gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','恭喜八婆']" href="https://movies.yahoo.com.tw/video/%E6%81%AD%E5%96%9C%E5%85%AB%E5%A9%86-%E6%9C%80%E6%96%B0%E9%A0%90%E5%91%8A-025738371.html?movie_id=9432"&gt;
                   預告片
                 &lt;/a&gt;
 &lt;a class="btn_s_foto" href="https://movies.yahoo.com.tw/movieinfo_photos.html/id=9432"&gt;劇照&lt;/a&gt;
 &lt;a class="btn_s_time gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','恭喜八婆']" href="https://movies.yahoo.com.tw/movietime_result.html/id=9432"&gt;
                   時刻表
                 &lt;/a&gt;
 &lt;/div&gt;, &lt;div class="release_btn color_btnbox"&gt;
 &lt;a class="btn_s_introduction" data-ga="['本週新片','本週新片_本週新片第1頁','非．虛構情事']" href="https://movies.yahoo.com.tw/movieinfo_main/%E9%9D%9E-%E8%99%9B%E6%A7%8B%E6%83%85%E4%BA%8B-non-fiction-9475"&gt;電影介紹&lt;/a&gt;
 &lt;a class="btn_s_vedio gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','非．虛構情事']" href="https://movies.yahoo.com.tw/video/%E9%9D%9E-%E8%99%9B%E6%A7%8B%E6%83%85%E4%BA%8B-%E4%B8%AD%E6%96%87%E9%A0%90%E5%91%8A-023735492.html?movie_id=9475"&gt;
                   預告片
                 &lt;/a&gt;
 &lt;a class="btn_s_foto" href="https://movies.yahoo.com.tw/movieinfo_photos.html/id=9475"&gt;劇照&lt;/a&gt;
 &lt;a class="btn_s_time gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','非．虛構情事']" href="https://movies.yahoo.com.tw/movietime_result.html/id=9475"&gt;
                   時刻表
                 &lt;/a&gt;
 &lt;/div&gt;, &lt;div class="release_btn color_btnbox"&gt;
 &lt;a class="btn_s_introduction" data-ga="['本週新片','本週新片_本週新片第1頁','地獄自拍']" href="https://movies.yahoo.com.tw/movieinfo_main/%E5%9C%B0%E7%8D%84%E8%87%AA%E6%8B%8D-selfie-from-hell-9494"&gt;電影介紹&lt;/a&gt;
 &lt;a class="btn_s_vedio gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','地獄自拍']" href="https://movies.yahoo.com.tw/video/%E5%9C%B0%E7%8D%84%E8%87%AA%E6%8B%8D-%E6%9C%80%E6%96%B0%E9%A0%90%E5%91%8A-144352730.html?movie_id=9494"&gt;
                   預告片
                 &lt;/a&gt;
 &lt;a class="btn_s_foto" href="https://movies.yahoo.com.tw/movieinfo_photos.html/id=9494"&gt;劇照&lt;/a&gt;
 &lt;a class="btn_s_time gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','地獄自拍']" href="https://movies.yahoo.com.tw/movietime_result.html/id=9494"&gt;
                   時刻表
                 &lt;/a&gt;
 &lt;/div&gt;, &lt;div class="release_btn color_btnbox"&gt;
 &lt;a class="btn_s_introduction" data-ga="['本週新片','本週新片_本週新片第1頁','證人']" href="https://movies.yahoo.com.tw/movieinfo_main/%E8%AD%89%E4%BA%BA-innocent-witness-9552"&gt;電影介紹&lt;/a&gt;
 &lt;a class="btn_s_vedio gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','證人']" href="https://movies.yahoo.com.tw/video/%E8%AD%89%E4%BA%BA-%E5%82%AC%E6%B7%9A%E9%9F%B3%E6%A8%82%E7%89%88%E9%A0%90%E5%91%8A-231957458.html?movie_id=9552"&gt;
                   預告片
                 &lt;/a&gt;
 &lt;a class="btn_s_foto" href="https://movies.yahoo.com.tw/movieinfo_photos.html/id=9552"&gt;劇照&lt;/a&gt;
 &lt;a class="btn_s_time gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','證人']" href="https://movies.yahoo.com.tw/movietime_result.html/id=9552"&gt;
                   時刻表
                 &lt;/a&gt;
 &lt;/div&gt;, &lt;div class="release_btn color_btnbox"&gt;
 &lt;a class="btn_s_introduction" data-ga="['本週新片','本週新片_本週新片第1頁','溫泉屋小女將']" href="https://movies.yahoo.com.tw/movieinfo_main/%E6%BA%AB%E6%B3%89%E5%B1%8B%E5%B0%8F%E5%A5%B3%E5%B0%87-okkos-inn-9562"&gt;電影介紹&lt;/a&gt;
 &lt;a class="btn_s_vedio gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','溫泉屋小女將']" href="https://movies.yahoo.com.tw/video/%E6%BA%AB%E6%B3%89%E5%B1%8B%E5%B0%8F%E5%A5%B3%E5%B0%87-%E4%B8%AD%E6%96%87%E9%A0%90%E5%91%8A-105610983.html?movie_id=9562"&gt;
                   預告片
                 &lt;/a&gt;
 &lt;a class="btn_s_foto" href="https://movies.yahoo.com.tw/movieinfo_photos.html/id=9562"&gt;劇照&lt;/a&gt;
 &lt;a class="btn_s_time gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','溫泉屋小女將']" href="https://movies.yahoo.com.tw/movietime_result.html/id=9562"&gt;
                   時刻表
                 &lt;/a&gt;
 &lt;/div&gt;, &lt;div class="release_btn color_btnbox"&gt;
 &lt;a class="btn_s_introduction" data-ga="['本週新片','本週新片_本週新片第1頁','密弑遊戲']" href="https://movies.yahoo.com.tw/movieinfo_main/%E5%AF%86%E5%BC%91%E9%81%8A%E6%88%B2-escape-room-9572"&gt;電影介紹&lt;/a&gt;
 &lt;a class="btn_s_vedio gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','密弑遊戲']" href="https://movies.yahoo.com.tw/video/%E5%AF%86%E5%BC%91%E9%81%8A%E6%88%B2-%E4%B8%AD%E6%96%87%E9%A0%90%E5%91%8A-100235196.html?movie_id=9572"&gt;
                   預告片
                 &lt;/a&gt;
 &lt;a class="btn_s_foto" href="https://movies.yahoo.com.tw/movieinfo_photos.html/id=9572"&gt;劇照&lt;/a&gt;
 &lt;a class="btn_s_time gabtn" data-ga="['本週新片','本週新片_本週新片第1頁','密弑遊戲']" href="https://movies.yahoo.com.tw/movietime_result.html/id=9572"&gt;
                   時刻表
                 &lt;/a&gt;
 &lt;/div&gt;]</pre><p>並從newMovie3 list中，進一步取出元素中class_為btn_s_vedio gabtn&lt;a&gt;&lt;/a&gt;連結標籤中的連結href。</p><pre class="crayon-plain-tag">links = [t.find('a',class_="btn_s_vedio gabtn")['href'] for t in newMovie3]
links</pre><p></p><pre class="crayon-plain-tag">['https://movies.yahoo.com.tw/video/%E7%82%BA%E5%89%AF%E4%B8%8D%E4%BB%81-%E4%B8%AD%E6%96%87%E9%A0%90%E5%91%8A-021801838.html?movie_id=8963',
 'https://movies.yahoo.com.tw/video/%E5%90%89%E5%A8%83%E5%A8%83%E7%BE%85%E6%9B%BC%E6%AD%BB-%E7%B2%BE%E5%BD%A9%E7%89%87%E9%A0%AD%E6%90%B6%E5%85%88%E7%9C%8B-090102582.html?movie_id=9256',
 'https://movies.yahoo.com.tw/video/%E9%85%B7%E5%AF%92%E6%AE%BA%E6%89%8B-%E4%B8%AD%E6%96%87%E9%A0%90%E5%91%8A-105035779.html?movie_id=9377',
 'https://movies.yahoo.com.tw/video/%E6%B3%95%E5%BE%8B%E5%A5%B3%E7%8E%8B-%E6%9C%80%E6%96%B0%E9%A0%90%E5%91%8A-093658482.html?movie_id=9389',
 'https://movies.yahoo.com.tw/video/%E6%81%AD%E5%96%9C%E5%85%AB%E5%A9%86-%E6%9C%80%E6%96%B0%E9%A0%90%E5%91%8A-025738371.html?movie_id=9432',
 'https://movies.yahoo.com.tw/video/%E9%9D%9E-%E8%99%9B%E6%A7%8B%E6%83%85%E4%BA%8B-%E4%B8%AD%E6%96%87%E9%A0%90%E5%91%8A-023735492.html?movie_id=9475',
 'https://movies.yahoo.com.tw/video/%E5%9C%B0%E7%8D%84%E8%87%AA%E6%8B%8D-%E6%9C%80%E6%96%B0%E9%A0%90%E5%91%8A-144352730.html?movie_id=9494',
 'https://movies.yahoo.com.tw/video/%E8%AD%89%E4%BA%BA-%E5%82%AC%E6%B7%9A%E9%9F%B3%E6%A8%82%E7%89%88%E9%A0%90%E5%91%8A-231957458.html?movie_id=9552',
 'https://movies.yahoo.com.tw/video/%E6%BA%AB%E6%B3%89%E5%B1%8B%E5%B0%8F%E5%A5%B3%E5%B0%87-%E4%B8%AD%E6%96%87%E9%A0%90%E5%91%8A-105610983.html?movie_id=9562',
 'https://movies.yahoo.com.tw/video/%E5%AF%86%E5%BC%91%E9%81%8A%E6%88%B2-%E4%B8%AD%E6%96%87%E9%A0%90%E5%91%8A-100235196.html?movie_id=9572']</pre><p></p>
<h4>2-3. 電影介紹文</h4>
<p>檢查介紹文的HTML規則，發現介紹文會夾帶在class = &#8216;release_text&#8217;的div中。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2639" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.16.21.png" alt="網路爬蟲-web-crawler" width="2352" height="1110" srcset="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.16.21.png 2352w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.16.21-300x142.png 300w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.16.21-768x362.png 768w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.16.21-1024x483.png 1024w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.16.21-830x392.png 830w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.16.21-230x109.png 230w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.16.21-350x165.png 350w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.16.21-480x227.png 480w" sizes="(max-width: 2352px) 100vw, 2352px" /></p><pre class="crayon-plain-tag">newMovie4 = soup.find_all('div',class_="release_text")
newMovie4</pre><p></p><pre class="crayon-plain-tag">[&lt;div class="release_text"&gt;
 &lt;span class="jq_text_overflow_180 jq_text_overflow_href_list" data-url="https://movies.yahoo.com.tw/movieinfo_main/%E7%82%BA%E5%89%AF%E4%B8%8D%E4%BB%81-vice-8963"&gt;
                   ★奧斯卡金獎得主亞當麥凱繼《大賣空》後，攜手克里斯汀貝爾、史提夫卡爾三巨頭再度合作
 ★「蝙蝠俠」克里斯汀貝爾再展變色龍演技，傳神詮釋史上最有權勢副總統迪克錢尼
 ★奧斯卡最佳男配角山姆洛克威爾與克里斯汀貝爾聯袂扮老，精湛化身小布希
 ★布萊德彼特與《月光下的藍色男孩》監製共同打造，強勢問鼎2019奧斯卡最佳影片、影帝等獎項！
  
 《為副不仁》講述美國史上最有權勢的副總統迪克錢尼（克里斯汀貝爾 飾），如何從白宮幕僚逐漸爬上權力的頂峰，成為全世界最有權勢的人－－美國總統小布希（山姆洛克威爾 飾）的副手，以及他的政策如何重塑美國並影響至今我們身處的世界。
                 &lt;/span&gt;
 &lt;/div&gt;, &lt;div class="release_text"&gt;
 &lt;span class="jq_text_overflow_180 jq_text_overflow_href_list" data-url="https://movies.yahoo.com.tw/movieinfo_main/%E5%90%89%E5%A8%83%E5%A8%83%E7%BE%85%E6%9B%BC%E6%AD%BB-chiwawa-9256"&gt;
                   ★《惡女羅曼死》原著作者又一爭議話題傑作改編電影化！
 ★ 殺人分屍案死者身份確認，完全沒想到，竟然就是我的好友！
 ★ 現代東京版《羅生門》，懸疑曲折超越《渴望》、《聽說桐島退社了》！ 
 ★ 新生代實力演員群，共同演繹謳歌青春電影傑作！
 ★ 絢爛畫面搭配動感配樂，滿足視覺與聽覺的雙重饗宴！
 ★ 藤岡靛、吉岡里帆、櫻井友紀、白石和彌等日本影視圈名人爭相力讚！
  
 話題人物慘遭殺害，連鎖效應在好友圈無限蔓延
 一群揮霍青春的青年男女，其中一位長相可愛貌美，猶如眾人「吉祥物」般存在、暱稱為「吉娃娃」的20歲少女，某天驚傳遭人分屍的命案，部分屍體並在東京灣尋獲。她周遭的好友們，開始聚在一起回憶青春，緬懷他們心目中的吉娃娃。大家這時才發現，根本沒人知道她的真名、境遇還有真正的個性。原來在大家對她毫無了解的情況下，她就跟眾人混在一起、談戀愛、甚至發生性關係。究竟真正的「吉娃娃」，到底是位什麼樣的女孩呢？
  
 【關於電影】
  
 《惡女羅曼死》作者話題傑作，懸疑曲折超越《聽說桐島退社了》
 《吉娃娃羅曼死》改編自日本知名漫畫家岡崎京子的短篇漫畫作品。曾打造《惡女羅曼死》等轟動不已作品的岡崎京子，特別擅長描繪情慾與悖德，並透過毫無忌諱的性愛場面表現人物內在。這部短篇漫畫，終於在2019年翻拍成劇情長片登上大銀幕。全片描述個性活潑好動、集萬千寵愛於一身的20歲美少女「吉娃娃」，某天竟被殘忍分屍，而她的遭遇也在朋友圈中引發連鎖效應。眾人開始回想自己與「吉娃娃」的每個相處細節，竟發現自己連她的本名、境遇與背景都不知道。也因為好友們各說各話，在不同說法中拼湊出吉娃娃的生活與背景，更讓本片頗有現代女性版《羅生門》的懸疑性，更猶如《渴望》、《聽說桐島退社了》的加乘綜合版。
  
 本片找來曾執導《裸睡美人》的二宮健擔任導演。二宮導演透露，親手拍攝《吉娃娃羅曼史》的真人電影版，一直是他給自己設立的目標，他並回憶：「初次拜讀原作，是我22歲剛從大阪到東京來的時候。那時我雖然想在東京拍攝更大規模的電影，卻諸事不順；即便想讓自己做些什麼，到頭來總是繞回原點，恰好就是那樣的時期，讓我遇到了這部作品。」他並補充：「只花34頁篇幅描繪的青春群像劇，卻帶來非常大的震撼。這群想試著跨越些什麼而掙扎的人物，逐漸跟我的自身形象交疊，以致於在看完原作的瞬間，我就決定要把這部作品給拍成電影。」值得一提的是，二宮導演的作品總有著最前衛的影像，以及動感的配樂，讓他的導演風格非常鮮明並深受好評。尤其本片的派對群戲眾多，導演這次也採用讓演員自由發揮的即興表演，再由鏡頭一一收錄，讓全片的派對、玩樂、性愛等場面顯得特別真實。
  
 本片演員也是一時之選，找來2019年新科藍絲帶獎影后門脇麥擔綱演出「美樹」這個角色，而讀完劇本的她也覺得「非常有趣，很想試試看」而馬上答應邀約。至於靈魂人物「吉娃娃」，則找來新銳女星吉田志織擔綱。她獨特又魅力十足，時而無邪、時而深沉，立體的人物塑造和強烈的存在感，讓人簡直無法相信這是她的首部主演作品。此外，本片也集結成田凌、寬一郎、村上虹郎、玉城蒂娜、栗山千明、淺野忠信等多位新銳、資深實力派演員共同演繹，聯手呈現年輕人面對愛情、金錢、嫉妒、慾望等如夢境般閃亮不已的絢爛青春世界。而全片所勾勒「青春的爆發」與「告終的覺悟」，導演也精準使用過去日本電影從未有過的影像與音樂勾勒出來，勢必滿足觀眾視覺與聽覺的雙重享受，一同進入青春大無畏的美麗與哀愁！
  
                 &lt;/span&gt;
 &lt;/div&gt;, &lt;div class="release_text"&gt;
 &lt;span class="jq_text_overflow_180 jq_text_overflow_href_list" data-url="https://movies.yahoo.com.tw/movieinfo_main/%E9%85%B7%E5%AF%92%E6%AE%BA%E6%89%8B-cold-pursuit-9377"&gt;
                   ★2019開春最受期待復仇爽片! 冷暴力美學、血花散遍!
 ★地表最強老爸-連恩尼遜，重拾槍火即刻開戰!  復仇是人性最原始的反撲!
  
 殺我兒，我滅你全團!
  
 剷雪車司機-尼爾剛獲頒榮譽市民表揚，卻收到兒子吸毒致死的訊息，讓他生活頓時起了波瀾。他堅信兒子清白，便開始追查，赫然發現幕後有黑道組織操刀，他從朋友手中獲得黑道兇嫌名單，並依姓名順序送凶手上斷頭台。冰天雪地中，黑道們一個個死於非命，尼爾的復仇行為讓毒梟跟槍火幫派，以為是雙方在找麻煩，進而引發兩個幫派大火拼。為了幫兒子報仇，尼爾也陷入這場世紀廝殺中，雙方頓時火力全開，復仇計畫大快人心…
  
 【幕後花絮】
  
 《酷寒殺手》翻拍自爛番茄新鮮度90％超強好評《該死的順序》，導演漢斯彼得穆蘭開創新暴力美學風格，電影公司買下版權後並無改換導演，仍由漢斯繼續拍攝美語版本，融入更多美式暴力作風。導演當時會想拍這部片，是來自本身被霸凌的怨念：「我從小就喜歡報仇，只要有人欺負我，我就會反擊。」導演認為，復仇是人類非常原始的直覺，儘管沒有達到報仇目的，也能享受到樂趣。
  
 《該死的順序》當年在柏林影展首映之後，全球影評佳評如潮！帝國雜誌給予極高的讚賞，「這才是我們期待已久的復仇爽片！」知名影評網站爛番茄新鮮度近90％超強好評！國際評論對於《該死的順序》師法柯恩兄弟，也超越昆汀塔倫提諾和盧貝松的暴力美學大加讚揚！
  
 片商看中電影超強口碑便著手進行翻拍，將新暴力美學旋風帶入好萊塢；找來具有票房號召力男星-連恩尼遜擔任片中的復仇老爸。雖然連恩尼遜演出這類型的電影並不陌生，但在新片中，導演讓連恩尼遜有更多的內心戲與謀略策畫，他也不再英勇無敵，沒有特務、警察等背景，單純是一位平凡的復仇父親。
  
 在製作方面，麥可雪恩伯格曾擔任過《決殺令》製片，負責本片的暴力美學演繹，而《疾速救援》製片-麥可德雷爾，則擔綱起片中動作炫技保證，讓電影《酷寒殺手》重新定義暴力極致。
  
                 &lt;/span&gt;
 &lt;/div&gt;, &lt;div class="release_text"&gt;
 &lt;span class="jq_text_overflow_180 jq_text_overflow_href_list" data-url="https://movies.yahoo.com.tw/movieinfo_main/%E6%B3%95%E5%BE%8B%E5%A5%B3%E7%8E%8B-on-the-basis-of-sex-9389"&gt;
                   ★真人實事改編 一生致力平權 美國傳奇女法官成功奇蹟登上大銀幕 
 ★《愛的萬物論》金獎提名費莉絲蒂瓊斯X《以你的名字呼喚我》艾米漢默 聯手主演
 ★《彗星撞地球》票房女導演咪咪蕾德 睽違大銀幕多年最新力作
 ★為信念奮鬥不懈 為歧視挺身而出 繼《永不妥協》後又一激勵人心銀幕佳作 
 ★故事主角露絲拜德金斯伯格 親自客串演出 
  
 「如果連法律都不能一視同仁，兩性如何平權？」取材自現今美國最高法院唯二女大法官露絲拜德金斯伯格（菲莉絲蒂瓊斯 飾）的真實成功故事，本片聚焦在年紀輕輕、剛踏出法學院校門的她，如何在男性至上、女性不被重視的工作環境中，力爭上游成為律師，為兩性爭取平權，成為美國史上最有影響力的法官之一，現在仍任職於最高法院大法官。
                 &lt;/span&gt;
 &lt;/div&gt;, &lt;div class="release_text"&gt;
 &lt;span class="jq_text_overflow_180 jq_text_overflow_href_list" data-url="https://movies.yahoo.com.tw/movieinfo_main/%E6%81%AD%E5%96%9C%E5%85%AB%E5%A9%86-miss-behavior-9432"&gt;
                   ★2019開年最爆笑噴飯喜劇，香港鬼才彭浩翔瘋狂作品，《春嬌與志明》班底火力全開，一定要你笑翻天
 ★ 香港最不可思議的八婆女星大集合，為了一瓶奶！？展開瘋狂大作戰
  
 由8個閨密組成的「八婆」whatsapp群組，因彼此的恩怨，讓群組不再對話。
 而June也在認識了現在的老公後，漸漸疏遠其他7位閨密。她的女魔頭上司最近生了小孩，需要定時抽母奶放進冰箱。沒想到，June竟然誤把母奶加進咖啡裡，還被大老闆喝個精光，要是被發現肯定工作不保。
  
 情急之下，她只好找回很久沒聯絡的群組成員，希望在下班前，幫忙找到母奶頂替。此時，即將襲港的颱風逼近，交通大亂，八婆們能否在時間之內，完成尋奶任務呢？
  
                 &lt;/span&gt;
 &lt;/div&gt;, &lt;div class="release_text"&gt;
 &lt;span class="jq_text_overflow_180 jq_text_overflow_href_list" data-url="https://movies.yahoo.com.tw/movieinfo_main/%E9%9D%9E-%E8%99%9B%E6%A7%8B%E6%83%85%E4%BA%8B-non-fiction-9475"&gt;
                   亞倫是法國出版界的風雲人物，然而時代在變，亞倫也忙於適應電子世代帶給出版業的衝擊，他不僅要學習如何發行電子書，就連讀者的消費取向也令他匪夷所思。人氣博主、暢銷部落客只要將在社群媒體發表的短文集結成冊，也能成為暢銷書？亞倫拒絕出版與他年紀相仿且合作多年的作家李奧納多的新書，他的作品寫得多半是自己的真實經驗，再將筆下人物稍加改名換姓，他的前妻、前任女友以及被影射的周遭人物深受其擾。這次的新書是李奧納多跟某個名人芝麻綠豆般的緋聞軼事，亞倫質疑他根本沒有創意以及想像力，然而出人意表的是亞倫身為名人的妻子卻認為這是李奧納多最好的作品…
  
 曾經榮獲坎城影展最佳導演、法國中生代最知名的導演奧利維耶阿薩亞斯今年入圍威尼斯影展競賽之作，這也是他與茱麗葉畢諾許第三度合作。導演精心設計的日常對話，涵蓋文化、民主、政治以及時事等多面向，幽默諷刺又饒富哲學寓意，尤其對現實世界女明星茱麗葉畢諾許的一番嘲弄，令人會心一笑。茱麗葉畢諾許與吉翁卡列精彩的演出令人驚艷。
  
 【關於電影】
  
 強勢挑戰大時代議題 阿薩亞斯回歸16釐米力抗數位狂潮
 《非．虛構情事》講述近年討論度最高的議題之一——傳統紙本出版業與電子書的價值觀拉扯。在銳不可擋的現代數位化潮流當中，阿薩亞斯從未停止關注紙本書出版面臨到的夕陽產業議題，延續了過去作品《夏日時光》、《星光雲寂》中對於全球化、經濟、科技以及文化在時代下變遷的討論，從個人及群體角度出發，採用了輕鬆幽默卻又充滿哲學性的論調，讓觀眾能夠輕巧的進入議題核心。本片透過絕妙對話──無論是兩人世界或是團體聚會，還是身為編輯與明星、作家與政治狂熱組合的夫妻檔、偷情對象、工作夥伴──建構出不同背景的人們處於變遷的世界中，被傳統以及新潮拉扯的糾結感。另外，在片中描述面對現代化的掙扎時，阿薩亞斯的敘事角度選擇欣然理解當前數位化的崇高地位，但在技術方面卻選擇回歸以16釐米膠捲拍攝，盼望以創作初衷，在與資本主義的抗衡中找到更多討論空間。
 被問到劇中作家因大量採用自身故事作為創作題材而備受爭議，阿薩亞斯笑說：「我應該比他有道德一點吧！」法文片名原意為「雙面人生」，跟英文片名「非．虛構情事」交錯出真實與虛構從來就無法完全切割的深層寓意；電影中出版社提議可以找大明星茱麗葉畢諾許來為有聲書配音，以刺激銷量，飾演女主角瑟琳娜的正是茱麗葉本人，她在片中神回覆「我認識她的經紀人，或許可以關說一下」。劇中被嘲諷的茱麗葉畢諾許同時活靈活現地存在在電影裡，「故事無非就是現實生活的一面鏡子啊」。
  
 阿薩亞斯三度合作大滿貫影后 全新卡司歡樂滿堂
 茱麗葉畢諾許的影后身影無庸置疑是片中一大亮點，《非．虛構情事》是她第三次與阿薩亞斯合作，相知多年的兩人早有絕佳默契，阿薩亞斯受訪時表示：「她的不羈、詼諧都讓我的靈感源源不絕。」並認為只有她能夠讓瑟琳娜的幽默立體化；而曾被封為法國最帥男演員的吉翁卡列則是在阿薩亞斯寫作過程中逐漸成形的想法，認為身為這一代最有代表性的男演員之一，只有他有資格撐得起這個角色的權威感，成功吸引觀眾的目光；而出身舞台劇演員及導演的文森馬格恩也自帶氣場，讓劇中金牌編輯與風流作家的對手戲，與吉翁卡列第一次合作就激盪出充滿電力的精彩火花。
 除了茱麗葉畢諾許與阿薩亞斯以外，其他卡司皆是首度合作，但執導過程中，阿薩亞斯忍不住盛讚演員們，「比我更清楚如何演繹出腳本中的幽默，甚至共鳴出新的層次！」
  
                 &lt;/span&gt;
 &lt;/div&gt;, &lt;div class="release_text"&gt;
 &lt;span class="jq_text_overflow_180 jq_text_overflow_href_list" data-url="https://movies.yahoo.com.tw/movieinfo_main/%E5%9C%B0%E7%8D%84%E8%87%AA%E6%8B%8D-selfie-from-hell-9494"&gt;
                   ★ 改編自2015年在YouTube創下逾2000萬次點閱同名恐怖短片
 ★ 《愛殺瑪莉》製片群傾力打造，驚嚇程度直逼《鬼關燈》《陰兒房》！
 ★ 21世紀的科技驚悚預言，直達地獄的恐怖自拍！
 ★ 新世紀文明病，這次真的會送命！
  
 德國部落客茱莉亞來到美國拜訪她的姪女漢娜，卻在抵達後突然怪病纏身，臥床不起。漢娜家也開始接二連三地出現各種不尋常的超自然現象，不堪其擾的漢娜不禁懷疑一切乃因茱莉亞而起。當漢娜找到了茱莉亞的部落格後，發現茱莉亞沉迷暗網多時，並將蟄伏在暗網深處的恐怖力量帶到了現實之中，沾有嗜血意志的自拍照正威脅每一個人……
  
                 &lt;/span&gt;
 &lt;/div&gt;, &lt;div class="release_text"&gt;
 &lt;span class="jq_text_overflow_180 jq_text_overflow_href_list" data-url="https://movies.yahoo.com.tw/movieinfo_main/%E8%AD%89%E4%BA%BA-innocent-witness-9552"&gt;
                   ★《與神同行》超人氣女星金香起突破演技暖心動人力作！
 ★「男神」鄭雨盛、「國民萌妹」金香起睽違17年再度攜手！
 ★《向左愛向右愛》《記憶中的美好歌聲》票房大導李翰再執導演筒！
 ★「小迷糊」李奎炯、鄭雨盛韓國兩大型男互飆演技！
  
 信任 是全世界最有力的證詞
 律師楊淳鎬（鄭雨盛飾）加入了一家知名的法律事務所，為一名被指控殺害雇主一家的女傭辯護，這樁謀殺案廣受媒體與社會關注，淳鎬必須贏得官司才能成為事務所合夥人。然案發現場的唯一目擊證人林智友（金香起飾）是一名自閉症少女，淳鎬必須想盡辦法讓智友敞開心房出庭作證才能贏得官司。這兩個不同世界的人漸漸成為了朋友，但在案情膠著的壓力下，他必須在有限的時間內，讓智友說出真相…
  
 【關於電影】
  
 金香起繼《與神同行》後演技再突破　搭檔男神鄭雨盛續17年之緣！
  
 以賣座強片《與神同行》系列電影爆紅的「國民妹妹」金香起奪下青龍電影獎「最佳女配角獎」後，睽違17年再度與「國民暖男」鄭雨盛攜手演出催淚動人新作《證人》，而金香起在２歲時拍攝第一支廣告就是和鄭雨盛合作，讓鄭雨盛驚訝表示這是非常神奇的緣分。
  
 金香起在6歲時從廣告界踏入影壇，超齡的演技天賦讓她獲得「天才童星」的美譽，即使與黃晸玟、宋允兒、宋仲基、朴寶英、河正宇、車太鉉、朱智勛、李政宰等影帝后級別的知名影星合作也絲毫不遜色，而她在新作《證人》中首次挑戰演出自閉症少女，金香起表示：「其實接演的時候我猶豫了很久，因為這個角色難度很高。」她擔心自己無法完美詮釋，但高難度的演技挑戰又讓她躍躍欲試，最終她決定接受挑戰。鄭雨盛則表示：「金香起對表演的專注力非常驚人，她的演技魅力自然而然就流露出來了。」導演李翰也坦言金香起在《證人》中的表演非常令人動容，有好幾場戲都讓劇組人員忍不住淚灑現場，他說：「金香起的演出非常多變，你會被她真摯的演技觸動，忍不住為她哭、為她笑。」因此在所有同輩女星中，金香起是導演選角的第一人選。
                 &lt;/span&gt;
 &lt;/div&gt;, &lt;div class="release_text"&gt;
 &lt;span class="jq_text_overflow_180 jq_text_overflow_href_list" data-url="https://movies.yahoo.com.tw/movieinfo_main/%E6%BA%AB%E6%B3%89%E5%B1%8B%E5%B0%8F%E5%A5%B3%E5%B0%87-okkos-inn-9562"&gt;
                   ★ 熱銷300萬冊，日本超人氣國民讀物改編！
 ★《神隱少女》《崖上的波妞》作畫監督x《電影版聲之形》知名編劇攜手打造溫暖新作！
 ★ 榮獲2019年每日映畫大賞最佳動畫片！
 ★ 入選2019年日本奧斯卡優秀動畫電影獎！
 ★ 入選2018法國安錫動畫影展競賽片！
  
 就讀小學六年級的小織，父母不幸在車禍中喪生，由經營「春之屋」溫泉旅館的奶奶收養了她，因這場意外獲得通靈能力的她，也認識了旅館中三個心地善良卻調皮的幽靈。在旅館面臨後繼無人將被收購的困境時，年僅12歲的小織在奶奶的幫助下，展開一場成為旅館老闆娘必經的「小女將修行」之路，雖然每天都遭遇嘲笑與挫折，但天性樂觀的她勇於接受挑戰，絕不認輸！《溫泉屋小女將》將於2019年2月27日上映，更多電影資訊歡迎上官方粉絲團查詢：https://www.facebook.com/VVPfans。
                 &lt;/span&gt;
 &lt;/div&gt;, &lt;div class="release_text"&gt;
 &lt;span class="jq_text_overflow_180 jq_text_overflow_href_list" data-url="https://movies.yahoo.com.tw/movieinfo_main/%E5%AF%86%E5%BC%91%E9%81%8A%E6%88%B2-escape-room-9572"&gt;
                   索尼影業最新電影《密弑遊戲》以時下最流行的密室逃脫遊戲為主題，由《陰兒房第4章：鎖命亡靈》亞當羅勃提爾導演執導、《玩命關頭》系列億萬製片打造，並由《太空迷航》影集的泰勒羅素與《親愛的初戀》羅根米勒等明星主演，台灣將於2月27日上映。
  
 《密弑遊戲》電影講述6名從不同意外中生還的陌生人，在努力回歸正常生活時，突然收到不明來歷的密室逃脫遊戲邀請。遊戲中總共有5大關卡：「毒火煉獄」、「冰天雪地」、「顛倒世界」、「毒氣密室」與「迷幻空間」，在不同闖關過程中，他們亦被迫面對自我最黑暗的過往瘡疤，他們也才意識到這不只是場遊戲，為求生存與贏取高達百萬美元的獎金，所有人不僅需互相幫助，還必須賭上性命互相傷害，因為最後只能有一位贏家倖存…
                 &lt;/span&gt;
 &lt;/div&gt;]</pre><p>取出介紹文，並清理換行等符號。</p><pre class="crayon-plain-tag">Intros = [t.find('span').text.replace('\n','').replace('\r','').replace('\xa0','').replace(' ','') for t in newMovie4]
Intros</pre><p></p><pre class="crayon-plain-tag">['★奧斯卡金獎得主亞當麥凱繼《大賣空》後，攜手克里斯汀貝爾、史提夫卡爾三巨頭再度合作★「蝙蝠俠」克里斯汀貝爾再展變色龍演技，傳神詮釋史上最有權勢副總統迪克錢尼★奧斯卡最佳男配角山姆洛克威爾與克里斯汀貝爾聯袂扮老，精湛化身小布希★布萊德彼特與《月光下的藍色男孩》監製共同打造，強勢問鼎2019奧斯卡最佳影片、影帝等獎項！《為副不仁》講述美國史上最有權勢的副總統迪克錢尼（克里斯汀貝爾飾），如何從白宮幕僚逐漸爬上權力的頂峰，成為全世界最有權勢的人－－美國總統小布希（山姆洛克威爾飾）的副手，以及他的政策如何重塑美國並影響至今我們身處的世界。',
 '★《惡女羅曼死》原著作者又一爭議話題傑作改編電影化！★殺人分屍案死者身份確認，完全沒想到，竟然就是我的好友！★現代東京版《羅生門》，懸疑曲折超越《渴望》、《聽說桐島退社了》！★新生代實力演員群，共同演繹謳歌青春電影傑作！★絢爛畫面搭配動感配樂，滿足視覺與聽覺的雙重饗宴！★藤岡靛、吉岡里帆、櫻井友紀、白石和彌等日本影視圈名人爭相力讚！話題人物慘遭殺害，連鎖效應在好友圈無限蔓延一群揮霍青春的青年男女，其中一位長相可愛貌美，猶如眾人「吉祥物」般存在、暱稱為「吉娃娃」的20歲少女，某天驚傳遭人分屍的命案，部分屍體並在東京灣尋獲。她周遭的好友們，開始聚在一起回憶青春，緬懷他們心目中的吉娃娃。大家這時才發現，根本沒人知道她的真名、境遇還有真正的個性。原來在大家對她毫無了解的情況下，她就跟眾人混在一起、談戀愛、甚至發生性關係。究竟真正的「吉娃娃」，到底是位什麼樣的女孩呢？【關於電影】《惡女羅曼死》作者話題傑作，懸疑曲折超越《聽說桐島退社了》《吉娃娃羅曼死》改編自日本知名漫畫家岡崎京子的短篇漫畫作品。曾打造《惡女羅曼死》等轟動不已作品的岡崎京子，特別擅長描繪情慾與悖德，並透過毫無忌諱的性愛場面表現人物內在。這部短篇漫畫，終於在2019年翻拍成劇情長片登上大銀幕。全片描述個性活潑好動、集萬千寵愛於一身的20歲美少女「吉娃娃」，某天竟被殘忍分屍，而她的遭遇也在朋友圈中引發連鎖效應。眾人開始回想自己與「吉娃娃」的每個相處細節，竟發現自己連她的本名、境遇與背景都不知道。也因為好友們各說各話，在不同說法中拼湊出吉娃娃的生活與背景，更讓本片頗有現代女性版《羅生門》的懸疑性，更猶如《渴望》、《聽說桐島退社了》的加乘綜合版。本片找來曾執導《裸睡美人》的二宮健擔任導演。二宮導演透露，親手拍攝《吉娃娃羅曼史》的真人電影版，一直是他給自己設立的目標，他並回憶：「初次拜讀原作，是我22歲剛從大阪到東京來的時候。那時我雖然想在東京拍攝更大規模的電影，卻諸事不順；即便想讓自己做些什麼，到頭來總是繞回原點，恰好就是那樣的時期，讓我遇到了這部作品。」他並補充：「只花34頁篇幅描繪的青春群像劇，卻帶來非常大的震撼。這群想試著跨越些什麼而掙扎的人物，逐漸跟我的自身形象交疊，以致於在看完原作的瞬間，我就決定要把這部作品給拍成電影。」值得一提的是，二宮導演的作品總有著最前衛的影像，以及動感的配樂，讓他的導演風格非常鮮明並深受好評。尤其本片的派對群戲眾多，導演這次也採用讓演員自由發揮的即興表演，再由鏡頭一一收錄，讓全片的派對、玩樂、性愛等場面顯得特別真實。本片演員也是一時之選，找來2019年新科藍絲帶獎影后門脇麥擔綱演出「美樹」這個角色，而讀完劇本的她也覺得「非常有趣，很想試試看」而馬上答應邀約。至於靈魂人物「吉娃娃」，則找來新銳女星吉田志織擔綱。她獨特又魅力十足，時而無邪、時而深沉，立體的人物塑造和強烈的存在感，讓人簡直無法相信這是她的首部主演作品。此外，本片也集結成田凌、寬一郎、村上虹郎、玉城蒂娜、栗山千明、淺野忠信等多位新銳、資深實力派演員共同演繹，聯手呈現年輕人面對愛情、金錢、嫉妒、慾望等如夢境般閃亮不已的絢爛青春世界。而全片所勾勒「青春的爆發」與「告終的覺悟」，導演也精準使用過去日本電影從未有過的影像與音樂勾勒出來，勢必滿足觀眾視覺與聽覺的雙重享受，一同進入青春大無畏的美麗與哀愁！',
 '★2019開春最受期待復仇爽片!冷暴力美學、血花散遍!★地表最強老爸-連恩尼遜，重拾槍火即刻開戰!復仇是人性最原始的反撲!殺我兒，我滅你全團!剷雪車司機-尼爾剛獲頒榮譽市民表揚，卻收到兒子吸毒致死的訊息，讓他生活頓時起了波瀾。他堅信兒子清白，便開始追查，赫然發現幕後有黑道組織操刀，他從朋友手中獲得黑道兇嫌名單，並依姓名順序送凶手上斷頭台。冰天雪地中，黑道們一個個死於非命，尼爾的復仇行為讓毒梟跟槍火幫派，以為是雙方在找麻煩，進而引發兩個幫派大火拼。為了幫兒子報仇，尼爾也陷入這場世紀廝殺中，雙方頓時火力全開，復仇計畫大快人心…【幕後花絮】《酷寒殺手》翻拍自爛番茄新鮮度90％超強好評《該死的順序》，導演漢斯彼得穆蘭開創新暴力美學風格，電影公司買下版權後並無改換導演，仍由漢斯繼續拍攝美語版本，融入更多美式暴力作風。導演當時會想拍這部片，是來自本身被霸凌的怨念：「我從小就喜歡報仇，只要有人欺負我，我就會反擊。」導演認為，復仇是人類非常原始的直覺，儘管沒有達到報仇目的，也能享受到樂趣。《該死的順序》當年在柏林影展首映之後，全球影評佳評如潮！帝國雜誌給予極高的讚賞，「這才是我們期待已久的復仇爽片！」知名影評網站爛番茄新鮮度近90％超強好評！國際評論對於《該死的順序》師法柯恩兄弟，也超越昆汀塔倫提諾和盧貝松的暴力美學大加讚揚！片商看中電影超強口碑便著手進行翻拍，將新暴力美學旋風帶入好萊塢；找來具有票房號召力男星-連恩尼遜擔任片中的復仇老爸。雖然連恩尼遜演出這類型的電影並不陌生，但在新片中，導演讓連恩尼遜有更多的內心戲與謀略策畫，他也不再英勇無敵，沒有特務、警察等背景，單純是一位平凡的復仇父親。在製作方面，麥可雪恩伯格曾擔任過《決殺令》製片，負責本片的暴力美學演繹，而《疾速救援》製片-麥可德雷爾，則擔綱起片中動作炫技保證，讓電影《酷寒殺手》重新定義暴力極致。',
 '★真人實事改編一生致力平權美國傳奇女法官成功奇蹟登上大銀幕★《愛的萬物論》金獎提名費莉絲蒂瓊斯X《以你的名字呼喚我》艾米漢默聯手主演★《彗星撞地球》票房女導演咪咪蕾德睽違大銀幕多年最新力作★為信念奮鬥不懈為歧視挺身而出繼《永不妥協》後又一激勵人心銀幕佳作★故事主角露絲拜德金斯伯格親自客串演出「如果連法律都不能一視同仁，兩性如何平權？」取材自現今美國最高法院唯二女大法官露絲拜德金斯伯格（菲莉絲蒂瓊斯飾）的真實成功故事，本片聚焦在年紀輕輕、剛踏出法學院校門的她，如何在男性至上、女性不被重視的工作環境中，力爭上游成為律師，為兩性爭取平權，成為美國史上最有影響力的法官之一，現在仍任職於最高法院大法官。',
 '★2019開年最爆笑噴飯喜劇，香港鬼才彭浩翔瘋狂作品，《春嬌與志明》班底火力全開，一定要你笑翻天★香港最不可思議的八婆女星大集合，為了一瓶奶！？展開瘋狂大作戰由8個閨密組成的「八婆」whatsapp群組，因彼此的恩怨，讓群組不再對話。而June也在認識了現在的老公後，漸漸疏遠其他7位閨密。她的女魔頭上司最近生了小孩，需要定時抽母奶放進冰箱。沒想到，June竟然誤把母奶加進咖啡裡，還被大老闆喝個精光，要是被發現肯定工作不保。情急之下，她只好找回很久沒聯絡的群組成員，希望在下班前，幫忙找到母奶頂替。此時，即將襲港的颱風逼近，交通大亂，八婆們能否在時間之內，完成尋奶任務呢？',
 '亞倫是法國出版界的風雲人物，然而時代在變，亞倫也忙於適應電子世代帶給出版業的衝擊，他不僅要學習如何發行電子書，就連讀者的消費取向也令他匪夷所思。人氣博主、暢銷部落客只要將在社群媒體發表的短文集結成冊，也能成為暢銷書？亞倫拒絕出版與他年紀相仿且合作多年的作家李奧納多的新書，他的作品寫得多半是自己的真實經驗，再將筆下人物稍加改名換姓，他的前妻、前任女友以及被影射的周遭人物深受其擾。這次的新書是李奧納多跟某個名人芝麻綠豆般的緋聞軼事，亞倫質疑他根本沒有創意以及想像力，然而出人意表的是亞倫身為名人的妻子卻認為這是李奧納多最好的作品…曾經榮獲坎城影展最佳導演、法國中生代最知名的導演奧利維耶阿薩亞斯今年入圍威尼斯影展競賽之作，這也是他與茱麗葉畢諾許第三度合作。導演精心設計的日常對話，涵蓋文化、民主、政治以及時事等多面向，幽默諷刺又饒富哲學寓意，尤其對現實世界女明星茱麗葉畢諾許的一番嘲弄，令人會心一笑。茱麗葉畢諾許與吉翁卡列精彩的演出令人驚艷。【關於電影】強勢挑戰大時代議題阿薩亞斯回歸16釐米力抗數位狂潮《非．虛構情事》講述近年討論度最高的議題之一——傳統紙本出版業與電子書的價值觀拉扯。在銳不可擋的現代數位化潮流當中，阿薩亞斯從未停止關注紙本書出版面臨到的夕陽產業議題，延續了過去作品《夏日時光》、《星光雲寂》中對於全球化、經濟、科技以及文化在時代下變遷的討論，從個人及群體角度出發，採用了輕鬆幽默卻又充滿哲學性的論調，讓觀眾能夠輕巧的進入議題核心。本片透過絕妙對話──無論是兩人世界或是團體聚會，還是身為編輯與明星、作家與政治狂熱組合的夫妻檔、偷情對象、工作夥伴──建構出不同背景的人們處於變遷的世界中，被傳統以及新潮拉扯的糾結感。另外，在片中描述面對現代化的掙扎時，阿薩亞斯的敘事角度選擇欣然理解當前數位化的崇高地位，但在技術方面卻選擇回歸以16釐米膠捲拍攝，盼望以創作初衷，在與資本主義的抗衡中找到更多討論空間。被問到劇中作家因大量採用自身故事作為創作題材而備受爭議，阿薩亞斯笑說：「我應該比他有道德一點吧！」法文片名原意為「雙面人生」，跟英文片名「非．虛構情事」交錯出真實與虛構從來就無法完全切割的深層寓意；電影中出版社提議可以找大明星茱麗葉畢諾許來為有聲書配音，以刺激銷量，飾演女主角瑟琳娜的正是茱麗葉本人，她在片中神回覆「我認識她的經紀人，或許可以關說一下」。劇中被嘲諷的茱麗葉畢諾許同時活靈活現地存在在電影裡，「故事無非就是現實生活的一面鏡子啊」。阿薩亞斯三度合作大滿貫影后全新卡司歡樂滿堂茱麗葉畢諾許的影后身影無庸置疑是片中一大亮點，《非．虛構情事》是她第三次與阿薩亞斯合作，相知多年的兩人早有絕佳默契，阿薩亞斯受訪時表示：「她的不羈、詼諧都讓我的靈感源源不絕。」並認為只有她能夠讓瑟琳娜的幽默立體化；而曾被封為法國最帥男演員的吉翁卡列則是在阿薩亞斯寫作過程中逐漸成形的想法，認為身為這一代最有代表性的男演員之一，只有他有資格撐得起這個角色的權威感，成功吸引觀眾的目光；而出身舞台劇演員及導演的文森馬格恩也自帶氣場，讓劇中金牌編輯與風流作家的對手戲，與吉翁卡列第一次合作就激盪出充滿電力的精彩火花。除了茱麗葉畢諾許與阿薩亞斯以外，其他卡司皆是首度合作，但執導過程中，阿薩亞斯忍不住盛讚演員們，「比我更清楚如何演繹出腳本中的幽默，甚至共鳴出新的層次！」',
 '★改編自2015年在YouTube創下逾2000萬次點閱同名恐怖短片★《愛殺瑪莉》製片群傾力打造，驚嚇程度直逼《鬼關燈》《陰兒房》！★21世紀的科技驚悚預言，直達地獄的恐怖自拍！★新世紀文明病，這次真的會送命！德國部落客茱莉亞來到美國拜訪她的姪女漢娜，卻在抵達後突然怪病纏身，臥床不起。漢娜家也開始接二連三地出現各種不尋常的超自然現象，不堪其擾的漢娜不禁懷疑一切乃因茱莉亞而起。當漢娜找到了茱莉亞的部落格後，發現茱莉亞沉迷暗網多時，並將蟄伏在暗網深處的恐怖力量帶到了現實之中，沾有嗜血意志的自拍照正威脅每一個人……',
 '★《與神同行》超人氣女星金香起突破演技暖心動人力作！★「男神」鄭雨盛、「國民萌妹」金香起睽違17年再度攜手！★《向左愛向右愛》《記憶中的美好歌聲》票房大導李翰再執導演筒！★「小迷糊」李奎炯、鄭雨盛韓國兩大型男互飆演技！信任是全世界最有力的證詞律師楊淳鎬（鄭雨盛飾）加入了一家知名的法律事務所，為一名被指控殺害雇主一家的女傭辯護，這樁謀殺案廣受媒體與社會關注，淳鎬必須贏得官司才能成為事務所合夥人。然案發現場的唯一目擊證人林智友（金香起飾）是一名自閉症少女，淳鎬必須想盡辦法讓智友敞開心房出庭作證才能贏得官司。這兩個不同世界的人漸漸成為了朋友，但在案情膠著的壓力下，他必須在有限的時間內，讓智友說出真相…【關於電影】金香起繼《與神同行》後演技再突破\u3000搭檔男神鄭雨盛續17年之緣！以賣座強片《與神同行》系列電影爆紅的「國民妹妹」金香起奪下青龍電影獎「最佳女配角獎」後，睽違17年再度與「國民暖男」鄭雨盛攜手演出催淚動人新作《證人》，而金香起在２歲時拍攝第一支廣告就是和鄭雨盛合作，讓鄭雨盛驚訝表示這是非常神奇的緣分。金香起在6歲時從廣告界踏入影壇，超齡的演技天賦讓她獲得「天才童星」的美譽，即使與黃晸玟、宋允兒、宋仲基、朴寶英、河正宇、車太鉉、朱智勛、李政宰等影帝后級別的知名影星合作也絲毫不遜色，而她在新作《證人》中首次挑戰演出自閉症少女，金香起表示：「其實接演的時候我猶豫了很久，因為這個角色難度很高。」她擔心自己無法完美詮釋，但高難度的演技挑戰又讓她躍躍欲試，最終她決定接受挑戰。鄭雨盛則表示：「金香起對表演的專注力非常驚人，她的演技魅力自然而然就流露出來了。」導演李翰也坦言金香起在《證人》中的表演非常令人動容，有好幾場戲都讓劇組人員忍不住淚灑現場，他說：「金香起的演出非常多變，你會被她真摯的演技觸動，忍不住為她哭、為她笑。」因此在所有同輩女星中，金香起是導演選角的第一人選。',
 '★熱銷300萬冊，日本超人氣國民讀物改編！★《神隱少女》《崖上的波妞》作畫監督x《電影版聲之形》知名編劇攜手打造溫暖新作！★榮獲2019年每日映畫大賞最佳動畫片！★入選2019年日本奧斯卡優秀動畫電影獎！★入選2018法國安錫動畫影展競賽片！就讀小學六年級的小織，父母不幸在車禍中喪生，由經營「春之屋」溫泉旅館的奶奶收養了她，因這場意外獲得通靈能力的她，也認識了旅館中三個心地善良卻調皮的幽靈。在旅館面臨後繼無人將被收購的困境時，年僅12歲的小織在奶奶的幫助下，展開一場成為旅館老闆娘必經的「小女將修行」之路，雖然每天都遭遇嘲笑與挫折，但天性樂觀的她勇於接受挑戰，絕不認輸！《溫泉屋小女將》將於2019年2月27日上映，更多電影資訊歡迎上官方粉絲團查詢：https://www.facebook.com/VVPfans。',
 '索尼影業最新電影《密弑遊戲》以時下最流行的密室逃脫遊戲為主題，由《陰兒房第4章：鎖命亡靈》亞當羅勃提爾導演執導、《玩命關頭》系列億萬製片打造，並由《太空迷航》影集的泰勒羅素與《親愛的初戀》羅根米勒等明星主演，台灣將於2月27日上映。《密弑遊戲》電影講述6名從不同意外中生還的陌生人，在努力回歸正常生活時，突然收到不明來歷的密室逃脫遊戲邀請。遊戲中總共有5大關卡：「毒火煉獄」、「冰天雪地」、「顛倒世界」、「毒氣密室」與「迷幻空間」，在不同闖關過程中，他們亦被迫面對自我最黑暗的過往瘡疤，他們也才意識到這不只是場遊戲，為求生存與贏取高達百萬美元的獎金，所有人不僅需互相幫助，還必須賭上性命互相傷害，因為最後只能有一位贏家倖存…']</pre><p>檢查NameCHs, NameENs, Intros, links陣列的長度是否相同(結果皆為10)。</p><pre class="crayon-plain-tag">len(NameCHs)
len(NameENs)
len(Intros)
len(links)</pre><p></p>
<h3></h3>
<h3>(3) 將以上欄位合併成data frame</h3>
<p></p><pre class="crayon-plain-tag">df = pd.DataFrame(
{
    'Name':NameCHs,
    'EnName':NameENs,
    'Intro': Intros,
    'Trailer': links
})
df</pre><p><img loading="lazy" class="alignnone size-full wp-image-2641" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33.png" alt="網路爬蟲-web-crawler" width="1780" height="968" srcset="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33.png 1780w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33-300x163.png 300w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33-768x418.png 768w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33-1024x557.png 1024w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33-830x451.png 830w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33-230x125.png 230w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33-350x190.png 350w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33-480x261.png 480w" sizes="(max-width: 1780px) 100vw, 1780px" /></p>
<p>由於以上只是「本週新片」中的其中一個分頁的電影爬蟲結果，如果想要快速爬取其他分頁的資訊，可將電影爬蟲寫成一個function。</p>
<h3></h3>
<h3>(4) 將電影爬網規則寫成function</h3>
<p>define 一個名為「yahooMovieParser」的函數，並以url為投入參數。</p><pre class="crayon-plain-tag"># create function
def yahooMovieParser(url):
    r = requests.get(url)
    web_content = r.text
    soup = BeautifulSoup(web_content,'lxml')
    
    # 中英文片名
    newMovie2 = soup.find_all('div', class_ = "release_movie_name")
    NameCHs = [t.find('a', class_='gabtn').text.replace('\n','').replace(' ','') for t in newMovie2]
    NameENs = [t.find('div', class_='en').find('a').text.replace('\n','').replace(' ','') for t in newMovie2]
    # 預告片
    newMovie3 = soup.find_all('div',class_="release_btn color_btnbox")
    links = [t.find('a',class_="btn_s_vedio gabtn")['href'] for t in newMovie3]
    # 電影介紹
    newMovie4 = soup.find_all('div',class_="release_text")
    Intros = [t.find('span').text.replace('\n','').replace('\r','').replace('\xa0','').replace(' ','') for t in newMovie4]
    #合併成data frame
    df = pd.DataFrame(
    {
        'Name':NameCHs,
        'EnName':NameENs,
        'Intro': Intros,
        'Trailer': links
    })
    return df</pre><p>執行單一URL: 手動指定url並投入函式。</p><pre class="crayon-plain-tag">url = "https://movies.yahoo.com.tw/movie_thisweek.html"
df1 = yahooMovieParser(url)
df1</pre><p><img loading="lazy" class="alignnone size-full wp-image-2641" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33.png" alt="網路爬蟲-web-crawler" width="1780" height="968" srcset="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33.png 1780w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33-300x163.png 300w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33-768x418.png 768w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33-1024x557.png 1024w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33-830x451.png 830w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33-230x125.png 230w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33-350x190.png 350w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午2.29.33-480x261.png 480w" sizes="(max-width: 1780px) 100vw, 1780px" /></p>
<p>執行多個URLs</p>
<p>將多個 url包成一個陣列 list 使用迴圈執行並回傳一個data frame</p><pre class="crayon-plain-tag">urlList = ['https://movies.yahoo.com.tw/movie_thisweek.html','https://movies.yahoo.com.tw/movie_thisweek.html?page=2']
MovieInfo = None

for u in urlList:
    d1 = yahooMovieParser(u)
    if MovieInfo is None:
        MovieInfo = d1
    else:
        MovieInfo = MovieInfo.append(d1,ignore_index=True)
    
MovieInfo</pre><p><img loading="lazy" class="alignnone size-full wp-image-2674" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13.png" alt="螢幕快照 2019-03-03 上午10.32.13" width="888" height="674" srcset="/wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13.png 888w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13-300x228.png 300w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13-768x583.png 768w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13-830x630.png 830w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13-230x175.png 230w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13-350x266.png 350w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13-480x364.png 480w" sizes="(max-width: 888px) 100vw, 888px" /></p>
<p>但由於分頁的URLs都還是人工判斷，如果可以用程式規則判斷並蒐集所有分頁，將省去更多工。</p>
<h3></h3>
<h3>(5) 自動判斷分頁資訊，蒐集urlList</h3>
<p>首先，一樣先找到分頁資訊的區塊，並檢視其HTML結構。發現分頁資訊會被包含在class = &#8216;page_numbox&#8217;的div物件中。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-2644" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.10.54.png" alt="網路爬蟲-web-crawler" width="2352" height="1226" srcset="/wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.10.54.png 2352w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.10.54-300x156.png 300w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.10.54-768x400.png 768w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.10.54-1024x534.png 1024w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.10.54-830x433.png 830w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.10.54-230x120.png 230w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.10.54-350x182.png 350w, /wp-content/uploads/2019/03/螢幕快照-2019-03-02-下午3.10.54-480x250.png 480w" sizes="(max-width: 2352px) 100vw, 2352px" /></p><pre class="crayon-plain-tag">url = "https://movies.yahoo.com.tw/movie_thisweek.html"
r = requests.get(url)
web_content = r.text
soup = BeautifulSoup(web_content,'lxml')
pageInfo = soup.find('div', class_='page_numbox')
pageInfo</pre><p></p><pre class="crayon-plain-tag">&lt;div class="page_numbox"&gt;
&lt;ul&gt;
&lt;li class="num_ar"&gt;‹&lt;/li&gt;
&lt;li class="prevtxt disabled"&gt;&lt;span&gt;上一頁&lt;/span&gt;&lt;/li&gt;
&lt;li class="active"&gt;&lt;span&gt;1&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://movies.yahoo.com.tw/movie_thisweek.html?page=2"&gt;2&lt;/a&gt;&lt;/li&gt;
&lt;li class="nexttxt"&gt;&lt;a href="http://movies.yahoo.com.tw/movie_thisweek.html?page=2" rel="next"&gt;下一頁&lt;/a&gt;&lt;/li&gt;
&lt;li class="num_ar"&gt;›&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</pre><p>撰寫一個萃取分頁URL資訊的函式。</p>
<ul>
<li>將分頁資訊的每個&lt;li&gt;&lt;/li&gt;元素中的連結取出，假設沒有連結資訊，則回傳None。</li>
</ul>
<p></p><pre class="crayon-plain-tag">def getNext(url):
    r = requests.get(url)
    web_content = r.text
    soup = BeautifulSoup(web_content,'lxml')
    pageInfo = soup.find('div', class_='page_numbox')
    tagA = pageInfo.find('li', class_="nexttxt").find('a')
    if tagA:
        return tagA['href']
    else:
        return None</pre><p>測試函式getNext()執行一次的結果。</p><pre class="crayon-plain-tag">url = "https://movies.yahoo.com.tw/movie_thisweek.html"
url2 = getNext(url)
url2</pre><p></p><pre class="crayon-plain-tag">'http://movies.yahoo.com.tw/movie_thisweek.html?page=2'</pre><p>使用while迴圈反覆執行，直到getNext()回傳None。</p><pre class="crayon-plain-tag">url = 'http://movies.yahoo.com.tw/movie_thisweek.html'
urlList = []

while url:
    urlList.append(url)
    url = getNext(url)</pre><p>檢視所有的分頁連結 (當分頁數很多時特別有效)</p><pre class="crayon-plain-tag">urlList</pre><p></p><pre class="crayon-plain-tag">['http://movies.yahoo.com.tw/movie_thisweek.html',
 'http://movies.yahoo.com.tw/movie_thisweek.html?page=2']</pre><p>綜合(1) ~ (5)電影爬蟲程式碼，自動化執行url List蒐集並爬取每個分頁下的最新電影資訊的程式碼如下：</p><pre class="crayon-plain-tag">url = 'http://movies.yahoo.com.tw/movie_thisweek.html'
urlList = []

while url:
    urlList.append(url)
    url = getNext(url)
    
MovieInfo = None

for u in urlList:
    d1 = yahooMovieParser(u)
    if MovieInfo is None:
        MovieInfo = d1
    else:
        MovieInfo = MovieInfo.append(d1,ignore_index=True)

MovieInfo</pre><p><img loading="lazy" class="alignnone size-full wp-image-2674" src="/wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13.png" alt="螢幕快照 2019-03-03 上午10.32.13" width="888" height="674" srcset="/wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13.png 888w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13-300x228.png 300w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13-768x583.png 768w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13-830x630.png 830w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13-230x175.png 230w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13-350x266.png 350w, /wp-content/uploads/2019/03/螢幕快照-2019-03-03-上午10.32.13-480x364.png 480w" sizes="(max-width: 888px) 100vw, 888px" /></p>
<hr />
<p>更多Python網路爬蟲學習筆記：</p>
<p><a href="/python-web-crawler-beautifulsoup-%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2/" target="_blank" rel="noopener noreferrer">網路爬蟲 Web Crawler | 資料不求人 基礎篇 | using Python BeautifulSoup</a></p>
<p><a href="/%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2-web-crawler-python-yahoo-movies/" target="_blank" rel="noopener noreferrer">網路爬蟲 web crawler | 奇摩電影 yahoo movies | using Python</a></p>
<p><a href="/%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2-web-crawler-text-mining-python/" target="_blank" rel="noopener noreferrer">Text Mining &amp; 網路爬蟲 web crawler | Google新聞與文章文字雲 | Python</a></p>
<p>這篇文章 <a rel="nofollow" href="/%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2-web-crawler-python-yahoo-movies/">網路爬蟲 web crawler | 奇摩電影 yahoo movies | using Python</a> 最早出現於 <a rel="nofollow" href="/">果醬珍珍•JamJam</a>。</p>
]]></content:encoded>
					
					<wfw:commentRss>/%e7%b6%b2%e8%b7%af%e7%88%ac%e8%9f%b2-web-crawler-python-yahoo-movies/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
			</item>
	</channel>
</rss>
