<!DOCTYPE html>
<html lang="zh-TW" prefix="og: http://ogp.me/ns#">
<head>
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">


	
<title>Principal Components Analysis (PCA) | 主成份分析 | R 統計</title>
<meta name="robots" content="max-image-preview:large">


<meta name="description" content="主成份分析(principal components analysis, PCA)的應用非常廣泛，可以簡化資料維度資訊，用最精簡的主成份特徵來解釋目標變數的最大變異，避免共線性與過度配適等問題。而主成份分析的計算過程會使用到線性代數中的特徵值與特徵向量技術。本學習筆記會介紹主成份分析的基礎以及R套件的函數用法。">

<meta property="og:locale" content="zh_TW">
<meta property="og:type" content="article">
<meta property="og:title" content="Principal Components Analysis (PCA) | 主成份分析 | R 統計">
<meta property="og:description" content="主成份分析(principal components analysis, PCA)的應用非常廣泛，可以簡化資料維度資訊，用最精簡的主成份特徵來解釋目標變數的最大變異，避免共線性與過度配適等問題。而主成份分析的計算過程會使用到線性代數中的特徵值與特徵向量技術。本學習筆記會介紹主成份分析的基礎以及R套件的函數用法。">
<meta property="og:url" content="/principal-components-analysis-pca-%e4%b8%bb%e6%88%90%e4%bb%bd%e5%88%86%e6%9e%90/">
<meta property="og:site_name" content="果醬珍珍•JamJam">
<meta property="article:tag" content="PCA">
<meta property="article:tag" content="principal components analysis">
<meta property="article:tag" content="主成分分析">
<meta property="article:tag" content="維度縮減">
<meta property="article:tag" content="降低維度">
<meta property="article:section" content=" 程式與統計">
<meta property="article:published_time" content="2018-09-10T12:04:27+08:00">
<meta property="article:modified_time" content="2020-07-03T02:29:49+08:00">
<meta property="og:updated_time" content="2020-07-03T02:29:49+08:00">
<meta property="og:image" content="/wp-content/uploads/2018/09/rawpixel-602145-unsplash-1024x758.jpg">
<meta property="og:image:width" content="1024">
<meta property="og:image:height" content="758">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:description" content="主成份分析(principal components analysis, PCA)的應用非常廣泛，可以簡化資料維度資訊，用最精簡的主成份特徵來解釋目標變數的最大變異，避免共線性與過度配適等問題。而主成份分析的計算過程會使用到線性代數中的特徵值與特徵向量技術。本學習筆記會介紹主成份分析的基礎以及R套件的函數用法。">
<meta name="twitter:title" content="Principal Components Analysis (PCA) | 主成份分析 | R 統計">
<meta name="twitter:image" content="/wp-content/uploads/2018/09/rawpixel-602145-unsplash.jpg">


<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//s.w.org">



<link rel="stylesheet" id="crayon-css" href="/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-theme-hwj-based-on-monokai-css" href="/wp-content/uploads/crayon-syntax-highlighter/themes/hwj-based-on-monokai/hwj-based-on-monokai.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-font-monospace-css" href="/wp-content/plugins/crayon-syntax-highlighter/fonts/monospace.css" type="text/css" media="all">
<link rel="stylesheet" id="sb_instagram_styles-css" href="/wp-content/plugins/instagram-feed/css/sb-instagram-2-2.min.css" type="text/css" media="all">
<link rel="stylesheet" id="sydney-bootstrap-css" href="/wp-content/themes/hwj-based-on-sydney/css/bootstrap/bootstrap.min.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css" type="text/css" media="all">
<link rel="stylesheet" id="titan-adminbar-styles-css" href="/wp-content/plugins/anti-spam/assets/css/admin-bar.css" type="text/css" media="all">
<link rel="stylesheet" id="sydney-fonts-css" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C400italic%2C600%7CRaleway%3A400%2C500%2C600" type="text/css" media="all">
<link rel="stylesheet" id="sydney-style-css" href="/wp-content/themes/hwj-based-on-sydney/style.css" type="text/css" media="all">
<style id="sydney-style-inline-css" type="text/css">
.site-title { font-size:32px; }
.site-description { font-size:16px; }
#mainnav ul li a { font-size:14px; }
h1 { font-size:52px; }
h2 { font-size:42px; }
h3 { font-size:32px; }
h4 { font-size:25px; }
h5 { font-size:20px; }
h6 { font-size:18px; }
body { font-size:16px; }
.single .hentry .title-post { font-size:24px; }
.header-image { background-size:cover;}
.header-image { height:500px; }
.widget-area .widget_fp_social a,#mainnav ul li a:hover, .sydney_contact_info_widget span, .roll-team .team-content .name,.roll-team .team-item .team-pop .team-social li:hover a,.roll-infomation li.address:before,.roll-infomation li.phone:before,.roll-infomation li.email:before,.roll-testimonials .name,.roll-button.border,.roll-button:hover,.roll-icon-list .icon i,.roll-icon-list .content h3 a:hover,.roll-icon-box.white .content h3 a,.roll-icon-box .icon i,.roll-icon-box .content h3 a:hover,.switcher-container .switcher-icon a:focus,.go-top:hover,.hentry .meta-post a:hover,#mainnav > ul > li > a.active, #mainnav > ul > li > a:hover, button:hover, input[type="button"]:hover, input[type="reset"]:hover, input[type="submit"]:hover, .text-color, .social-menu-widget a, .social-menu-widget a:hover, .archive .team-social li a, a, h1 a, h2 a, h3 a, h4 a, h5 a, h6 a,.classic-alt .meta-post a,.single .hentry .meta-post a { color:#3d3d3d}
.reply,.woocommerce div.product .woocommerce-tabs ul.tabs li.active,.woocommerce #respond input#submit,.woocommerce a.button,.woocommerce button.button,.woocommerce input.button,.project-filter li a.active, .project-filter li a:hover,.preloader .pre-bounce1, .preloader .pre-bounce2,.roll-team .team-item .team-pop,.roll-progress .progress-animate,.roll-socials li a:hover,.roll-project .project-item .project-pop,.roll-project .project-filter li.active,.roll-project .project-filter li:hover,.roll-button.light:hover,.roll-button.border:hover,.roll-button,.roll-icon-box.white .icon,.owl-theme .owl-controls .owl-page.active span,.owl-theme .owl-controls.clickable .owl-page:hover span,.go-top,.bottom .socials li:hover a,.sidebar .widget:before,.blog-pagination ul li.active,.blog-pagination ul li:hover a,.content-area .hentry:after,.text-slider .maintitle:after,.error-wrap #search-submit:hover,#mainnav .sub-menu li:hover > a,#mainnav ul li ul:after, button, input[type="button"], input[type="reset"], input[type="submit"], .panel-grid-cell .widget-title:after { background-color:#3d3d3d}
.roll-socials li a:hover,.roll-socials li a,.roll-button.light:hover,.roll-button.border,.roll-button,.roll-icon-list .icon,.roll-icon-box .icon,.owl-theme .owl-controls .owl-page span,.comment .comment-detail,.widget-tags .tag-list a:hover,.blog-pagination ul li,.hentry blockquote,.error-wrap #search-submit:hover,textarea:focus,input[type="text"]:focus,input[type="password"]:focus,input[type="datetime"]:focus,input[type="datetime-local"]:focus,input[type="date"]:focus,input[type="month"]:focus,input[type="time"]:focus,input[type="week"]:focus,input[type="number"]:focus,input[type="email"]:focus,input[type="url"]:focus,input[type="search"]:focus,input[type="tel"]:focus,input[type="color"]:focus, button, input[type="button"], input[type="reset"], input[type="submit"], .archive .team-social li a { border-color:#3d3d3d}
.site-header.float-header { background-color:rgba(0,0,0,0.9);}
@media only screen and (max-width: 1024px) { .site-header { background-color:#000000;}}
.site-title a, .site-title a:hover { color:#ffffff}
.site-description { color:#ffffff}
#mainnav ul li a, #mainnav ul li::before { color:#ffffff}
#mainnav .sub-menu li a { color:#ffffff}
#mainnav .sub-menu li a { background:#1c1c1c}
.text-slider .maintitle, .text-slider .subtitle { color:#ffffff}
body { color:#5e5e5e}
#secondary { background-color:#ffffff}
#secondary, #secondary a, #secondary .widget-title { color:#767676}
.footer-widgets { background-color:#252525}
.btn-menu { color:#ffffff}
#mainnav ul li a:hover { color:#d65050}
.site-footer { background-color:#1c1c1c}
.site-footer,.site-footer a { color:#666666}
.overlay { background-color:#000000}
.page-wrap { padding-top:10px;}
.page-wrap { padding-bottom:100px;}
@media only screen and (max-width: 1025px) {		
			.mobile-slide {
				display: block;
			}
			.slide-item {
				background-image: none !important;
			}
			.header-slider {
			}
			.slide-item {
				height: auto !important;
			}
			.slide-inner {
				min-height: initial;
			} 
		}
@media only screen and (max-width: 780px) { 
    	h1 { font-size: 32px;}
		h2 { font-size: 28px;}
		h3 { font-size: 22px;}
		h4 { font-size: 18px;}
		h5 { font-size: 16px;}
		h6 { font-size: 14px;}
    }

</style>
<link rel="stylesheet" id="sydney-font-awesome-css" href="/wp-content/themes/hwj-based-on-sydney/fonts/font-awesome.min.css" type="text/css" media="all">

<script type="text/javascript" src="/wp-includes/js/jquery/jquery.min.js" id="jquery-core-js"></script>
<script type="text/javascript" src="/wp-includes/js/jquery/jquery-migrate.min.js" id="jquery-migrate-js"></script>
<script type="text/javascript" id="crayon_js-js-extra">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/localhost\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js" id="crayon_js-js"></script>





</head><body><div id="fb-root"></div><script>(function(d, s, id) {

	var js, fjs = d.getElementsByTagName(s)[0];

	if (d.getElementById(id)) return;

	js = d.createElement(s); js.id = id;

	js.src = '//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.3';

	fjs.parentNode.insertBefore(js, fjs);

	}(document, 'script', 'facebook-jssdk'));</script>	<style type="text/css">
		.header-image {
			background-image: url(/wp-content/uploads/2018/09/果醬珍珍_首圖_10.jpg);
			display: block;
		}
		@media only screen and (max-width: 1024px) {
			.header-inner {
				display: block;
			}
			.header-image {
				background-image: none;
				height: auto !important;
			}		
		}
	</style>
			<style type="text/css" id="wp-custom-css">
			.entry-content a {
	text-decoration: underline;
	color: #9f6ad4;
}		</style>
			<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
	</script>
	

	




	<div class="preloader">
	    <div class="spinner">
	        <div class="pre-bounce1"></div>
	        <div class="pre-bounce2"></div>
	    </div>
	</div>
	
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">跳至主內容區</a>

	
	
	
	<div id="masthead" class="site-header" role="banner" style="display:none;"> 
		<div class="header-wrap">
            <div class="container">
                <div class="row">
				<div class="col-md-4 col-sm-8 col-xs-12">
		        					<a href="/" title="果醬珍珍•JamJam"><img class="site-logo" src="/wp-content/uploads/2018/09/grape_320.png" alt="果醬珍珍•JamJam"></a>
		        				</div>
				<div class="col-md-8 col-sm-4 col-xs-12">
					<div class="btn-menu"></div>
					<nav id="mainnav" class="mainnav" role="navigation">
						<div class="menu-jamleecute-container"><ul id="menu-jamleecute" class="menu"><li id="menu-item-1691" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1691"><a href="/category/programming-statistics/"> 程式與統計</a></li>
<li id="menu-item-626" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-626"><a href="/category/travel/">旅遊</a></li>
<li id="menu-item-627" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-627"><a href="/category/foodie/">美食</a></li>
<li id="menu-item-2415" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2415"><a href="/%e7%b0%a1%e4%bb%8b/">關於我</a></li>
</ul></div>					</nav>
				</div>
				</div>
			</div>
		</div>
	</div>
	
	
	

	
	<style>
	.header-img-bounding-box {
	  background-image: url("/wp-content/uploads/2018/09/%E8%83%8C%E6%99%AF%E5%8E%9F%E5%9C%96_v2.jpg");
    background-size:     cover;                      /* <------ */
    background-repeat:   no-repeat;
    background-position: center center;              /* optional, center the image */
/* 	height: 300px; */
	padding-top:55px;
	padding-bottom:55px;
		}
		.title_img {
		    display: block;
    margin-left: auto;
    margin-right: auto;
    width: 50%;
		min-width: 340px;
			max-width: 800px;

		}
		
		
		.subtitle_img {
			display: block;
    margin-left: auto;
    margin-right: auto;
    width: 50%;
		min-width: 340px;
			max-width: 800px;
		}
		
		
		.subtitle_overlay {
			margin-top:20px;
			background-color: rgba(255, 255, 255, 0.7);
			padding-bottom:8px;
		}
	</style>
	
	<div>
		<a href="/">
		<div class="header-img-bounding-box">

			<img src="/wp-content/uploads/2018/09/title.png" class="title_img">
			<div class="subtitle_overlay">
			<img src="/wp-content/uploads/2018/09/subtitle.png" class="subtitle_img">
			</div>			
		</div>	
		</a>
	</div>
	
	
	
	<header>
		<nav id="my_mainnav" class="my_mainnav" role="navigation">
				<div class="menu-jamleecute-container"><ul id="menu-jamleecute-1" class="menu"><li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1691"><a href="/category/programming-statistics/"> 程式與統計</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-626"><a href="/category/travel/">旅遊</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-627"><a href="/category/foodie/">美食</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2415"><a href="/%e7%b0%a1%e4%bb%8b/">關於我</a></li>
</ul></div>		</nav>
	</header>

	
	
	
	<div id="content" class="page-wrap">
		
		
		
		<style>
			.home_intro {
				    margin: 0 12%;
					/*height: 400px;*/
    				/*background: yellow;*/
				
			}
			
			.home_intro .content{
				display: flex; 
    display: -webkit-flex;
    justify-content: center;
    -webkit-justify-content: center;
    flex-wrap: wrap;
			}
			.home_intro .content .intro {
				width: 240px;
    			
				margin: 0 auto;
				
			}
			.home_intro .content .intro .image {
				/*width: 240px;
    			padding: 0px;
				margin: 0 auto;
				display: inline-block;*/
			  position: relative;
			  width: 240px;
			  height: 240px;
			  overflow: hidden;
			  border-radius: 50%;
			}
			.home_intro .content .description{
				padding: 0 0px;
    			margin: 0 auto;
    			width: 240px;
				text-align: center;
			}
			.home_intro .content .social_icon {
				margin: 0 7px;
			}
			
			.circular--landscape {
			  display: inline-block;
			  position: relative;
			  width: 200px;
			  height: 200px;
			  overflow: hidden;
			  border-radius: 50%;
			}

			.home_intro .content .intro .image img {
			  width: auto;
			  height: 100%;
			  /*margin-left: -50px;*/
			}
		</style>
		

					
				
		
		<div class="container content-wrapper">
			<div class="row">	
				
				
				
	
	
	<div id="primary" class="content-area col-md-9 ">

		
		<main id="main" class="post-wrap" role="main">

		
			
<article id="post-1346" class="post-1346 post type-post status-publish format-standard has-post-thumbnail hentry category-programming-statistics category-statistics-model tag-pca tag-principal-components-analysis tag-271 tag-273 tag-272">
	
	
			<div class="entry-thumb">
			<img width="2500" height="1851" src="/wp-content/uploads/2018/09/rawpixel-602145-unsplash.jpg" class="attachment-large-thumb size-large-thumb wp-post-image" alt="rawpixel-602145-unsplash" loading="lazy" srcset="/wp-content/uploads/2018/09/rawpixel-602145-unsplash.jpg 2500w,/wp-content/uploads/2018/09/rawpixel-602145-unsplash-300x222.jpg 300w,/wp-content/uploads/2018/09/rawpixel-602145-unsplash-768x569.jpg 768w,/wp-content/uploads/2018/09/rawpixel-602145-unsplash-1024x758.jpg 1024w,/wp-content/uploads/2018/09/rawpixel-602145-unsplash-830x615.jpg 830w,/wp-content/uploads/2018/09/rawpixel-602145-unsplash-230x170.jpg 230w,/wp-content/uploads/2018/09/rawpixel-602145-unsplash-350x259.jpg 350w,/wp-content/uploads/2018/09/rawpixel-602145-unsplash-480x355.jpg 480w" sizes="(max-width: 2500px) 100vw, 2500px">		</div>
		
	<header class="entry-header">
		
		<div class="meta-post">
			<a href="/category/programming-statistics/" title=" 程式與統計" class="post-cat"> 程式與統計</a><a href="/category/programming-statistics/statistics-model/" title="統計模型" class="post-cat">統計模型</a>		</div>

		<h1 class="title-post entry-title">Principal Components Analysis (PCA) | 主成份分析 | R 統計</h1>
				<div class="single-meta">
			<span class="posted-on">發表於 <a href="/principal-components-analysis-pca-%e4%b8%bb%e6%88%90%e4%bb%bd%e5%88%86%e6%9e%90/" rel="bookmark"><time class="entry-date published" datetime="2018-09-10T20:04:27+08:00">2018-09-10</time><time class="updated" datetime="2020-07-03T10:29:49+08:00">2020-07-03</time></a></span><span class="byline"> <span class="author vcard"><a class="url fn n" href="/author/jamleecute/">jamleecute</a></span></span>		</div>
			</header>

	

	<div class="entry-content">
		<p>主成份分析(principal components analysis, PCA)的應用非常廣泛，可以簡化資料維度資訊，用最精簡的主成份特徵來解釋目標變數的最大變異，避免共線性與過度配適等問題。而主成份分析的計算過程會使用到線性代數中的<a href="https://zh.wikipedia.org/wiki/%E7%89%B9%E5%BE%81%E5%80%BC%E5%92%8C%E7%89%B9%E5%BE%81%E5%90%91%E9%87%8F">特徵值與特徵向量</a>技術。本學習筆記會介紹主成份分析的基礎以及R套件的函數用法。</p>
<h3>Principal Components Analysis 主成份分析簡介</h3>
<ul>
<li>主成分分析屬於非監督是式學習法，即處理一組沒有回應變數Y(目標變數)的一群X變數(\(X_{1},X_{2},…,X_{n}\))，即沒標籤的資料集(unlabeled data)。</li>
<li>主成份分析的主要目的為：降低資料維度。一方面可以避免共線性問題發生，一方面別是當資料維度非常大量時，可以減少運算並避免過度配適等問題產生。</li>
</ul>
<h4>本篇文章主要會分成以下幾個部分</h4>
<ol>
<li>載入所需套件</li>
<li>資料準備</li>
<li>主成份分析</li>
<li>萃取主成分</li>
<li>R語言內建的PCA函數</li>
</ol>
<h3>1. 載入所需套件</h3>
<p></p>

		<div id="crayon-60ed950b26fb3653076045" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
library(tidyverse)  # data manipulation and visualization
library(gridExtra)  # plot arrangement</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fb3653076045-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fb3653076045-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fb3653076045-1">library(tidyverse)  # data manipulation and visualization</div><div class="crayon-line" id="crayon-60ed950b26fb3653076045-2">library(gridExtra)  # plot arrangement</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p></p>
<h3>2. 資料準備</h3>
<p>我們主要使用R內建數據USArrests。</p>

		<div id="crayon-60ed950b26fb7123882896" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
data("USArrests")
head(USArrests, 10)

#             Murder Assault UrbanPop Rape
# Alabama       13.2     236       58 21.2
# Alaska        10.0     263       48 44.5
# Arizona        8.1     294       80 31.0
# Arkansas       8.8     190       50 19.5
# California     9.0     276       91 40.6
# Colorado       7.9     204       78 38.7
# Connecticut    3.3     110       77 11.1
# Delaware       5.9     238       72 15.8
# Florida       15.4     335       80 31.9
# Georgia       17.4     211       60 25.8</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fb7123882896-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fb7123882896-2">2</div><div class="crayon-num" data-line="crayon-60ed950b26fb7123882896-3">3</div><div class="crayon-num" data-line="crayon-60ed950b26fb7123882896-4">4</div><div class="crayon-num" data-line="crayon-60ed950b26fb7123882896-5">5</div><div class="crayon-num" data-line="crayon-60ed950b26fb7123882896-6">6</div><div class="crayon-num" data-line="crayon-60ed950b26fb7123882896-7">7</div><div class="crayon-num" data-line="crayon-60ed950b26fb7123882896-8">8</div><div class="crayon-num" data-line="crayon-60ed950b26fb7123882896-9">9</div><div class="crayon-num" data-line="crayon-60ed950b26fb7123882896-10">10</div><div class="crayon-num" data-line="crayon-60ed950b26fb7123882896-11">11</div><div class="crayon-num" data-line="crayon-60ed950b26fb7123882896-12">12</div><div class="crayon-num" data-line="crayon-60ed950b26fb7123882896-13">13</div><div class="crayon-num" data-line="crayon-60ed950b26fb7123882896-14">14</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fb7123882896-1">data("USArrests")</div><div class="crayon-line" id="crayon-60ed950b26fb7123882896-2">head(USArrests, 10)</div><div class="crayon-line" id="crayon-60ed950b26fb7123882896-3"> </div><div class="crayon-line" id="crayon-60ed950b26fb7123882896-4">#             Murder Assault UrbanPop Rape</div><div class="crayon-line" id="crayon-60ed950b26fb7123882896-5"># Alabama       13.2     236       58 21.2</div><div class="crayon-line" id="crayon-60ed950b26fb7123882896-6"># Alaska        10.0     263       48 44.5</div><div class="crayon-line" id="crayon-60ed950b26fb7123882896-7"># Arizona        8.1     294       80 31.0</div><div class="crayon-line" id="crayon-60ed950b26fb7123882896-8"># Arkansas       8.8     190       50 19.5</div><div class="crayon-line" id="crayon-60ed950b26fb7123882896-9"># California     9.0     276       91 40.6</div><div class="crayon-line" id="crayon-60ed950b26fb7123882896-10"># Colorado       7.9     204       78 38.7</div><div class="crayon-line" id="crayon-60ed950b26fb7123882896-11"># Connecticut    3.3     110       77 11.1</div><div class="crayon-line" id="crayon-60ed950b26fb7123882896-12"># Delaware       5.9     238       72 15.8</div><div class="crayon-line" id="crayon-60ed950b26fb7123882896-13"># Florida       15.4     335       80 31.9</div><div class="crayon-line" id="crayon-60ed950b26fb7123882896-14"># Georgia       17.4     211       60 25.8</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p></p>
<h3>3. Principal Components Analysis 主成份分析</h3>
<ul>
<li>目的為使用較少的變數來解釋最多的變異。</li>
<li>當遇上大量變數時，可以透過主成份分析將資料維度有效縮減，以利後續資料探勘與分析工作。</li>
<li>我們希望透過主成份分析來達成：<span style="color: #9f6ad4;">運用最少的代表性資料維度</span>來有效摘要大部分的資料資訊或變異（能捕捉到越多資料變異越好）。</li>
</ul>
<h4>principal components analysis 主成份分析計算</h4>
<p>假設我們的dataset由n個觀測值和p個維度所組成，而<span style="color: #9f6ad4;">主成份分析(PCA)所找出的維度將是<span style="text-decoration: underline;">p個維度的線性組合</span></span>。</p>
<p>第一個主成份(\(Z_{1}\))到第p個主成份(\(Z_{p}\))可透過以下公式來表示：</p>
<p>$$Z_{1}=\phi_{11}X_{1}+\phi_{21}X_{2}+…+\phi_{p1}X_{p}$$</p>
<p>…</p>
<p>$$Z_{p}=\phi_{1p}X_{1}+\phi_{2p}X_{2}+…+\phi_{pp}X_{p}$$</p>
<p>其中，</p>
<ul>
<li>\(\phi_{ji}\)稱為每一個主成分\(Z_{i}\)的<strong><span style="color: #9f6ad4;">負荷向量(loading vector)</span></strong>(由\(\phi_{1i},\phi_{2i},…,\phi_{pi}\)所組成)。為標準化數值，不同主成分間的負荷向量可互相比較。</li>
<li>每個主成份\(Z_{i}\)的\(\phi_{ji}\)是透過最大化對應主成份\(Z_{i}\)的的解釋變異而得。</li>
<li>\(\sum_{j=1}^p\phi_{ji}^2=1\)，表示各主成分由不同比重的原始維度所組成。</li>
<li>每個主成分的<span style="color: #9f6ad4;">負荷向量\(\phi_{ji}\)(loading vector)都是相互垂直的向量(\(\phi_{1}\perp \phi_{2} \perp …. \perp \phi_{p}\))</span>，即表示<span style="color: #9f6ad4;">各主成分彼此間的解釋變異為互相獨立的</span>。</li>
</ul>
<p>我們可以使用線性代數的技術來計算每一個主成分的負荷向量(loading vector)：</p>
<ol>
<li>資料標準化。</li>
<li>計算個原始維度兩兩間的共變異矩陣(covariance matrix)。其中，共變異數計算公式如下：<br>
$$cov(X,Y)=\frac{1}{N-1}\sum_{i=1}^N(x_{i}-\bar{x})(y_{i}-\bar{y})$$</li>
<li>計算共變異矩陣的特徵值(eigenvalues)與特徵向量(eigenvectors)。<span style="color: #9f6ad4;">而對應由大到小排列的特徵值的特徵向量，依序分別為解釋最大變異的主成分\(Z_{1}\)到解釋變異最小的主成分\(Z_{p}\)的負荷向量</span>。</li>
<li>萃取主成分。</li>
</ol>
<p>Step 1: 資料維度標準化</p>
<p>主成份分析的第一步就是進行資料的標準化，標準化的好處是，可以消除不同指標間的單位度量衡差異。待分析出不同主成份後，可以互相比較不同主成份間的平均值。我們將各維度（欄）進行標準化(centering)。＊而scale的方式就是 (x – mean(x)) / sd(x)。</p>

		<div id="crayon-60ed950b26fb9031141426" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
scaled_df <- apply(USArrests, 2, scale)
head(scaled_df)

#          Murder   Assault   UrbanPop         Rape
# [1,] 1.24256408 0.7828393 -0.5209066 -0.003416473
# [2,] 0.50786248 1.1068225 -1.2117642  2.484202941
# [3,] 0.07163341 1.4788032  0.9989801  1.042878388
# [4,] 0.23234938 0.2308680 -1.0735927 -0.184916602
# [5,] 0.27826823 1.2628144  1.7589234  2.067820292
# [6,] 0.02571456 0.3988593  0.8608085  1.864967207</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fb9031141426-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fb9031141426-2">2</div><div class="crayon-num" data-line="crayon-60ed950b26fb9031141426-3">3</div><div class="crayon-num" data-line="crayon-60ed950b26fb9031141426-4">4</div><div class="crayon-num" data-line="crayon-60ed950b26fb9031141426-5">5</div><div class="crayon-num" data-line="crayon-60ed950b26fb9031141426-6">6</div><div class="crayon-num" data-line="crayon-60ed950b26fb9031141426-7">7</div><div class="crayon-num" data-line="crayon-60ed950b26fb9031141426-8">8</div><div class="crayon-num" data-line="crayon-60ed950b26fb9031141426-9">9</div><div class="crayon-num" data-line="crayon-60ed950b26fb9031141426-10">10</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fb9031141426-1">scaled_df <div class="crayon-line" id="crayon-60ed950b26fb9031141426-2">head(scaled_df)</div><div class="crayon-line" id="crayon-60ed950b26fb9031141426-3"> </div><div class="crayon-line" id="crayon-60ed950b26fb9031141426-4">#          Murder   Assault   UrbanPop         Rape</div><div class="crayon-line" id="crayon-60ed950b26fb9031141426-5"># [1,] 1.24256408 0.7828393 -0.5209066 -0.003416473</div><div class="crayon-line" id="crayon-60ed950b26fb9031141426-6"># [2,] 0.50786248 1.1068225 -1.2117642  2.484202941</div><div class="crayon-line" id="crayon-60ed950b26fb9031141426-7"># [3,] 0.07163341 1.4788032  0.9989801  1.042878388</div><div class="crayon-line" id="crayon-60ed950b26fb9031141426-8"># [4,] 0.23234938 0.2308680 -1.0735927 -0.184916602</div><div class="crayon-line" id="crayon-60ed950b26fb9031141426-9"># [5,] 0.27826823 1.2628144  1.7589234  2.067820292</div><div class="crayon-line" id="crayon-60ed950b26fb9031141426-10"># [6,] 0.02571456 0.3988593  0.8608085  1.864967207</div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>step 2: 我們可以使用cov()函數來計算兩兩變數的共變異數矩陣\(p\times p\)如下。</p>

		<div id="crayon-60ed950b26fbb900190274" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
arrests.cov <- cov(scaled_df)
arrests.cov
#              Murder   Assault   UrbanPop      Rape
# Murder   1.00000000 0.8018733 0.06957262 0.5635788
# Assault  0.80187331 1.0000000 0.25887170 0.6652412
# UrbanPop 0.06957262 0.2588717 1.00000000 0.4113412
# Rape     0.56357883 0.6652412 0.41134124 1.0000000</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fbb900190274-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fbb900190274-2">2</div><div class="crayon-num" data-line="crayon-60ed950b26fbb900190274-3">3</div><div class="crayon-num" data-line="crayon-60ed950b26fbb900190274-4">4</div><div class="crayon-num" data-line="crayon-60ed950b26fbb900190274-5">5</div><div class="crayon-num" data-line="crayon-60ed950b26fbb900190274-6">6</div><div class="crayon-num" data-line="crayon-60ed950b26fbb900190274-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fbb900190274-1">arrests.cov <div class="crayon-line" id="crayon-60ed950b26fbb900190274-2">arrests.cov</div><div class="crayon-line" id="crayon-60ed950b26fbb900190274-3">#              Murder   Assault   UrbanPop      Rape</div><div class="crayon-line" id="crayon-60ed950b26fbb900190274-4"># Murder   1.00000000 0.8018733 0.06957262 0.5635788</div><div class="crayon-line" id="crayon-60ed950b26fbb900190274-5"># Assault  0.80187331 1.0000000 0.25887170 0.6652412</div><div class="crayon-line" id="crayon-60ed950b26fbb900190274-6"># UrbanPop 0.06957262 0.2588717 1.00000000 0.4113412</div><div class="crayon-line" id="crayon-60ed950b26fbb900190274-7"># Rape     0.56357883 0.6652412 0.41134124 1.0000000</div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>step 3: 計算矩陣的特徵值(eigen values)與特徵向量(eigen vectors)。eigen()函數產出的物件包含兩部分：</p>
<ul>
<li>$values：排序過後的特徵值。</li>
<li>$vectors：對應不同特徵值的特徵向量。</li>
</ul>
<p></p>

		<div id="crayon-60ed950b26fbc804918671" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
arrests.eigen <- eigen(arrests.cov)
arrests.eigen
# eigen() decomposition
# $values
# [1] 2.4802416 0.9897652 0.3565632 0.1734301
# 
# $vectors
#            [,1]       [,2]       [,3]        [,4]
# [1,] -0.5358995  0.4181809 -0.3412327  0.64922780
# [2,] -0.5831836  0.1879856 -0.2681484 -0.74340748
# [3,] -0.2781909 -0.8728062 -0.3780158  0.13387773
# [4,] -0.5434321 -0.1673186  0.8177779  0.08902432</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fbc804918671-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fbc804918671-2">2</div><div class="crayon-num" data-line="crayon-60ed950b26fbc804918671-3">3</div><div class="crayon-num" data-line="crayon-60ed950b26fbc804918671-4">4</div><div class="crayon-num" data-line="crayon-60ed950b26fbc804918671-5">5</div><div class="crayon-num" data-line="crayon-60ed950b26fbc804918671-6">6</div><div class="crayon-num" data-line="crayon-60ed950b26fbc804918671-7">7</div><div class="crayon-num" data-line="crayon-60ed950b26fbc804918671-8">8</div><div class="crayon-num" data-line="crayon-60ed950b26fbc804918671-9">9</div><div class="crayon-num" data-line="crayon-60ed950b26fbc804918671-10">10</div><div class="crayon-num" data-line="crayon-60ed950b26fbc804918671-11">11</div><div class="crayon-num" data-line="crayon-60ed950b26fbc804918671-12">12</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fbc804918671-1">arrests.eigen <div class="crayon-line" id="crayon-60ed950b26fbc804918671-2">arrests.eigen</div><div class="crayon-line" id="crayon-60ed950b26fbc804918671-3"># eigen() decomposition</div><div class="crayon-line" id="crayon-60ed950b26fbc804918671-4"># $values</div><div class="crayon-line" id="crayon-60ed950b26fbc804918671-5"># [1] 2.4802416 0.9897652 0.3565632 0.1734301</div><div class="crayon-line" id="crayon-60ed950b26fbc804918671-6"># </div><div class="crayon-line" id="crayon-60ed950b26fbc804918671-7"># $vectors</div><div class="crayon-line" id="crayon-60ed950b26fbc804918671-8">#            [,1]       [,2]       [,3]        [,4]</div><div class="crayon-line" id="crayon-60ed950b26fbc804918671-9"># [1,] -0.5358995  0.4181809 -0.3412327  0.64922780</div><div class="crayon-line" id="crayon-60ed950b26fbc804918671-10"># [2,] -0.5831836  0.1879856 -0.2681484 -0.74340748</div><div class="crayon-line" id="crayon-60ed950b26fbc804918671-11"># [3,] -0.2781909 -0.8728062 -0.3780158  0.13387773</div><div class="crayon-line" id="crayon-60ed950b26fbc804918671-12"># [4,] -0.5434321 -0.1673186  0.8177779  0.08902432</div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>step 4: 我們將萃取首兩大主成分1和主成分2作為我們說明的例子。</p>

		<div id="crayon-60ed950b26fbe654302423" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
# Extract the loadings
(phi <- arrests.eigen$vectors[,1:2])
#            [,1]       [,2]
# [1,] -0.5358995  0.4181809
# [2,] -0.5831836  0.1879856
# [3,] -0.2781909 -0.8728062
# [4,] -0.5434321 -0.1673186</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fbe654302423-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fbe654302423-2">2</div><div class="crayon-num" data-line="crayon-60ed950b26fbe654302423-3">3</div><div class="crayon-num" data-line="crayon-60ed950b26fbe654302423-4">4</div><div class="crayon-num" data-line="crayon-60ed950b26fbe654302423-5">5</div><div class="crayon-num" data-line="crayon-60ed950b26fbe654302423-6">6</div><div class="crayon-num" data-line="crayon-60ed950b26fbe654302423-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fbe654302423-1"># Extract the loadings</div><div class="crayon-line" id="crayon-60ed950b26fbe654302423-2">(phi <div class="crayon-line" id="crayon-60ed950b26fbe654302423-3">#            [,1]       [,2]</div><div class="crayon-line" id="crayon-60ed950b26fbe654302423-4"># [1,] -0.5358995  0.4181809</div><div class="crayon-line" id="crayon-60ed950b26fbe654302423-5"># [2,] -0.5831836  0.1879856</div><div class="crayon-line" id="crayon-60ed950b26fbe654302423-6"># [3,] -0.2781909 -0.8728062</div><div class="crayon-line" id="crayon-60ed950b26fbe654302423-7"># [4,] -0.5434321 -0.1673186</div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>因為R計算的特徵向量預設為指向負值，且我們知道<span style="color: #9f6ad4;">特徵向量是獨特的值，只要是在同一方向上，不管是正向還是負向<span style="text-decoration: underline;">純量縮放</span>，都是相同的</span>。為了方便說明，我們將特徵向量乘上純量-1。</p>

		<div id="crayon-60ed950b26fc0918833358" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
phi <- -phi
row.names(phi) <- c("Murder", "Assault", "UrbanPop", "Rape")
colnames(phi) <- c("PC1", "PC2")
phi
#                PC1        PC2
# Murder   0.5358995 -0.4181809
# Assault  0.5831836 -0.1879856
# UrbanPop 0.2781909  0.8728062
# Rape     0.5434321  0.1673186</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fc0918833358-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fc0918833358-2">2</div><div class="crayon-num" data-line="crayon-60ed950b26fc0918833358-3">3</div><div class="crayon-num" data-line="crayon-60ed950b26fc0918833358-4">4</div><div class="crayon-num" data-line="crayon-60ed950b26fc0918833358-5">5</div><div class="crayon-num" data-line="crayon-60ed950b26fc0918833358-6">6</div><div class="crayon-num" data-line="crayon-60ed950b26fc0918833358-7">7</div><div class="crayon-num" data-line="crayon-60ed950b26fc0918833358-8">8</div><div class="crayon-num" data-line="crayon-60ed950b26fc0918833358-9">9</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fc0918833358-1">phi <div class="crayon-line" id="crayon-60ed950b26fc0918833358-2">row.names(phi) <div class="crayon-line" id="crayon-60ed950b26fc0918833358-3">colnames(phi) <div class="crayon-line" id="crayon-60ed950b26fc0918833358-4">phi</div><div class="crayon-line" id="crayon-60ed950b26fc0918833358-5">#                PC1        PC2</div><div class="crayon-line" id="crayon-60ed950b26fc0918833358-6"># Murder   0.5358995 -0.4181809</div><div class="crayon-line" id="crayon-60ed950b26fc0918833358-7"># Assault  0.5831836 -0.1879856</div><div class="crayon-line" id="crayon-60ed950b26fc0918833358-8"># UrbanPop 0.2781909  0.8728062</div><div class="crayon-line" id="crayon-60ed950b26fc0918833358-9"># Rape     0.5434321  0.1673186</div></div></div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>檢視以上萃取的主成分向量，我們可以做出以下推論：</p>
<ol>
<li>主成分1(PC1): 代表各大犯罪（包含謀殺、突擊、強姦）的犯罪發生率因子。</li>
<li>主成分2(PC2): 代表為城市化水平因子。</li>
</ol>
<p>有了對主成分的基本了解後，<span style="color: #9f6ad4;">我們將<span style="text-decoration: underline;">各觀測值</span><strong>投影</strong>到<span style="text-decoration: underline;">各主成分向量上</span>，並計算<span style="text-decoration: underline;">各觀測值</span>的<strong><span style="text-decoration: underline;">各主成分分數(principal component scores)</span></strong></span>。</p>

		<div id="crayon-60ed950b26fc1014052646" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
# Calculate Principal Components scores
PC1 <- as.matrix(scaled_df) %*% phi[,1] # %*% 表示矩陣乘法，此處為nxp矩陣乘上px1的向量，得到nx1的向量。
PC2 <- as.matrix(scaled_df) %*% phi[,2]

# Create data frame with Principal Components scores
PC <- data.frame(State = row.names(USArrests), PC1, PC2)
head(PC)

#        State        PC1        PC2
# 1    Alabama  0.9756604 -1.1220012
# 2     Alaska  1.9305379 -1.0624269
# 3    Arizona  1.7454429  0.7384595
# 4   Arkansas -0.1399989 -1.1085423
# 5 California  2.4986128  1.5274267
# 6   Colorado  1.4993407  0.9776297</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fc1014052646-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fc1014052646-2">2</div><div class="crayon-num" data-line="crayon-60ed950b26fc1014052646-3">3</div><div class="crayon-num" data-line="crayon-60ed950b26fc1014052646-4">4</div><div class="crayon-num" data-line="crayon-60ed950b26fc1014052646-5">5</div><div class="crayon-num" data-line="crayon-60ed950b26fc1014052646-6">6</div><div class="crayon-num" data-line="crayon-60ed950b26fc1014052646-7">7</div><div class="crayon-num" data-line="crayon-60ed950b26fc1014052646-8">8</div><div class="crayon-num" data-line="crayon-60ed950b26fc1014052646-9">9</div><div class="crayon-num" data-line="crayon-60ed950b26fc1014052646-10">10</div><div class="crayon-num" data-line="crayon-60ed950b26fc1014052646-11">11</div><div class="crayon-num" data-line="crayon-60ed950b26fc1014052646-12">12</div><div class="crayon-num" data-line="crayon-60ed950b26fc1014052646-13">13</div><div class="crayon-num" data-line="crayon-60ed950b26fc1014052646-14">14</div><div class="crayon-num" data-line="crayon-60ed950b26fc1014052646-15">15</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fc1014052646-1"># Calculate Principal Components scores</div><div class="crayon-line" id="crayon-60ed950b26fc1014052646-2">PC1 <div class="crayon-line" id="crayon-60ed950b26fc1014052646-3">PC2 <div class="crayon-line" id="crayon-60ed950b26fc1014052646-4"> </div><div class="crayon-line" id="crayon-60ed950b26fc1014052646-5"># Create data frame with Principal Components scores</div><div class="crayon-line" id="crayon-60ed950b26fc1014052646-6">PC <div class="crayon-line" id="crayon-60ed950b26fc1014052646-7">head(PC)</div><div class="crayon-line" id="crayon-60ed950b26fc1014052646-8"> </div><div class="crayon-line" id="crayon-60ed950b26fc1014052646-9">#        State        PC1        PC2</div><div class="crayon-line" id="crayon-60ed950b26fc1014052646-10"># 1    Alabama  0.9756604 -1.1220012</div><div class="crayon-line" id="crayon-60ed950b26fc1014052646-11"># 2     Alaska  1.9305379 -1.0624269</div><div class="crayon-line" id="crayon-60ed950b26fc1014052646-12"># 3    Arizona  1.7454429  0.7384595</div><div class="crayon-line" id="crayon-60ed950b26fc1014052646-13"># 4   Arkansas -0.1399989 -1.1085423</div><div class="crayon-line" id="crayon-60ed950b26fc1014052646-14"># 5 California  2.4986128  1.5274267</div><div class="crayon-line" id="crayon-60ed950b26fc1014052646-15"># 6   Colorado  1.4993407  0.9776297</div></div></div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>接著，我們將各國對應的主成分維度繪製成二維的平面圖。</p>

		<div id="crayon-60ed950b26fc2639067668" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
# Plot Principal Components for each State
par(family="黑體-繁 中黑")
ggplot(PC, aes(PC1, PC2)) + 
  modelr::geom_ref_line(h = 0) +
  modelr::geom_ref_line(v = 0) +
  geom_text(aes(label = State), size = 3) +
  xlab("PC1: rate of serious crime, 重大犯罪發生率") + 
  ylab("PC2: urbanization, 都市化程度") + 
  ggtitle("First Two Principal Components of USArrests Data")+
  theme(text=element_text(family="黑體-繁 中黑"))</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fc2639067668-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fc2639067668-2">2</div><div class="crayon-num" data-line="crayon-60ed950b26fc2639067668-3">3</div><div class="crayon-num" data-line="crayon-60ed950b26fc2639067668-4">4</div><div class="crayon-num" data-line="crayon-60ed950b26fc2639067668-5">5</div><div class="crayon-num" data-line="crayon-60ed950b26fc2639067668-6">6</div><div class="crayon-num" data-line="crayon-60ed950b26fc2639067668-7">7</div><div class="crayon-num" data-line="crayon-60ed950b26fc2639067668-8">8</div><div class="crayon-num" data-line="crayon-60ed950b26fc2639067668-9">9</div><div class="crayon-num" data-line="crayon-60ed950b26fc2639067668-10">10</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fc2639067668-1"># Plot Principal Components for each State</div><div class="crayon-line" id="crayon-60ed950b26fc2639067668-2">par(family="黑體-繁 中黑")</div><div class="crayon-line" id="crayon-60ed950b26fc2639067668-3">ggplot(PC, aes(PC1, PC2)) + </div><div class="crayon-line" id="crayon-60ed950b26fc2639067668-4">  modelr::geom_ref_line(h = 0) +</div><div class="crayon-line" id="crayon-60ed950b26fc2639067668-5">  modelr::geom_ref_line(v = 0) +</div><div class="crayon-line" id="crayon-60ed950b26fc2639067668-6">  geom_text(aes(label = State), size = 3) +</div><div class="crayon-line" id="crayon-60ed950b26fc2639067668-7">  xlab("PC1: rate of serious crime, 重大犯罪發生率") + </div><div class="crayon-line" id="crayon-60ed950b26fc2639067668-8">  ylab("PC2: urbanization, 都市化程度") + </div><div class="crayon-line" id="crayon-60ed950b26fc2639067668-9">  ggtitle("First Two Principal Components of USArrests Data")+</div><div class="crayon-line" id="crayon-60ed950b26fc2639067668-10">  theme(text=element_text(family="黑體-繁 中黑"))</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p></p>
<ul>
<li>在PC1重大犯罪率維度上，Florida, Navada, California具有高重大犯罪率，而North Dakota, Vermont的重大犯罪率則較低。</li>
<li>在PC2都市化程度維度上，Hawaii, New Jersey為高度都市化城市，而North California, Mississippi的都市化程度則較低。</li>
<li>而接近中心點的城市如Indiana, Virginia則表示在兩維度表現皆為平均值。</li>
</ul>
<p><img loading="lazy" class="alignnone size-full wp-image-1388" src="/wp-content/uploads/2018/09/Rplot01-1.jpeg" alt="principal components analysis, PCA, 主成份分析" width="700" height="661" srcset="/wp-content/uploads/2018/09/Rplot01-1.jpeg 700w,/wp-content/uploads/2018/09/Rplot01-1-300x283.jpeg 300w,/wp-content/uploads/2018/09/Rplot01-1-230x217.jpeg 230w,/wp-content/uploads/2018/09/Rplot01-1-350x331.jpeg 350w,/wp-content/uploads/2018/09/Rplot01-1-480x453.jpeg 480w" sizes="(max-width: 700px) 100vw, 700px"></p>
<div align="center"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><br>
<br>
<ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7946632597933771" data-ad-slot="8154450369" data-ad-format="auto" data-full-width-responsive="true"></ins><br>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
<h3>4. 萃取主成分</h3>
<p>透過以上計算過程我們能夠產出p個主成分向量，但是卻會有以下疑問：</p>
<ul>
<li>該如何決定萃取的主成分數目？</li>
<li>萃取的主成分又構成資料變異的多少比例？</li>
</ul>
<p>以下我們將介紹常用的指標<span style="color: #9f6ad4;"><strong><span style="text-decoration: underline;">PVE(The Proportion of Variance Explained)</span></strong></span>以及以利用該指標所繪出的資訊曲線圖，來輔助我們判斷每一個主成分解釋變異比例以及合適的萃取數。</p>
<h4>The Proportion of Variance Explained (PVE)</h4>
<p>第m個主成分解釋的變異量佔比計算公式如下：</p>
<p>$$PVE=\frac{\sum_{i=1}^n(\sum_{j=1}^p\phi_{jm}x_{ij})^2} {\sum_{j=1}^p\sum_{i=1}^n x_{ij}^2}$$</p>
<p>即為<strong><span style="color: #9f6ad4;">第m個主成分的特徵值除上所有主成分特徵值加總</span></strong>。</p>

		<div id="crayon-60ed950b26fc4848486794" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
PVE <- arrests.eigen$values / sum(arrests.eigen$values)
round(PVE, 2)
# [1] 0.62 0.25 0.09 0.04</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fc4848486794-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fc4848486794-2">2</div><div class="crayon-num" data-line="crayon-60ed950b26fc4848486794-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fc4848486794-1">PVE <div class="crayon-line" id="crayon-60ed950b26fc4848486794-2">round(PVE, 2)</div><div class="crayon-line" id="crayon-60ed950b26fc4848486794-3"># [1] 0.62 0.25 0.09 0.04</div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>從上面計算結果，我們可知第一個主成分解釋變異佔比為62%，第二主成分解釋變異占比為25%。而首兩個主成分總解釋變異便佔了87%。</p>
<p>我們可繪出各主成分所對應的解釋變異佔比以及累積佔比圖。</p>

		<div id="crayon-60ed950b26fc5738579408" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
# PVE (aka scree) plot
PVEplot <-
  qplot(c(1:4), PVE) + 
  geom_line() + 
  xlab("Principal Component") + 
  ylab("PVE") +
  ggtitle("Scree Plot") +
  ylim(0, 1)


# Cumulative PVE plot
cumPVE <- 
  qplot(c(1:4), cumsum(PVE)) + 
  geom_line() + 
  xlab("Principal Component") + 
  ylab(NULL) + 
  ggtitle("Cumulative Scree Plot") +
  ylim(0,1)

grid.arrange(PVEplot, cumPVE, ncol = 2)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-2">2</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-3">3</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-4">4</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-5">5</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-6">6</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-7">7</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-8">8</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-9">9</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-10">10</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-11">11</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-12">12</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-13">13</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-14">14</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-15">15</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-16">16</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-17">17</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-18">18</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-19">19</div><div class="crayon-num" data-line="crayon-60ed950b26fc5738579408-20">20</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fc5738579408-1"># PVE (aka scree) plot</div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-2">PVEplot <div class="crayon-line" id="crayon-60ed950b26fc5738579408-3">  qplot(c(1:4), PVE) + </div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-4">  geom_line() + </div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-5">  xlab("Principal Component") + </div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-6">  ylab("PVE") +</div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-7">  ggtitle("Scree Plot") +</div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-8">  ylim(0, 1)</div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-9"> </div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-10"> </div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-11"># Cumulative PVE plot</div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-12">cumPVE <div class="crayon-line" id="crayon-60ed950b26fc5738579408-13">  qplot(c(1:4), cumsum(PVE)) + </div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-14">  geom_line() + </div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-15">  xlab("Principal Component") + </div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-16">  ylab(NULL) + </div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-17">  ggtitle("Cumulative Scree Plot") +</div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-18">  ylim(0,1)</div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-19"> </div><div class="crayon-line" id="crayon-60ed950b26fc5738579408-20">grid.arrange(PVEplot, cumPVE, ncol = 2)</div></div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p><img loading="lazy" class="alignnone size-large wp-image-1394" src="/wp-content/uploads/2018/09/Rplot02-1024x967.jpeg" alt="principal components analysis, PCA, 主成份分析" width="1024" height="967" srcset="/wp-content/uploads/2018/09/Rplot02-1024x967.jpeg 1024w,/wp-content/uploads/2018/09/Rplot02-300x283.jpeg 300w,/wp-content/uploads/2018/09/Rplot02-768x725.jpeg 768w,/wp-content/uploads/2018/09/Rplot02-830x784.jpeg 830w,/wp-content/uploads/2018/09/Rplot02-230x217.jpeg 230w,/wp-content/uploads/2018/09/Rplot02-350x330.jpeg 350w,/wp-content/uploads/2018/09/Rplot02-480x453.jpeg 480w,/wp-content/uploads/2018/09/Rplot02.jpeg 1200w" sizes="(max-width: 1024px) 100vw, 1024px"></p>
<h4>決定主成分萃取數</h4>
<p>會視不同的分析目的和情形而定。一般來說，<strong><span style="color: #9f6ad4;">會根據每個主成分解釋變異百分比變化圖或累積圖，找出解釋絕大部分變異的最少主成分</span></strong>，約為線條出現「肘彎」轉折點處。比如說根據累積圖（上圖右），我們發現第三和第四主成分解釋的變異都有限，不如前兩個主成分，因此我們挑選解釋變異佔比前兩大主成分，兩主成分總構成約87%的變異。</p>
<div align="center"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><br>
<br>
<ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7946632597933771" data-ad-slot="8154450369" data-ad-format="auto" data-full-width-responsive="true"></ins><br>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
<h3>5. R語言內建的PCA函數</h3>
<p>在前面幾個步驟，我們為了熟悉主成分的計算邏輯，手動計算資料的共變異矩陣與矩陣對應的特徵值與特徵向量，但並不適合複雜的PCA運算。這邊將介紹一個R簡化PCA運算常用的套件: stats套件中的prcomp()函數。</p>
<p>prcomp()函數可以被用來快速處理上述幾個PCA相關運算。幾個重要參數包括：</p>
<ul>
<li>center: 預設值為TRUE。表示將資料平均值置中為0。</li>
<li>scale: 預設值為TRUE。表示將資料標準差壓縮為1。</li>
</ul>
<p></p>

		<div id="crayon-60ed950b26fc6097201577" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
pca_result <- prcomp(x = USArrests, center = TRUE, scale = TRUE)
pca_result

# Standard deviations (1, .., p=4):
# [1] 1.5748783 0.9948694 0.5971291 0.4164494
# 
# Rotation (n x k) = (4 x 4):
#                 PC1        PC2        PC3         PC4
# Murder   -0.5358995  0.4181809 -0.3412327  0.64922780
# Assault  -0.5831836  0.1879856 -0.2681484 -0.74340748
# UrbanPop -0.2781909 -0.8728062 -0.3780158  0.13387773
# Rape     -0.5434321 -0.1673186  0.8177779  0.08902432

names(pca_result)
# [1] "sdev"     "rotation" "center"   "scale"    "x"</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fc6097201577-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fc6097201577-2">2</div><div class="crayon-num" data-line="crayon-60ed950b26fc6097201577-3">3</div><div class="crayon-num" data-line="crayon-60ed950b26fc6097201577-4">4</div><div class="crayon-num" data-line="crayon-60ed950b26fc6097201577-5">5</div><div class="crayon-num" data-line="crayon-60ed950b26fc6097201577-6">6</div><div class="crayon-num" data-line="crayon-60ed950b26fc6097201577-7">7</div><div class="crayon-num" data-line="crayon-60ed950b26fc6097201577-8">8</div><div class="crayon-num" data-line="crayon-60ed950b26fc6097201577-9">9</div><div class="crayon-num" data-line="crayon-60ed950b26fc6097201577-10">10</div><div class="crayon-num" data-line="crayon-60ed950b26fc6097201577-11">11</div><div class="crayon-num" data-line="crayon-60ed950b26fc6097201577-12">12</div><div class="crayon-num" data-line="crayon-60ed950b26fc6097201577-13">13</div><div class="crayon-num" data-line="crayon-60ed950b26fc6097201577-14">14</div><div class="crayon-num" data-line="crayon-60ed950b26fc6097201577-15">15</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fc6097201577-1">pca_result <div class="crayon-line" id="crayon-60ed950b26fc6097201577-2">pca_result</div><div class="crayon-line" id="crayon-60ed950b26fc6097201577-3"> </div><div class="crayon-line" id="crayon-60ed950b26fc6097201577-4"># Standard deviations (1, .., p=4):</div><div class="crayon-line" id="crayon-60ed950b26fc6097201577-5"># [1] 1.5748783 0.9948694 0.5971291 0.4164494</div><div class="crayon-line" id="crayon-60ed950b26fc6097201577-6"># </div><div class="crayon-line" id="crayon-60ed950b26fc6097201577-7"># Rotation (n x k) = (4 x 4):</div><div class="crayon-line" id="crayon-60ed950b26fc6097201577-8">#                 PC1        PC2        PC3         PC4</div><div class="crayon-line" id="crayon-60ed950b26fc6097201577-9"># Murder   -0.5358995  0.4181809 -0.3412327  0.64922780</div><div class="crayon-line" id="crayon-60ed950b26fc6097201577-10"># Assault  -0.5831836  0.1879856 -0.2681484 -0.74340748</div><div class="crayon-line" id="crayon-60ed950b26fc6097201577-11"># UrbanPop -0.2781909 -0.8728062 -0.3780158  0.13387773</div><div class="crayon-line" id="crayon-60ed950b26fc6097201577-12"># Rape     -0.5434321 -0.1673186  0.8177779  0.08902432</div><div class="crayon-line" id="crayon-60ed950b26fc6097201577-13"> </div><div class="crayon-line" id="crayon-60ed950b26fc6097201577-14">names(pca_result)</div><div class="crayon-line" id="crayon-60ed950b26fc6097201577-15"># [1] "sdev"     "rotation" "center"   "scale"    "x"</div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>我們可將pca_result結果全部列出或列出list名稱names(pca_result)或透過pca_result$xxx單獨呼叫list物件，對照了解以下資訊。</p>
<p>sdev: 表示每個主成分的標準差。</p>

		<div id="crayon-60ed950b26fc9543695132" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
pca_result$sdev
# [1] 1.5748783 0.9948694 0.5971291 0.4164494</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fc9543695132-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fc9543695132-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fc9543695132-1">pca_result$sdev</div><div class="crayon-line" id="crayon-60ed950b26fc9543695132-2"># [1] 1.5748783 0.9948694 0.5971291 0.4164494</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>rotation: 每個主成分的負荷向量(loading vector)。也因為R預設特徵向量指向負向，我們調整將特徵向量乘上純量-1。經調整後，便和我們先前手動計算的結果相同了。</p>

		<div id="crayon-60ed950b26fca304100031" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
pca_result$rotation
#                 PC1        PC2        PC3         PC4
# Murder   -0.5358995  0.4181809 -0.3412327  0.64922780
# Assault  -0.5831836  0.1879856 -0.2681484 -0.74340748
# UrbanPop -0.2781909 -0.8728062 -0.3780158  0.13387773
# Rape     -0.5434321 -0.1673186  0.8177779  0.08902432

pca_result$rotation <- -pca_result$rotation
pca_result$rotation
#                PC1        PC2        PC3         PC4
# Murder   0.5358995 -0.4181809  0.3412327 -0.64922780
# Assault  0.5831836 -0.1879856  0.2681484  0.74340748
# UrbanPop 0.2781909  0.8728062  0.3780158 -0.13387773
# Rape     0.5434321  0.1673186 -0.8177779 -0.08902432</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fca304100031-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fca304100031-2">2</div><div class="crayon-num" data-line="crayon-60ed950b26fca304100031-3">3</div><div class="crayon-num" data-line="crayon-60ed950b26fca304100031-4">4</div><div class="crayon-num" data-line="crayon-60ed950b26fca304100031-5">5</div><div class="crayon-num" data-line="crayon-60ed950b26fca304100031-6">6</div><div class="crayon-num" data-line="crayon-60ed950b26fca304100031-7">7</div><div class="crayon-num" data-line="crayon-60ed950b26fca304100031-8">8</div><div class="crayon-num" data-line="crayon-60ed950b26fca304100031-9">9</div><div class="crayon-num" data-line="crayon-60ed950b26fca304100031-10">10</div><div class="crayon-num" data-line="crayon-60ed950b26fca304100031-11">11</div><div class="crayon-num" data-line="crayon-60ed950b26fca304100031-12">12</div><div class="crayon-num" data-line="crayon-60ed950b26fca304100031-13">13</div><div class="crayon-num" data-line="crayon-60ed950b26fca304100031-14">14</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fca304100031-1">pca_result$rotation</div><div class="crayon-line" id="crayon-60ed950b26fca304100031-2">#                 PC1        PC2        PC3         PC4</div><div class="crayon-line" id="crayon-60ed950b26fca304100031-3"># Murder   -0.5358995  0.4181809 -0.3412327  0.64922780</div><div class="crayon-line" id="crayon-60ed950b26fca304100031-4"># Assault  -0.5831836  0.1879856 -0.2681484 -0.74340748</div><div class="crayon-line" id="crayon-60ed950b26fca304100031-5"># UrbanPop -0.2781909 -0.8728062 -0.3780158  0.13387773</div><div class="crayon-line" id="crayon-60ed950b26fca304100031-6"># Rape     -0.5434321 -0.1673186  0.8177779  0.08902432</div><div class="crayon-line" id="crayon-60ed950b26fca304100031-7"> </div><div class="crayon-line" id="crayon-60ed950b26fca304100031-8">pca_result$rotation <div class="crayon-line" id="crayon-60ed950b26fca304100031-9">pca_result$rotation</div><div class="crayon-line" id="crayon-60ed950b26fca304100031-10">#                PC1        PC2        PC3         PC4</div><div class="crayon-line" id="crayon-60ed950b26fca304100031-11"># Murder   0.5358995 -0.4181809  0.3412327 -0.64922780</div><div class="crayon-line" id="crayon-60ed950b26fca304100031-12"># Assault  0.5831836 -0.1879856  0.2681484  0.74340748</div><div class="crayon-line" id="crayon-60ed950b26fca304100031-13"># UrbanPop 0.2781909  0.8728062  0.3780158 -0.13387773</div><div class="crayon-line" id="crayon-60ed950b26fca304100031-14"># Rape     0.5434321  0.1673186 -0.8177779 -0.08902432</div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>center, scale: 每一個主成分在資料標準化前的平均數與標準差。</p>

		<div id="crayon-60ed950b26fcb939115752" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
pca_result$center
# Murder  Assault UrbanPop     Rape 
#  7.788  170.760   65.540   21.232 
pca_result$scale
#   Murder   Assault  UrbanPop      Rape 
# 4.355510 83.337661 14.474763  9.366385</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fcb939115752-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fcb939115752-2">2</div><div class="crayon-num" data-line="crayon-60ed950b26fcb939115752-3">3</div><div class="crayon-num" data-line="crayon-60ed950b26fcb939115752-4">4</div><div class="crayon-num" data-line="crayon-60ed950b26fcb939115752-5">5</div><div class="crayon-num" data-line="crayon-60ed950b26fcb939115752-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fcb939115752-1">pca_result$center</div><div class="crayon-line" id="crayon-60ed950b26fcb939115752-2"># Murder  Assault UrbanPop     Rape </div><div class="crayon-line" id="crayon-60ed950b26fcb939115752-3">#  7.788  170.760   65.540   21.232 </div><div class="crayon-line" id="crayon-60ed950b26fcb939115752-4">pca_result$scale</div><div class="crayon-line" id="crayon-60ed950b26fcb939115752-5">#   Murder   Assault  UrbanPop      Rape </div><div class="crayon-line" id="crayon-60ed950b26fcb939115752-6"># 4.355510 83.337661 14.474763  9.366385</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>另外，我們也可以<span style="text-decoration: underline;"><strong>從結果取得每一個國家（每一個觀察值）的主成分分數</strong></span>。（<span style="color: #9f6ad4;">但記得，如同特徵向量之處理，主成分分數也要乘上純量-1</span>) 。</p>

		<div id="crayon-60ed950b26fcc512217547" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
pca_result$x <- - pca_result$x
head(pca_result$x)
#                   PC1        PC2         PC3          PC4
# Alabama     0.9756604 -1.1220012  0.43980366 -0.154696581
# Alaska      1.9305379 -1.0624269 -2.01950027  0.434175454
# Arizona     1.7454429  0.7384595 -0.05423025  0.826264240
# Arkansas   -0.1399989 -1.1085423 -0.11342217  0.180973554
# California  2.4986128  1.5274267 -0.59254100  0.338559240
# Colorado    1.4993407  0.9776297 -1.08400162 -0.001450164</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fcc512217547-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fcc512217547-2">2</div><div class="crayon-num" data-line="crayon-60ed950b26fcc512217547-3">3</div><div class="crayon-num" data-line="crayon-60ed950b26fcc512217547-4">4</div><div class="crayon-num" data-line="crayon-60ed950b26fcc512217547-5">5</div><div class="crayon-num" data-line="crayon-60ed950b26fcc512217547-6">6</div><div class="crayon-num" data-line="crayon-60ed950b26fcc512217547-7">7</div><div class="crayon-num" data-line="crayon-60ed950b26fcc512217547-8">8</div><div class="crayon-num" data-line="crayon-60ed950b26fcc512217547-9">9</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fcc512217547-1">pca_result$x <div class="crayon-line" id="crayon-60ed950b26fcc512217547-2">head(pca_result$x)</div><div class="crayon-line" id="crayon-60ed950b26fcc512217547-3">#                   PC1        PC2         PC3          PC4</div><div class="crayon-line" id="crayon-60ed950b26fcc512217547-4"># Alabama     0.9756604 -1.1220012  0.43980366 -0.154696581</div><div class="crayon-line" id="crayon-60ed950b26fcc512217547-5"># Alaska      1.9305379 -1.0624269 -2.01950027  0.434175454</div><div class="crayon-line" id="crayon-60ed950b26fcc512217547-6"># Arizona     1.7454429  0.7384595 -0.05423025  0.826264240</div><div class="crayon-line" id="crayon-60ed950b26fcc512217547-7"># Arkansas   -0.1399989 -1.1085423 -0.11342217  0.180973554</div><div class="crayon-line" id="crayon-60ed950b26fcc512217547-8"># California  2.4986128  1.5274267 -0.59254100  0.338559240</div><div class="crayon-line" id="crayon-60ed950b26fcc512217547-9"># Colorado    1.4993407  0.9776297 -1.08400162 -0.001450164</div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>如果要印出二維主成分圖，可以使用stat套件中的biplot()函數。常用參數包括：</p>
<ul>
<li>choice: 預設為使用第一和第二欄來繪製(choice = 1:2)。如果想要調整繪製x,y軸，比如說繪製第三和第四主成分則可將參數設定為choices = 3:4。</li>
</ul>
<p></p>

		<div id="crayon-60ed950b26fce861354693" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
biplot(x = pca_result) #default為第一和第二欄</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fce861354693-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fce861354693-1">biplot(x = pca_result) #default為第一和第二欄</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>跟先前比較不同之處，圖中的標記的紅色向量分別表示各變數對主成分的作用的方向。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-1396" src="/wp-content/uploads/2018/09/Rplot03-2.jpeg" alt="principal components analysis, PCA, 主成份分析" width="707" height="700" srcset="/wp-content/uploads/2018/09/Rplot03-2.jpeg 707w,/wp-content/uploads/2018/09/Rplot03-2-150x150.jpeg 150w,/wp-content/uploads/2018/09/Rplot03-2-300x297.jpeg 300w,/wp-content/uploads/2018/09/Rplot03-2-230x228.jpeg 230w,/wp-content/uploads/2018/09/Rplot03-2-350x347.jpeg 350w,/wp-content/uploads/2018/09/Rplot03-2-480x475.jpeg 480w" sizes="(max-width: 707px) 100vw, 707px"></p>
<p>另外，我們也可以算出每個主成分解釋變異量。</p>

		<div id="crayon-60ed950b26fcf959977259" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
(VE <- pca_result$sdev^2)
# [1] 2.4802416 0.9897652 0.3565632 0.1734301</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fcf959977259-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fcf959977259-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fcf959977259-1">(VE <div class="crayon-line" id="crayon-60ed950b26fcf959977259-2"># [1] 2.4802416 0.9897652 0.3565632 0.1734301</div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>計算PVE。結果跟先前手動計算相同。</p>

		<div id="crayon-60ed950b26fd0138593065" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
PVE <- VE / sum(VE)
round(PVE, 2)
## [1] 0.62 0.25 0.09 0.04</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950b26fd0138593065-1">1</div><div class="crayon-num" data-line="crayon-60ed950b26fd0138593065-2">2</div><div class="crayon-num" data-line="crayon-60ed950b26fd0138593065-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950b26fd0138593065-1">PVE <div class="crayon-line" id="crayon-60ed950b26fd0138593065-2">round(PVE, 2)</div><div class="crayon-line" id="crayon-60ed950b26fd0138593065-3">## [1] 0.62 0.25 0.09 0.04</div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p></p>
<h3>總結</h3>
<p>主成分分析的應用非常廣泛，不僅可搭配迴歸、羅吉斯回歸、分群演算法一併使用，來有效降低維度。</p>
<p>或是說，在查看分群結果時，我們可透過fviz_cluster()或plot.kmeans()函數將多維資料呈現在二維平面用的即是主成分分析方法(請參考「<a href="/%e7%b5%b1%e8%a8%88-r%e8%aa%9e%e8%a8%80-%e5%88%86%e7%be%a4%e5%88%86%e6%9e%90-clustering-partitional-clustering-%e5%88%87%e5%89%b2%e5%bc%8f%e5%88%86%e7%be%a4-k-means%e3%80%81k-medoid-2/" target="_blank" rel="noopener noreferrer">分群分析 Clustering | Partitional Clustering</a>」)。</p>
<div align="center"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><br>
<br>
<ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7946632597933771" data-ad-slot="8154450369" data-ad-format="auto" data-full-width-responsive="true"></ins><br>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
<hr>
<p>更多統計模型筆記連結：</p>
<ol>
<li><a href="/linear-regression-%e7%b7%9a%e6%80%a7%e8%bf%b4%e6%ad%b8%e6%a8%a1%e5%9e%8b/" target="_blank" rel="noopener noreferrer">Linear Regression | 線性迴歸模型 | using AirQuality Dataset</a></li>
<li><a href="/regularized-regression-ridge-lasso-elastic/" target="_blank" rel="noopener noreferrer">Regularized Regression | 正規化迴歸 – Ridge, Lasso, Elastic Net | R語言</a></li>
<li><a href="/logistic-regression-part1-%e7%be%85%e5%90%89%e6%96%af%e8%bf%b4%e6%ad%b8/" target="_blank" rel="noopener noreferrer">Logistic Regression 羅吉斯迴歸 | part1 – 資料探勘與處理 | 統計 R語言</a></li>
<li><a href="/logistic-regression-part2-%e7%be%85%e5%90%89%e6%96%af%e8%bf%b4%e6%ad%b8/" target="_blank" rel="noopener noreferrer">Logistic Regression 羅吉斯迴歸 | part2 – 模型建置、診斷與比較 | R語言</a></li>
<li><a href="/decision-tree-cart-%e6%b1%ba%e7%ad%96%e6%a8%b9/" target="_blank" rel="noopener noreferrer">Decision Tree 決策樹 | CART, Conditional Inference Tree, Random Forest</a></li>
<li><a href="/regression-tree-%e8%bf%b4%e6%ad%b8%e6%a8%b9-bagging-bootstrap-aggrgation-r%e8%aa%9e%e8%a8%80/" target="_blank" rel="noopener noreferrer">Regression Tree | 迴歸樹, Bagging, Bootstrap Aggregation | R語言</a></li>
<li><a href="/random-forests-%e9%9a%a8%e6%a9%9f%e6%a3%ae%e6%9e%97/" target="_blank" rel="noopener noreferrer">Random Forests 隨機森林 | randomForest, ranger, h2o | R語言</a></li>
<li><a href="/gradient-boosting-machines-gbm/" target="_blank" rel="noopener noreferrer">Gradient Boosting Machines GBM | gbm, xgboost, h2o | R語言</a></li>
<li><a href="/hierarchical-clustering-%e9%9a%8e%e5%b1%a4%e5%bc%8f%e5%88%86%e7%be%a4/" target="_blank" rel="noopener noreferrer">Hierarchical Clustering 階層式分群 | Clustering 資料分群 | R統計</a></li>
<li><a href="/partitional-clustering-kmeans-kmedoid/" target="_blank" rel="noopener noreferrer">Partitional Clustering | 切割式分群 | Kmeans, Kmedoid | Clustering 資料分群</a></li>
<li><a href="/principal-components-analysis-pca-%e4%b8%bb%e6%88%90%e4%bb%bd%e5%88%86%e6%9e%90/" target="_blank" rel="noopener noreferrer">Principal Components Analysis (PCA) | 主成份分析 | R 統計</a></li>
</ol>
<hr>
<p>參考:</p>
<ol>
<li><a href="https://tinyurl.com/y796qqca">歐萊禮  R資料科學</a></li>
</ol>
			</div>

	<footer class="entry-footer">
		<span class="tags-links"> <a href="/tag/pca/" rel="tag">PCA</a>0<a href="/tag/principal-components-analysis/" rel="tag">principal components analysis</a>0<a href="/tag/%e4%b8%bb%e6%88%90%e5%88%86%e5%88%86%e6%9e%90/" rel="tag">主成分分析</a>0<a href="/tag/%e7%b6%ad%e5%ba%a6%e7%b8%ae%e6%b8%9b/" rel="tag">維度縮減</a>0<a href="/tag/%e9%99%8d%e4%bd%8e%e7%b6%ad%e5%ba%a6/" rel="tag">降低維度</a></span>	</footer>

	
</article>

				<nav class="navigation post-navigation" role="navigation">
		<h2 class="screen-reader-text">文章導覽列</h2>
		<div class="nav-links clearfix">
			<div class="nav-previous"><span>⟵</span><a href="/partitional-clustering-kmeans-kmedoid/" rel="prev">Partitional Clustering 切割式分群 | Kmeans, Kmedoid | Clustering 資料分群</a></div><div class="nav-next"><a href="/kurogeya-shabushabu-%e9%bb%91%e6%af%9b%e5%b1%8b/" rel="next">黑毛屋 kurogeya | 吃的到高級日本和牛的涮涮鍋 | 台北信義 新光三越A4</a><span>⟶</span></div>		</div>
	</nav>
	
			
<div id="comments" class="comments-area">

	
			<h4 class="comment-title">
			在《<span>Principal Components Analysis (PCA) | 主成份分析 | R 統計</span>》中有 1 則留言		</h4>

		
		<ol class="comments-list">
					<li id="comment-3265" class="comment even thread-even depth-1">
			<article id="div-comment-3265" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="http://1.gravatar.com/avatar/76a6fe21b40560751e402a9d3ee6b06c?s=60&d=mm&r=g" srcset="http://1.gravatar.com/avatar/76a6fe21b40560751e402a9d3ee6b06c?s=120&d=mm&r=g 2x" class="avatar avatar-60 photo" height="60" width="60" loading="lazy">						<b class="fn">Tony</b><span class="says">表示:</span>					</div>

					<div class="comment-metadata">
						<a href="/principal-components-analysis-pca-%e4%b8%bb%e6%88%90%e4%bb%bd%e5%88%86%e6%9e%90/#comment-3265"><time datetime="2019-06-24T02:35:09+08:00">2019-06-2402:35:09</time></a>					</div>

									</footer>

				<div class="comment-content">
					<p>請教一下，文中提及主成分分析可搭配迴歸、羅吉斯回歸等演算法。如將訓練資料集的輸入變數進行PCA，然後萃取前5個主成分進行建模(多元迴歸)，之後的測試資料集是不是要自行萃取前5個主成分才能帶入模型; 或是要使用訓練資料集的PCA前5個主成分的權重來計算出測試資料集的5個主成分，然後再用多元回歸模型進行預測?<br>
再麻煩您解惑，謝謝。</p>
				</div>

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="#comment-3265" data-commentid="3265" data-postid="1346" data-belowelement="div-comment-3265" data-respondelement="respond" data-replyto="回覆給「Tony」" aria-label="回覆給「Tony」">回覆</a></div>			</article>
		</li>
		</ol>

		
	
	
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">發佈留言 <small><a rel="nofollow" id="cancel-comment-reply-link" href="/principal-components-analysis-pca-%e4%b8%bb%e6%88%90%e4%bb%bd%e5%88%86%e6%9e%90/#respond" style="display:none;">取消回覆</a></small></h3><form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate><p class="comment-notes"><span id="email-notes">發佈留言必須填寫的電子郵件地址不會公開。</span> 必填欄位標示為 <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">留言</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required"></textarea></p><p class="comment-form-author"><label for="author">顯示名稱 <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required="required"></p>
<p class="comment-form-email"><label for="email">電子郵件地址 <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" required="required"></p>
<p class="comment-form-url"><label for="url">個人網站網址</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200"></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="發佈留言"> <input type="hidden" name="comment_post_ID" value="1346" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p><div class="wantispam-required-fields"><input type="hidden" name="wantispam_t" class="wantispam-control wantispam-control-t" value="1626182923"><div class="wantispam-group wantispam-group-q" style="clear: both;">
					<label>Current ye@r <span class="required">*</span></label>
					<input type="hidden" name="wantispam_a" class="wantispam-control wantispam-control-a" value="2021">
					<input type="text" name="wantispam_q" class="wantispam-control wantispam-control-q" value="7.2.0" autocomplete="off">
				  </div>
<div class="wantispam-group wantispam-group-e" style="display: none;">
					<label>Leave this field empty</label>
					<input type="text" name="wantispam_e_email_url_website" class="wantispam-control wantispam-control-e" value="" autocomplete="off">
				  </div>
</div></form>	</div>
	
</div>

		
		</main>
	</div>

	

<div id="secondary" class="widget-area col-md-3" role="complementary">
	<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="/">
				<label>
					<span class="screen-reader-text">搜尋關鍵字:</span>
					<input type="search" class="search-field" placeholder="搜尋..." value="" name="s">
				</label>
				<input type="submit" class="search-submit" value="搜尋">
			</form></aside>
		<aside id="recent-posts-2" class="widget widget_recent_entries">
		<h3 class="widget-title">近期文章</h3>
		<ul>
											<li>
					<a href="/jbs-diner/">JB’s Diner | 陽光、綠意、自然度假風美式早午餐 | 台北 天母</a>
									</li>
											<li>
					<a href="/%e9%82%80%e6%9c%88%e5%85%92/">邀月兒 | 適合放鬆小酌的迷人高級餐酒館 | 台北 民生社區 富錦街</a>
									</li>
											<li>
					<a href="/eslite-cafe-%e4%bf%a1%e7%be%a9%e8%aa%a0%e5%93%81%e5%92%96%e5%95%a1/">信義誠品咖啡 Eslite Café | 美美的 優雅的 文青咖啡廳 | 台北 信義區</a>
									</li>
											<li>
					<a href="/%e5%b0%8f%e9%bc%8e%e8%86%be/">小鼎膾 | 新鮮美味的高品質日式丼飯、海鮮料理 | 台北信義 Bellavita B2</a>
									</li>
											<li>
					<a href="/gradient-boosting-machines-gbm/">Gradient Boosting Machines GBM | gbm, xgboost, h2o | R語言</a>
									</li>
					</ul>

		</aside><aside id="archives-2" class="widget widget_archive"><h3 class="widget-title">彙整</h3>
			<ul>
					<li><a href="/2019/08/">2019 年 8 月</a></li>
	<li><a href="/2019/04/">2019 年 4 月</a></li>
	<li><a href="/2019/03/">2019 年 3 月</a></li>
	<li><a href="/2019/02/">2019 年 2 月</a></li>
	<li><a href="/2019/01/">2019 年 1 月</a></li>
	<li><a href="/2018/12/">2018 年 12 月</a></li>
	<li><a href="/2018/10/">2018 年 10 月</a></li>
	<li><a href="/2018/09/">2018 年 9 月</a></li>
	<li><a href="/2018/08/">2018 年 8 月</a></li>
	<li><a href="/2018/07/">2018 年 7 月</a></li>
	<li><a href="/2018/05/">2018 年 5 月</a></li>
			</ul>

			</aside></div>
			</div>
		</div>
	</div>

	
	
    <a class="go-top"><i class="fa fa-angle-up"></i></a>
		
	<footer id="colophon" class="site-footer" role="contentinfo">
		<div class="site-info container">
			<a href="https://tw.wordpress.org/">本站採用 WordPress 建置</a>
			<span class="sep"> | </span>
			佈景主題採用由 aThemes 所設計的 <a href="https://athemes.com/theme/sydney" rel="designer">Sydney</a>。		</div>
	</footer>

	
</div>


<script type="text/javascript">
var sbiajaxurl = "/wp-admin/admin-ajax.php";
</script>
<script type="text/javascript" src="/wp-content/plugins/anti-spam/assets/js/anti-spam.js" id="anti-spam-script-js"></script>
<script type="text/javascript" src="/wp-content/themes/hwj-based-on-sydney/js/scripts.js" id="sydney-scripts-js"></script>
<script type="text/javascript" src="/wp-content/themes/hwj-based-on-sydney/js/main.min.js" id="sydney-main-js"></script>
<script type="text/javascript" src="/wp-content/themes/hwj-based-on-sydney/js/skip-link-focus-fix.js" id="sydney-skip-link-focus-fix-js"></script>


</body></html>
