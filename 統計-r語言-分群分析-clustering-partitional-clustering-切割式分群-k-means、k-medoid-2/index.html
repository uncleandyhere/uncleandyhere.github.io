<!DOCTYPE html>
<html lang="zh-TW" prefix="og: http://ogp.me/ns#">
<head>
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">


	
<title>Partitional Clustering 切割式分群 | Kmeans, Kmedoid | Clustering 資料分群</title>
<meta name="robots" content="max-image-preview:large">


<meta name="description" content="Partitional Clustering, 切割式分群，屬於資料分群屬的一種方法。資料分群屬於非監督式學習，所處理的資料是沒有正確答案/標籤/目標變數可參考的。常見的切割式分群演算法包括kmeans, kmedoid。本篇將介紹分「分割式分群法」的實作與特色。">

<meta property="og:locale" content="zh_TW">
<meta property="og:type" content="article">
<meta property="og:title" content="Partitional Clustering 切割式分群 | Kmeans, Kmedoid | Clustering 資料分群">
<meta property="og:description" content="Partitional Clustering, 切割式分群，屬於資料分群屬的一種方法。資料分群屬於非監督式學習，所處理的資料是沒有正確答案/標籤/目標變數可參考的。常見的切割式分群演算法包括kmeans, kmedoid。本篇將介紹分「分割式分群法」的實作與特色。">
<meta property="og:url" content="/partitional-clustering-kmeans-kmedoid/">
<meta property="og:site_name" content="果醬珍珍•JamJam">
<meta property="article:tag" content="average silhouette width">
<meta property="article:tag" content="clustering">
<meta property="article:tag" content="elbow method">
<meta property="article:tag" content="gap statistic">
<meta property="article:tag" content="kmeans">
<meta property="article:tag" content="kmedoid">
<meta property="article:tag" content="optimal number of clusters">
<meta property="article:tag" content="partitional clustering">
<meta property="article:tag" content="最佳分群數">
<meta property="article:section" content=" 程式與統計">
<meta property="article:published_time" content="2018-09-07T14:25:59+08:00">
<meta property="article:modified_time" content="2019-04-14T14:58:27+08:00">
<meta property="og:updated_time" content="2019-04-14T14:58:27+08:00">
<meta property="og:image" content="/wp-content/uploads/2018/09/rawpixel-604745-unsplash-1024x690.jpg">
<meta property="og:image:width" content="1024">
<meta property="og:image:height" content="690">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:description" content="Partitional Clustering, 切割式分群，屬於資料分群屬的一種方法。資料分群屬於非監督式學習，所處理的資料是沒有正確答案/標籤/目標變數可參考的。常見的切割式分群演算法包括kmeans, kmedoid。本篇將介紹分「分割式分群法」的實作與特色。">
<meta name="twitter:title" content="Partitional Clustering 切割式分群 | Kmeans, Kmedoid | Clustering 資料分群">
<meta name="twitter:image" content="/wp-content/uploads/2018/09/rawpixel-604745-unsplash.jpg">


<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//s.w.org">



<link rel="stylesheet" id="crayon-css" href="/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-theme-hwj-based-on-monokai-css" href="/wp-content/uploads/crayon-syntax-highlighter/themes/hwj-based-on-monokai/hwj-based-on-monokai.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-font-monospace-css" href="/wp-content/plugins/crayon-syntax-highlighter/fonts/monospace.css" type="text/css" media="all">
<link rel="stylesheet" id="sb_instagram_styles-css" href="/wp-content/plugins/instagram-feed/css/sb-instagram-2-2.min.css" type="text/css" media="all">
<link rel="stylesheet" id="sydney-bootstrap-css" href="/wp-content/themes/hwj-based-on-sydney/css/bootstrap/bootstrap.min.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css" type="text/css" media="all">
<link rel="stylesheet" id="titan-adminbar-styles-css" href="/wp-content/plugins/anti-spam/assets/css/admin-bar.css" type="text/css" media="all">
<link rel="stylesheet" id="sydney-fonts-css" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C400italic%2C600%7CRaleway%3A400%2C500%2C600" type="text/css" media="all">
<link rel="stylesheet" id="sydney-style-css" href="/wp-content/themes/hwj-based-on-sydney/style.css" type="text/css" media="all">
<style id="sydney-style-inline-css" type="text/css">
.site-title { font-size:32px; }
.site-description { font-size:16px; }
#mainnav ul li a { font-size:14px; }
h1 { font-size:52px; }
h2 { font-size:42px; }
h3 { font-size:32px; }
h4 { font-size:25px; }
h5 { font-size:20px; }
h6 { font-size:18px; }
body { font-size:16px; }
.single .hentry .title-post { font-size:24px; }
.header-image { background-size:cover;}
.header-image { height:500px; }
.widget-area .widget_fp_social a,#mainnav ul li a:hover, .sydney_contact_info_widget span, .roll-team .team-content .name,.roll-team .team-item .team-pop .team-social li:hover a,.roll-infomation li.address:before,.roll-infomation li.phone:before,.roll-infomation li.email:before,.roll-testimonials .name,.roll-button.border,.roll-button:hover,.roll-icon-list .icon i,.roll-icon-list .content h3 a:hover,.roll-icon-box.white .content h3 a,.roll-icon-box .icon i,.roll-icon-box .content h3 a:hover,.switcher-container .switcher-icon a:focus,.go-top:hover,.hentry .meta-post a:hover,#mainnav > ul > li > a.active, #mainnav > ul > li > a:hover, button:hover, input[type="button"]:hover, input[type="reset"]:hover, input[type="submit"]:hover, .text-color, .social-menu-widget a, .social-menu-widget a:hover, .archive .team-social li a, a, h1 a, h2 a, h3 a, h4 a, h5 a, h6 a,.classic-alt .meta-post a,.single .hentry .meta-post a { color:#3d3d3d}
.reply,.woocommerce div.product .woocommerce-tabs ul.tabs li.active,.woocommerce #respond input#submit,.woocommerce a.button,.woocommerce button.button,.woocommerce input.button,.project-filter li a.active, .project-filter li a:hover,.preloader .pre-bounce1, .preloader .pre-bounce2,.roll-team .team-item .team-pop,.roll-progress .progress-animate,.roll-socials li a:hover,.roll-project .project-item .project-pop,.roll-project .project-filter li.active,.roll-project .project-filter li:hover,.roll-button.light:hover,.roll-button.border:hover,.roll-button,.roll-icon-box.white .icon,.owl-theme .owl-controls .owl-page.active span,.owl-theme .owl-controls.clickable .owl-page:hover span,.go-top,.bottom .socials li:hover a,.sidebar .widget:before,.blog-pagination ul li.active,.blog-pagination ul li:hover a,.content-area .hentry:after,.text-slider .maintitle:after,.error-wrap #search-submit:hover,#mainnav .sub-menu li:hover > a,#mainnav ul li ul:after, button, input[type="button"], input[type="reset"], input[type="submit"], .panel-grid-cell .widget-title:after { background-color:#3d3d3d}
.roll-socials li a:hover,.roll-socials li a,.roll-button.light:hover,.roll-button.border,.roll-button,.roll-icon-list .icon,.roll-icon-box .icon,.owl-theme .owl-controls .owl-page span,.comment .comment-detail,.widget-tags .tag-list a:hover,.blog-pagination ul li,.hentry blockquote,.error-wrap #search-submit:hover,textarea:focus,input[type="text"]:focus,input[type="password"]:focus,input[type="datetime"]:focus,input[type="datetime-local"]:focus,input[type="date"]:focus,input[type="month"]:focus,input[type="time"]:focus,input[type="week"]:focus,input[type="number"]:focus,input[type="email"]:focus,input[type="url"]:focus,input[type="search"]:focus,input[type="tel"]:focus,input[type="color"]:focus, button, input[type="button"], input[type="reset"], input[type="submit"], .archive .team-social li a { border-color:#3d3d3d}
.site-header.float-header { background-color:rgba(0,0,0,0.9);}
@media only screen and (max-width: 1024px) { .site-header { background-color:#000000;}}
.site-title a, .site-title a:hover { color:#ffffff}
.site-description { color:#ffffff}
#mainnav ul li a, #mainnav ul li::before { color:#ffffff}
#mainnav .sub-menu li a { color:#ffffff}
#mainnav .sub-menu li a { background:#1c1c1c}
.text-slider .maintitle, .text-slider .subtitle { color:#ffffff}
body { color:#5e5e5e}
#secondary { background-color:#ffffff}
#secondary, #secondary a, #secondary .widget-title { color:#767676}
.footer-widgets { background-color:#252525}
.btn-menu { color:#ffffff}
#mainnav ul li a:hover { color:#d65050}
.site-footer { background-color:#1c1c1c}
.site-footer,.site-footer a { color:#666666}
.overlay { background-color:#000000}
.page-wrap { padding-top:10px;}
.page-wrap { padding-bottom:100px;}
@media only screen and (max-width: 1025px) {		
			.mobile-slide {
				display: block;
			}
			.slide-item {
				background-image: none !important;
			}
			.header-slider {
			}
			.slide-item {
				height: auto !important;
			}
			.slide-inner {
				min-height: initial;
			} 
		}
@media only screen and (max-width: 780px) { 
    	h1 { font-size: 32px;}
		h2 { font-size: 28px;}
		h3 { font-size: 22px;}
		h4 { font-size: 18px;}
		h5 { font-size: 16px;}
		h6 { font-size: 14px;}
    }

</style>
<link rel="stylesheet" id="sydney-font-awesome-css" href="/wp-content/themes/hwj-based-on-sydney/fonts/font-awesome.min.css" type="text/css" media="all">

<script type="text/javascript" src="/wp-includes/js/jquery/jquery.min.js" id="jquery-core-js"></script>
<script type="text/javascript" src="/wp-includes/js/jquery/jquery-migrate.min.js" id="jquery-migrate-js"></script>
<script type="text/javascript" id="crayon_js-js-extra">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/localhost\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js" id="crayon_js-js"></script>





</head><body><div id="fb-root"></div><script>(function(d, s, id) {

	var js, fjs = d.getElementsByTagName(s)[0];

	if (d.getElementById(id)) return;

	js = d.createElement(s); js.id = id;

	js.src = '//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.3';

	fjs.parentNode.insertBefore(js, fjs);

	}(document, 'script', 'facebook-jssdk'));</script>	<style type="text/css">
		.header-image {
			background-image: url(/wp-content/uploads/2018/09/果醬珍珍_首圖_10.jpg);
			display: block;
		}
		@media only screen and (max-width: 1024px) {
			.header-inner {
				display: block;
			}
			.header-image {
				background-image: none;
				height: auto !important;
			}		
		}
	</style>
			<style type="text/css" id="wp-custom-css">
			.entry-content a {
	text-decoration: underline;
	color: #9f6ad4;
}		</style>
			<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
	</script>
	

	




	<div class="preloader">
	    <div class="spinner">
	        <div class="pre-bounce1"></div>
	        <div class="pre-bounce2"></div>
	    </div>
	</div>
	
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">跳至主內容區</a>

	
	
	
	<div id="masthead" class="site-header" role="banner" style="display:none;"> 
		<div class="header-wrap">
            <div class="container">
                <div class="row">
				<div class="col-md-4 col-sm-8 col-xs-12">
		        					<a href="/" title="果醬珍珍•JamJam"><img class="site-logo" src="/wp-content/uploads/2018/09/grape_320.png" alt="果醬珍珍•JamJam"></a>
		        				</div>
				<div class="col-md-8 col-sm-4 col-xs-12">
					<div class="btn-menu"></div>
					<nav id="mainnav" class="mainnav" role="navigation">
						<div class="menu-jamleecute-container"><ul id="menu-jamleecute" class="menu"><li id="menu-item-1691" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1691"><a href="/category/programming-statistics/"> 程式與統計</a></li>
<li id="menu-item-626" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-626"><a href="/category/travel/">旅遊</a></li>
<li id="menu-item-627" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-627"><a href="/category/foodie/">美食</a></li>
<li id="menu-item-2415" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2415"><a href="/%e7%b0%a1%e4%bb%8b/">關於我</a></li>
</ul></div>					</nav>
				</div>
				</div>
			</div>
		</div>
	</div>
	
	
	

	
	<style>
	.header-img-bounding-box {
	  background-image: url("/wp-content/uploads/2018/09/%E8%83%8C%E6%99%AF%E5%8E%9F%E5%9C%96_v2.jpg");
    background-size:     cover;                      /* <------ */
    background-repeat:   no-repeat;
    background-position: center center;              /* optional, center the image */
/* 	height: 300px; */
	padding-top:55px;
	padding-bottom:55px;
		}
		.title_img {
		    display: block;
    margin-left: auto;
    margin-right: auto;
    width: 50%;
		min-width: 340px;
			max-width: 800px;

		}
		
		
		.subtitle_img {
			display: block;
    margin-left: auto;
    margin-right: auto;
    width: 50%;
		min-width: 340px;
			max-width: 800px;
		}
		
		
		.subtitle_overlay {
			margin-top:20px;
			background-color: rgba(255, 255, 255, 0.7);
			padding-bottom:8px;
		}
	</style>
	
	<div>
		<a href="/">
		<div class="header-img-bounding-box">

			<img src="/wp-content/uploads/2018/09/title.png" class="title_img">
			<div class="subtitle_overlay">
			<img src="/wp-content/uploads/2018/09/subtitle.png" class="subtitle_img">
			</div>			
		</div>	
		</a>
	</div>
	
	
	
	<header>
		<nav id="my_mainnav" class="my_mainnav" role="navigation">
				<div class="menu-jamleecute-container"><ul id="menu-jamleecute-1" class="menu"><li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1691"><a href="/category/programming-statistics/"> 程式與統計</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-626"><a href="/category/travel/">旅遊</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-627"><a href="/category/foodie/">美食</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2415"><a href="/%e7%b0%a1%e4%bb%8b/">關於我</a></li>
</ul></div>		</nav>
	</header>

	
	
	
	<div id="content" class="page-wrap">
		
		
		
		<style>
			.home_intro {
				    margin: 0 12%;
					/*height: 400px;*/
    				/*background: yellow;*/
				
			}
			
			.home_intro .content{
				display: flex; 
    display: -webkit-flex;
    justify-content: center;
    -webkit-justify-content: center;
    flex-wrap: wrap;
			}
			.home_intro .content .intro {
				width: 240px;
    			
				margin: 0 auto;
				
			}
			.home_intro .content .intro .image {
				/*width: 240px;
    			padding: 0px;
				margin: 0 auto;
				display: inline-block;*/
			  position: relative;
			  width: 240px;
			  height: 240px;
			  overflow: hidden;
			  border-radius: 50%;
			}
			.home_intro .content .description{
				padding: 0 0px;
    			margin: 0 auto;
    			width: 240px;
				text-align: center;
			}
			.home_intro .content .social_icon {
				margin: 0 7px;
			}
			
			.circular--landscape {
			  display: inline-block;
			  position: relative;
			  width: 200px;
			  height: 200px;
			  overflow: hidden;
			  border-radius: 50%;
			}

			.home_intro .content .intro .image img {
			  width: auto;
			  height: 100%;
			  /*margin-left: -50px;*/
			}
		</style>
		

					
				
		
		<div class="container content-wrapper">
			<div class="row">	
				
				
				
	
	
	<div id="primary" class="content-area col-md-9 ">

		
		<main id="main" class="post-wrap" role="main">

		
			
<article id="post-1251" class="post-1251 post type-post status-publish format-standard has-post-thumbnail hentry category-programming-statistics category-statistics-model tag-average-silhouette-width tag-clustering tag-elbow-method tag-gap-statistic tag-kmeans tag-kmedoid tag-optimal-number-of-clusters tag-partitional-clustering tag-267">
	
	
			<div class="entry-thumb">
			<img width="2500" height="1684" src="/wp-content/uploads/2018/09/rawpixel-604745-unsplash.jpg" class="attachment-large-thumb size-large-thumb wp-post-image" alt="rawpixel-604745-unsplash" loading="lazy" srcset="/wp-content/uploads/2018/09/rawpixel-604745-unsplash.jpg 2500w,/wp-content/uploads/2018/09/rawpixel-604745-unsplash-300x202.jpg 300w,/wp-content/uploads/2018/09/rawpixel-604745-unsplash-768x517.jpg 768w,/wp-content/uploads/2018/09/rawpixel-604745-unsplash-1024x690.jpg 1024w,/wp-content/uploads/2018/09/rawpixel-604745-unsplash-830x559.jpg 830w,/wp-content/uploads/2018/09/rawpixel-604745-unsplash-230x155.jpg 230w,/wp-content/uploads/2018/09/rawpixel-604745-unsplash-350x236.jpg 350w,/wp-content/uploads/2018/09/rawpixel-604745-unsplash-480x323.jpg 480w" sizes="(max-width: 2500px) 100vw, 2500px">		</div>
		
	<header class="entry-header">
		
		<div class="meta-post">
			<a href="/category/programming-statistics/" title=" 程式與統計" class="post-cat"> 程式與統計</a><a href="/category/programming-statistics/statistics-model/" title="統計模型" class="post-cat">統計模型</a>		</div>

		<h1 class="title-post entry-title">Partitional Clustering 切割式分群 | Kmeans, Kmedoid | Clustering 資料分群</h1>
				<div class="single-meta">
			<span class="posted-on">發表於 <a href="/partitional-clustering-kmeans-kmedoid/" rel="bookmark"><time class="entry-date published" datetime="2018-09-07T22:25:59+08:00">2018-09-07</time><time class="updated" datetime="2019-04-14T22:58:27+08:00">2019-04-14</time></a></span><span class="byline"> <span class="author vcard"><a class="url fn n" href="/author/jamleecute/">jamleecute</a></span></span>		</div>
			</header>

	

	<div class="entry-content">
		<p>Partitional Clustering, 切割式分群，屬於資料分群屬的一種方法。資料分群屬於非監督式學習，所處理的資料是沒有正確答案/標籤/目標變數可參考的。常見的切割式分群演算法包括kmeans, kmedoid。本篇將介紹分「分割式分群法」的實作與特色。</p>
<h3>資料分群簡介</h3>
<ul>
<li>資料分群是一個將資料分割成數個子集合的方法，主要目的包括：
<ul>
<li>找出資料中相近的<span style="color: #9f6ad4;">群聚(clusters)</span>，</li>
<li>找出各群的<span style="color: #9f6ad4;">代表點</span>。代表點可以是群聚中的<span style="color: #9f6ad4;">中心點(centroids)</span>或是<span style="color: #9f6ad4;">原型(prototypes)</span>。</li>
</ul>
</li>
<li>透過各群的代表點，可以達到幾個目標：
<ul>
<li>資料壓縮</li>
<li>降低雜訊</li>
<li>降低計算量</li>
</ul>
</li>
<li> 資料分群將<span style="color: #9f6ad4;">依據資料自身屬性計算彼此間的相似度</span>（物以類聚），而<span style="color: #9f6ad4;">「相似度」</span>主要有兩種型態：
<ul>
<li>「Compactness」：目標是讓子集合間差異最大化，子集合內差異最小化。如階層式分群和K-means分群。</li>
<li>「Connectedness」：目標是將可串連在一起的個體分成一群。如譜分群(Spectral Clustering)。</li>
</ul>
</li>
<li>資料分群屬於<span style="color: #9f6ad4;">非監督式學習法(Unsupervised Learning)</span>，即資料沒有標籤(unlabeled data)或沒有標準答案，<span style="color: #9f6ad4;">無法透過所謂的目標變數(response variable)來做分類之訓練</span>。也因為資料沒有標籤之緣故，與監督式學習法和強化式學習法不同，<span style="color: #9f6ad4;">非監督式學習法無法衡量演算法的正確率</span>。</li>
</ul>
<p><span style="color: #333333;"><span style="text-decoration: underline;">資料分群系列文</span>章會依序介紹以下幾種常見的分群方法：</span></p>
<ol>
<li><a href="/%e7%b5%b1%e8%a8%88-r%e8%aa%9e%e8%a8%80-%e5%88%86%e7%be%a4%e5%88%86%e6%9e%90-clustering-hierarchical-clustering-%e9%9a%8e%e5%b1%a4%e5%bc%8f%e5%88%86%e7%be%a41/">階層式分群(hierarchical clustering)</a>
<ol>
<li>聚合式階層分群法 Agglomerative Hierarchical Clustering</li>
<li>分裂式階層分群法 Divisive Hierarchical Clustering</li>
<li>最佳分群群數(Determining Optimal Clusters)</li>
</ol>
</li>
<li><a href="/%e7%b5%b1%e8%a8%88-r%e8%aa%9e%e8%a8%80-%e5%88%86%e7%be%a4%e5%88%86%e6%9e%90-clustering-partitional-clustering-%e5%88%87%e5%89%b2%e5%bc%8f%e5%88%86%e7%be%a4-k-means%e3%80%81k-medoid-2/">切割式分群(partitional clustering)</a>
<ol>
<li>K-means</li>
<li>K-medoid</li>
<li>最佳分群群數(Determining Optimal Clusters)</li>
</ol>
</li>
<li>譜分群(Spectral Clustering)</li>
</ol>
<h3>2.切割式分群(partitional clustering)</h3>
<p>我們主要會cover以下步驟以完成K-Means & K-Medoid分群分析：</p>
<ul>
<li>Step 1: 載入所需套件(Packages)</li>
<li>Step 2: 資料準備</li>
<li>Step 3: 衡量群聚距離</li>
<li>Step 4: K-Means分群</li>
<li>Step 5: K-Medoid分群</li>
<li>Step 6: 決定最適分群數目
<ul>
<li>Elbow Method</li>
<li>Average silhouette Width</li>
<li>Gap Statistic</li>
</ul>
</li>
</ul>
<h4>Step 1: 載入所需套件(Packages)</h4>
<p></p>

		<div id="crayon-60ed950d29f99565561391" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
library(dplyr)
library(magrittr) #pipelines
library(tidyverse)  # data manipulation
library(cluster)    # clustering algorithms
library(factoextra) # clustering algorithms & visualization</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29f99565561391-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29f99565561391-2">2</div><div class="crayon-num" data-line="crayon-60ed950d29f99565561391-3">3</div><div class="crayon-num" data-line="crayon-60ed950d29f99565561391-4">4</div><div class="crayon-num" data-line="crayon-60ed950d29f99565561391-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29f99565561391-1">library(dplyr)</div><div class="crayon-line" id="crayon-60ed950d29f99565561391-2">library(magrittr) #pipelines</div><div class="crayon-line" id="crayon-60ed950d29f99565561391-3">library(tidyverse)  # data manipulation</div><div class="crayon-line" id="crayon-60ed950d29f99565561391-4">library(cluster)    # clustering algorithms</div><div class="crayon-line" id="crayon-60ed950d29f99565561391-5">library(factoextra) # clustering algorithms & visualization</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p></p>
<h4>Step 2: 資料準備</h4>
<p>我們使用R內建資料集USArrests。</p>

		<div id="crayon-60ed950d29f9f948549551" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
# 資料預處理：(1)遺失值處理(2)資料標準化(平均數為0，標準差為1)
inputData <- 
  USArrests %>% 
  na.omit() %>% # 忽略遺失值
  scale() # 資料標準化
head(inputData)

#                Murder   Assault   UrbanPop         Rape
# Alabama    1.24256408 0.7828393 -0.5209066 -0.003416473
# Alaska     0.50786248 1.1068225 -1.2117642  2.484202941
# Arizona    0.07163341 1.4788032  0.9989801  1.042878388
# Arkansas   0.23234938 0.2308680 -1.0735927 -0.184916602
# California 0.27826823 1.2628144  1.7589234  2.067820292
# Colorado   0.02571456 0.3988593  0.8608085  1.864967207</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29f9f948549551-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29f9f948549551-2">2</div><div class="crayon-num" data-line="crayon-60ed950d29f9f948549551-3">3</div><div class="crayon-num" data-line="crayon-60ed950d29f9f948549551-4">4</div><div class="crayon-num" data-line="crayon-60ed950d29f9f948549551-5">5</div><div class="crayon-num" data-line="crayon-60ed950d29f9f948549551-6">6</div><div class="crayon-num" data-line="crayon-60ed950d29f9f948549551-7">7</div><div class="crayon-num" data-line="crayon-60ed950d29f9f948549551-8">8</div><div class="crayon-num" data-line="crayon-60ed950d29f9f948549551-9">9</div><div class="crayon-num" data-line="crayon-60ed950d29f9f948549551-10">10</div><div class="crayon-num" data-line="crayon-60ed950d29f9f948549551-11">11</div><div class="crayon-num" data-line="crayon-60ed950d29f9f948549551-12">12</div><div class="crayon-num" data-line="crayon-60ed950d29f9f948549551-13">13</div><div class="crayon-num" data-line="crayon-60ed950d29f9f948549551-14">14</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29f9f948549551-1"># 資料預處理：(1)遺失值處理(2)資料標準化(平均數為0，標準差為1)</div><div class="crayon-line" id="crayon-60ed950d29f9f948549551-2">inputData <div class="crayon-line" id="crayon-60ed950d29f9f948549551-3">  USArrests %>% </div><div class="crayon-line" id="crayon-60ed950d29f9f948549551-4">  na.omit() %>% # 忽略遺失值</div><div class="crayon-line" id="crayon-60ed950d29f9f948549551-5">  scale() # 資料標準化</div><div class="crayon-line" id="crayon-60ed950d29f9f948549551-6">head(inputData)</div><div class="crayon-line" id="crayon-60ed950d29f9f948549551-7"> </div><div class="crayon-line" id="crayon-60ed950d29f9f948549551-8">#                Murder   Assault   UrbanPop         Rape</div><div class="crayon-line" id="crayon-60ed950d29f9f948549551-9"># Alabama    1.24256408 0.7828393 -0.5209066 -0.003416473</div><div class="crayon-line" id="crayon-60ed950d29f9f948549551-10"># Alaska     0.50786248 1.1068225 -1.2117642  2.484202941</div><div class="crayon-line" id="crayon-60ed950d29f9f948549551-11"># Arizona    0.07163341 1.4788032  0.9989801  1.042878388</div><div class="crayon-line" id="crayon-60ed950d29f9f948549551-12"># Arkansas   0.23234938 0.2308680 -1.0735927 -0.184916602</div><div class="crayon-line" id="crayon-60ed950d29f9f948549551-13"># California 0.27826823 1.2628144  1.7589234  2.067820292</div><div class="crayon-line" id="crayon-60ed950d29f9f948549551-14"># Colorado   0.02571456 0.3988593  0.8608085  1.864967207</div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p></p>
<h4>Step 3: 衡量群聚距離</h4>
<p>分類演算法將依據<span style="color: #9f6ad4;"><strong>資料個體</strong>兩兩間之距離</span>作為<span style="text-decoration: underline;">分群基礎</span>。而不同距離衡量也將影響分類結果。我們根據<span style="text-decoration: underline;">不同距離定義</span>計算所謂的<span style="color: #9f6ad4;"><strong>「相異度/距離矩陣(dissimilarity/distance matrix)」</strong></span><strong>，作為後續分類基礎。</strong>傳統計算距離常用的方法包括：(1)歐式距離(Euclidean Distance)(2)曼哈頓距離(Manhattan Distance)。定義分別如下：</p>
<p>歐式距離(Euclidean Distance)</p>
<p>$$d_{euc}(x,y)=\sqrt{\sum_{i=1}^n(x_{i}-y_{i})^2}$$</p>
<p>曼哈頓距離(Manhattan Distance)</p>
<p>$$d_{man}(x,y)=\sum_{i=1}^n|(x_{i}-y_{i})|$$</p>
<p>其中，x和y分別代表長度為n的向量。</p>
<p>幾個R裡面<span style="text-decoration: underline;">計算</span>和<span style="text-decoration: underline;">視覺化</span><span style="color: #9f6ad4;">資料個體間「相異度/距離矩陣」</span>的函數包括：</p>
<ul>
<li>stat套件中的dist(method=…)函數：參數method預設為”euclidean”。其他可選擇的方法包括：”maximum”, “manhattan”, “canberra”, “binary”, “minkowski”。</li>
<li>factoextra套件中的get_dist()函數：參數method預設為”euclidean”。<span style="color: #9f6ad4;">和dist()函數不同的是，他支援correlation-based distance measures</span>包括”pearson”, “kendall”和 “spearman” （*可根據資料屬性來選擇適合的距離計算方法，比如說，<span style="text-decoration: underline;">correlation-based distances常被運用在基因表達數據分析(gene expression data analyses)</span>）。</li>
<li>factoextra套件中fviz_dist()函數：則可將相異度（距離）矩陣(使用get_dist()產生的物件）計算結果視覺化。</li>
</ul>
<p>以下我們就使用get_dist()計算資料個體間兩兩距離(使用預設歐式距離法)，並使用fviz_dist()將相異/距離矩陣結果視覺化。</p>

		<div id="crayon-60ed950d29fa1314143226" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
distance <- get_dist(x = inputData)
fviz_dist(dist.obj = distance, gradient = list(low = "#00AFBB", mid = "white", high = "#FC4E07"))</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fa1314143226-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29fa1314143226-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fa1314143226-1">distance <div class="crayon-line" id="crayon-60ed950d29fa1314143226-2">fviz_dist(dist.obj = distance, gradient = list(low = "#00AFBB", mid = "white", high = "#FC4E07"))</div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p><img loading="lazy" class="alignnone size-full wp-image-1280" src="/wp-content/uploads/2018/09/Rplot01_dissimilarity_matrix-1.jpeg" alt="partitional clustering" width="1000" height="996" srcset="/wp-content/uploads/2018/09/Rplot01_dissimilarity_matrix-1.jpeg 1000w,/wp-content/uploads/2018/09/Rplot01_dissimilarity_matrix-1-150x150.jpeg 150w,/wp-content/uploads/2018/09/Rplot01_dissimilarity_matrix-1-300x300.jpeg 300w,/wp-content/uploads/2018/09/Rplot01_dissimilarity_matrix-1-768x765.jpeg 768w,/wp-content/uploads/2018/09/Rplot01_dissimilarity_matrix-1-830x827.jpeg 830w,/wp-content/uploads/2018/09/Rplot01_dissimilarity_matrix-1-230x229.jpeg 230w,/wp-content/uploads/2018/09/Rplot01_dissimilarity_matrix-1-350x349.jpeg 350w,/wp-content/uploads/2018/09/Rplot01_dissimilarity_matrix-1-480x478.jpeg 480w" sizes="(max-width: 1000px) 100vw, 1000px"></p>
<div align="center"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><br>
<br>
<ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7946632597933771" data-ad-slot="8154450369" data-ad-format="auto" data-full-width-responsive="true"></ins><br>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
<h4>Step 4: K-Means分群</h4>
<h5>K-Means簡介</h5>
<ul>
<li>分群演算法中最出名的即為K-Means演算法。</li>
<li>是最簡單也最常使用的分群演算法。</li>
<li>K-Means會根據一些距離的測量將觀測值分成數個組別。</li>
<li><span style="color: #9f6ad4;">需要事前指定分群數目</span>。</li>
<li>目的是將極大化群內相似度，和最大化群間相異度。</li>
<li>指定群聚的平均值作為中心點(centroid)。</li>
<li><span style="color: #9f6ad4;">投入變數以連續變數為佳</span><span style="color: #9f6ad4;">（kmeans(x = …只能為數值矩陣…)）。</span></li>
</ul>
<h5>K-Means基礎概念</h5>
<ul>
<li>指定分群數k，並最小化k群組內變異總和(total intra-cluster variation or within-cluster variation)。</li>
<li>K-Means的演算法有許多，而其中標準的演算法是由Hartigan教授所提出的。Hartigan教授將<span style="color: #9f6ad4;">群聚內變異總和</span>定義為：<span style="color: #9f6ad4;">各資料點距離群中心的歐式距離平方加總</span>。<br>
$$W(C_{k})=\sum_{x_{i}\in C_{k}}(x_{i}-\mu_{k})^2$$<br>
其中，
<ul>
<li>\(x_{i}\)代表群聚\(C_{k}\)中的資料點。</li>
<li>\(\mu_{k}\)代表群聚\(C_{k}\)中資料點的平均值所指定的中心點。</li>
</ul>
</li>
<li>而所有群內變異總和(total within-cluster variation)為：<br>
$$total\space within-cluster\space variation\space = \sum_{i=1}^kW(C_{k})=\sum_{i=1}^k\sum_{x_{i}\in C_{k}}(x_{i}-\mu_{k})^2$$<br>
total within-cluster variation是用來衡量群聚的緊緻度(Compactness)，我們希望這個值越小越好。</li>
</ul>
<h5>K-Means演算法</h5>
<ol>
<li>由User事先指定分群數目k。</li>
<li>演算法<span style="color: #9f6ad4;">隨機從資料集中挑選k個資料點當作初始中心點(initial centers)</span>。</li>
<li>各資料點將依據<span style="text-decoration: underline;">距離初始中心的的歐式距離</span>遠近分派指定給最近的群聚\(C_{k}\)(cluster assignment)。</li>
<li>各群聚\(C_{k}\)<span style="color: #9f6ad4;">重新計算所有群聚中資料點的平均值作為新的中心點（centroid update)</span>。並重新檢測所有資料點是否位在與其最近的中心點的群聚中。</li>
<li>重複第3~4步驟，來最小化各群聚的變異總和，直到<span style="text-decoration: underline; color: #9f6ad4;">各群聚組合趨於穩定與收斂（不再變動）(reach convergence)</span>，或<span style="text-decoration: underline; color: #9f6ad4;">已達最大迭代次數（R的kmeans函數預設為最大迭代次數為10）</span>才停止。</li>
</ol>
<h5>使用R套件stats中的kmeans函數執行K-Means分群演算法</h5>
<p>kmeans()函數幾個重要參數說明：</p>
<ul>
<li>centers: 指定分群數目k或指定初始中心點數目k。</li>
<li>nstart: 因為初始中心點是隨機選取，所以可以透過nstart參數多嘗試幾組隨機初始值，並選擇回傳最好的初始中心點分群結果。</li>
</ul>
<p>我們預設將資料分成2群(centers = 2)，並隨機執行25次初始中心點挑選與分群結果。我們可以使用str()結構函數看分群結果回傳值。其中：</p>
<ul>
<li>$cluster表示資料被指定的分群結果。</li>
<li>$center表示群聚中心點矩陣。</li>
<li>$totss表示total sum of squares。</li>
<li>$withininss: 表示within-cluster sum of squares，即單一群聚內總變異。</li>
<li>$tot.withinss: 表示total within-cluster sum of squares，即所有群聚內變異加總(sum($withinss))。</li>
<li>$size: 每群聚內資料個數。</li>
</ul>
<p></p>

		<div id="crayon-60ed950d29fa4284054733" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
set.seed(101)
k_clust <- kmeans(inputData, centers = 2, nstart = 25)
str(k_clust)

# List of 9
# $ cluster     : Named int [1:50] 2 2 2 1 2 2 1 1 2 2 ...
#  ..- attr(*, "names")= chr [1:50] "Alabama" "Alaska" "Arizona" "Arkansas" ...
# $ centers     : num [1:2, 1:4] -0.67 1.005 -0.676 1.014 -0.132 ...
#  ..- attr(*, "dimnames")=List of 2
#  .. ..$ : chr [1:2] "1" "2"
#  .. ..$ : chr [1:4] "Murder" "Assault" "UrbanPop" "Rape"
# $ totss       : num 196
# $ withinss    : num [1:2] 56.1 46.7
# $ tot.withinss: num 103
# $ betweenss   : num 93.1
# $ size        : int [1:2] 30 20
# $ iter        : int 1
# $ ifault      : int 0
# - attr(*, "class")= chr "kmeans"</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-2">2</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-3">3</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-4">4</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-5">5</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-6">6</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-7">7</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-8">8</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-9">9</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-10">10</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-11">11</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-12">12</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-13">13</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-14">14</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-15">15</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-16">16</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-17">17</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-18">18</div><div class="crayon-num" data-line="crayon-60ed950d29fa4284054733-19">19</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fa4284054733-1">set.seed(101)</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-2">k_clust <div class="crayon-line" id="crayon-60ed950d29fa4284054733-3">str(k_clust)</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-4"> </div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-5"># List of 9</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-6"># $ cluster     : Named int [1:50] 2 2 2 1 2 2 1 1 2 2 ...</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-7">#  ..- attr(*, "names")= chr [1:50] "Alabama" "Alaska" "Arizona" "Arkansas" ...</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-8"># $ centers     : num [1:2, 1:4] -0.67 1.005 -0.676 1.014 -0.132 ...</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-9">#  ..- attr(*, "dimnames")=List of 2</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-10">#  .. ..$ : chr [1:2] "1" "2"</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-11">#  .. ..$ : chr [1:4] "Murder" "Assault" "UrbanPop" "Rape"</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-12"># $ totss       : num 196</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-13"># $ withinss    : num [1:2] 56.1 46.7</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-14"># $ tot.withinss: num 103</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-15"># $ betweenss   : num 93.1</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-16"># $ size        : int [1:2] 30 20</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-17"># $ iter        : int 1</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-18"># $ ifault      : int 0</div><div class="crayon-line" id="crayon-60ed950d29fa4284054733-19"># - attr(*, "class")= chr "kmeans"</div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>或是將分群結果印出。可以分別得知以下資訊：</p>
<ul>
<li>各群聚大小（資料個數）。</li>
<li>群聚在各維度的中心點（平均值）(2x4的矩陣)。</li>
<li>各資料列（列名稱）被分類到的群聚結果。</li>
<li>各群聚的變異總和。</li>
<li>可使用的成分(available components)，即我們可以透過kmeans產生的物件+$…取得的資訊。比如說<span style="color: #9f6ad4;">k_clust$cluster</span>即得得到各列分群結果。</li>
</ul>
<p></p>

		<div id="crayon-60ed950d29fa7777833922" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
k_clust 

# K-means clustering with 2 clusters of sizes 30, 20
# 
# Cluster means:
#      Murder    Assault   UrbanPop       Rape
# 1 -0.669956 -0.6758849 -0.1317235 -0.5646433
# 2  1.004934  1.0138274  0.1975853  0.8469650
# 
# Clustering vector:
#        Alabama         Alaska        Arizona       Arkansas     California       Colorado    Connecticut       Delaware 
#              2              2              2              1              2              2              1              1 
#        Florida        Georgia         Hawaii          Idaho       Illinois        Indiana           Iowa         Kansas 
#              2              2              1              1              2              1              1              1 
#       Kentucky      Louisiana          Maine       Maryland  Massachusetts       Michigan      Minnesota    Mississippi 
#              1              2              1              2              1              2              1              2 
#       Missouri        Montana       Nebraska         Nevada  New Hampshire     New Jersey     New Mexico       New York 
#              2              1              1              2              1              1              2              2 
# North Carolina   North Dakota           Ohio       Oklahoma         Oregon   Pennsylvania   Rhode Island South Carolina 
#              2              1              1              1              1              1              1              2 
#   South Dakota      Tennessee          Texas           Utah        Vermont       Virginia     Washington  West Virginia 
#              1              2              2              1              1              1              1              1 
#      Wisconsin        Wyoming 
#              1              1 
# 
# Within cluster sum of squares by cluster:
# [1] 56.11445 46.74796
# (between_SS / total_SS =  47.5 %)
# 
# Available components:
#   
# [1] "cluster"      "centers"      "totss"        "withinss"     "tot.withinss" "betweenss"    "size"        
# [8] "iter"         "ifault"</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-2">2</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-3">3</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-4">4</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-5">5</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-6">6</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-7">7</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-8">8</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-9">9</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-10">10</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-11">11</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-12">12</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-13">13</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-14">14</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-15">15</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-16">16</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-17">17</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-18">18</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-19">19</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-20">20</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-21">21</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-22">22</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-23">23</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-24">24</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-25">25</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-26">26</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-27">27</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-28">28</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-29">29</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-30">30</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-31">31</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-32">32</div><div class="crayon-num" data-line="crayon-60ed950d29fa7777833922-33">33</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fa7777833922-1">k_clust </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-2"> </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-3"># K-means clustering with 2 clusters of sizes 30, 20</div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-4"># </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-5"># Cluster means:</div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-6">#      Murder    Assault   UrbanPop       Rape</div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-7"># 1 -0.669956 -0.6758849 -0.1317235 -0.5646433</div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-8"># 2  1.004934  1.0138274  0.1975853  0.8469650</div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-9"># </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-10"># Clustering vector:</div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-11">#        Alabama         Alaska        Arizona       Arkansas     California       Colorado    Connecticut       Delaware </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-12">#              2              2              2              1              2              2              1              1 </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-13">#        Florida        Georgia         Hawaii          Idaho       Illinois        Indiana           Iowa         Kansas </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-14">#              2              2              1              1              2              1              1              1 </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-15">#       Kentucky      Louisiana          Maine       Maryland  Massachusetts       Michigan      Minnesota    Mississippi </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-16">#              1              2              1              2              1              2              1              2 </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-17">#       Missouri        Montana       Nebraska         Nevada  New Hampshire     New Jersey     New Mexico       New York </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-18">#              2              1              1              2              1              1              2              2 </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-19"># North Carolina   North Dakota           Ohio       Oklahoma         Oregon   Pennsylvania   Rhode Island South Carolina </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-20">#              2              1              1              1              1              1              1              2 </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-21">#   South Dakota      Tennessee          Texas           Utah        Vermont       Virginia     Washington  West Virginia </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-22">#              1              2              2              1              1              1              1              1 </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-23">#      Wisconsin        Wyoming </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-24">#              1              1 </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-25"># </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-26"># Within cluster sum of squares by cluster:</div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-27"># [1] 56.11445 46.74796</div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-28"># (between_SS / total_SS =  47.5 %)</div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-29"># </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-30"># Available components:</div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-31">#   </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-32"># [1] "cluster"      "centers"      "totss"        "withinss"     "tot.withinss" "betweenss"    "size"        </div><div class="crayon-line" id="crayon-60ed950d29fa7777833922-33"># [8] "iter"         "ifault"</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>我們可以進一步使用factoextra套件中的fviz_cluster()函數來將分群結果視覺化。(*值得注意的是，當變數維度>2，<strong><span style="color: #9f6ad4;">fviz_cluster會使用主成分分析</span></strong>，找出最主要的兩個主成分來作為圖形的橫軸與縱軸。括號內的百分比則分別表示主成分解釋變異佔比。更多<span style="color: #9f6ad4;"><strong>主成分分析PCA</strong></span>請參考<a href="/%e7%b5%b1%e8%a8%88-r%e8%aa%9e%e8%a8%80-%e4%b8%bb%e6%88%90%e4%bb%bd%e5%88%86%e6%9e%90-principal-components-analysis-pca/" target="_blank" rel="noopener noreferrer">「主成分分析(PCA)」</a>)</p>

		<div id="crayon-60ed950d29fa8817533866" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
fviz_cluster(k_clust, data = inputData)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fa8817533866-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fa8817533866-1">fviz_cluster(k_clust, data = inputData)</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p><img loading="lazy" class="alignnone size-full wp-image-1287" src="/wp-content/uploads/2018/09/Rplot02_kmeans_clustering_result.jpeg" alt="partitional clustering" width="1000" height="996" srcset="/wp-content/uploads/2018/09/Rplot02_kmeans_clustering_result.jpeg 1000w,/wp-content/uploads/2018/09/Rplot02_kmeans_clustering_result-150x150.jpeg 150w,/wp-content/uploads/2018/09/Rplot02_kmeans_clustering_result-300x300.jpeg 300w,/wp-content/uploads/2018/09/Rplot02_kmeans_clustering_result-768x765.jpeg 768w,/wp-content/uploads/2018/09/Rplot02_kmeans_clustering_result-830x827.jpeg 830w,/wp-content/uploads/2018/09/Rplot02_kmeans_clustering_result-230x229.jpeg 230w,/wp-content/uploads/2018/09/Rplot02_kmeans_clustering_result-350x349.jpeg 350w,/wp-content/uploads/2018/09/Rplot02_kmeans_clustering_result-480x478.jpeg 480w" sizes="(max-width: 1000px) 100vw, 1000px"></p>
<p>或者是，使用傳統的成對資料（分類結果,原始資料）繪製散佈圖來檢視分群結果。</p>

		<div id="crayon-60ed950d29faa279950272" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
inputData %>%
  as_tibble() %>%
  mutate(cluster = k_clust$cluster, #新增分群結果
         state = row.names(USArrests) #將列名稱指定為原始資料標籤
         ) %>%
  ggplot(aes(UrbanPop, Murder, color = factor(cluster), label = state)) + #使用ggplot套件繪圖（指定x,y軸），標記國家名稱，並依據分群結果上色
  geom_text()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29faa279950272-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29faa279950272-2">2</div><div class="crayon-num" data-line="crayon-60ed950d29faa279950272-3">3</div><div class="crayon-num" data-line="crayon-60ed950d29faa279950272-4">4</div><div class="crayon-num" data-line="crayon-60ed950d29faa279950272-5">5</div><div class="crayon-num" data-line="crayon-60ed950d29faa279950272-6">6</div><div class="crayon-num" data-line="crayon-60ed950d29faa279950272-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29faa279950272-1">inputData %>%</div><div class="crayon-line" id="crayon-60ed950d29faa279950272-2">  as_tibble() %>%</div><div class="crayon-line" id="crayon-60ed950d29faa279950272-3">  mutate(cluster = k_clust$cluster, #新增分群結果</div><div class="crayon-line" id="crayon-60ed950d29faa279950272-4">         state = row.names(USArrests) #將列名稱指定為原始資料標籤</div><div class="crayon-line" id="crayon-60ed950d29faa279950272-5">         ) %>%</div><div class="crayon-line" id="crayon-60ed950d29faa279950272-6">  ggplot(aes(UrbanPop, Murder, color = factor(cluster), label = state)) + #使用ggplot套件繪圖（指定x,y軸），標記國家名稱，並依據分群結果上色</div><div class="crayon-line" id="crayon-60ed950d29faa279950272-7">  geom_text()</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p><img loading="lazy" class="alignnone size-full wp-image-1288" src="/wp-content/uploads/2018/09/Rplot03-1.jpeg" alt="partitional clustering" width="800" height="797" srcset="/wp-content/uploads/2018/09/Rplot03-1.jpeg 800w,/wp-content/uploads/2018/09/Rplot03-1-150x150.jpeg 150w,/wp-content/uploads/2018/09/Rplot03-1-300x300.jpeg 300w,/wp-content/uploads/2018/09/Rplot03-1-768x765.jpeg 768w,/wp-content/uploads/2018/09/Rplot03-1-230x229.jpeg 230w,/wp-content/uploads/2018/09/Rplot03-1-350x349.jpeg 350w,/wp-content/uploads/2018/09/Rplot03-1-480x478.jpeg 480w" sizes="(max-width: 800px) 100vw, 800px"></p>
<p>但因為通常資料維度會不止兩類，我們可以考慮使用useful套件中的plot.kmeans()函數，該<span style="color: #9f6ad4;">函數可以將多維尺度調整以將資料投影到二維空間</span>。然而這個效果似乎與factoextra套件中的fviz_cluster()函數無異，只不過還是factoextra套件中的fviz_cluster()函數更優！</p>

		<div id="crayon-60ed950d29fab204256359" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
library(useful)
plot.kmeans(x = k_clust, data = inputData)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fab204256359-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29fab204256359-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fab204256359-1">library(useful)</div><div class="crayon-line" id="crayon-60ed950d29fab204256359-2">plot.kmeans(x = k_clust, data = inputData)</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p><img loading="lazy" class="alignnone size-full wp-image-1289" src="/wp-content/uploads/2018/09/Rplot04-1.jpeg" alt="partitional clustering" width="800" height="797" srcset="/wp-content/uploads/2018/09/Rplot04-1.jpeg 800w,/wp-content/uploads/2018/09/Rplot04-1-150x150.jpeg 150w,/wp-content/uploads/2018/09/Rplot04-1-300x300.jpeg 300w,/wp-content/uploads/2018/09/Rplot04-1-768x765.jpeg 768w,/wp-content/uploads/2018/09/Rplot04-1-230x229.jpeg 230w,/wp-content/uploads/2018/09/Rplot04-1-350x349.jpeg 350w,/wp-content/uploads/2018/09/Rplot04-1-480x478.jpeg 480w" sizes="(max-width: 800px) 100vw, 800px"></p>
<p>也因為我們一開始需要預設分群數目k值。我們打算試試不同初始中心點數目的效果差異。</p>

		<div id="crayon-60ed950d29fac292119129" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
# 嘗試多種k的分群效果
set.seed(101)
k_clust <- kmeans(inputData, centers = 2, nstart = 25)
k_clust_3 <- kmeans(inputData, centers = 3, nstart = 25)
k_clust_4 <- kmeans(inputData, centers = 4, nstart = 25)
k_clust_5 <- kmeans(inputData, centers = 5, nstart = 25)


# plots to compare
p1 <- fviz_cluster(k_clust, geom = "point", data = inputData) + ggtitle("k = 2")
p2 <- fviz_cluster(k_clust_3, geom = "point",  data = inputData) + ggtitle("k = 3")
p3 <- fviz_cluster(k_clust_4, geom = "point",  data = inputData) + ggtitle("k = 4")
p4 <- fviz_cluster(k_clust_5, geom = "point",  data = inputData) + ggtitle("k = 5")

library(gridExtra)
grid.arrange(p1, p2, p3, p4, nrow = 2) # Arrange multiple grobs on a page (將不會影響到par()中參數設定)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-2">2</div><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-3">3</div><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-4">4</div><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-5">5</div><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-6">6</div><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-7">7</div><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-8">8</div><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-9">9</div><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-10">10</div><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-11">11</div><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-12">12</div><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-13">13</div><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-14">14</div><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-15">15</div><div class="crayon-num" data-line="crayon-60ed950d29fac292119129-16">16</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fac292119129-1"># 嘗試多種k的分群效果</div><div class="crayon-line" id="crayon-60ed950d29fac292119129-2">set.seed(101)</div><div class="crayon-line" id="crayon-60ed950d29fac292119129-3">k_clust <div class="crayon-line" id="crayon-60ed950d29fac292119129-4">k_clust_3 <div class="crayon-line" id="crayon-60ed950d29fac292119129-5">k_clust_4 <div class="crayon-line" id="crayon-60ed950d29fac292119129-6">k_clust_5 <div class="crayon-line" id="crayon-60ed950d29fac292119129-7"> </div><div class="crayon-line" id="crayon-60ed950d29fac292119129-8"> </div><div class="crayon-line" id="crayon-60ed950d29fac292119129-9"># plots to compare</div><div class="crayon-line" id="crayon-60ed950d29fac292119129-10">p1 <div class="crayon-line" id="crayon-60ed950d29fac292119129-11">p2 <div class="crayon-line" id="crayon-60ed950d29fac292119129-12">p3 <div class="crayon-line" id="crayon-60ed950d29fac292119129-13">p4 <div class="crayon-line" id="crayon-60ed950d29fac292119129-14"> </div><div class="crayon-line" id="crayon-60ed950d29fac292119129-15">library(gridExtra)</div><div class="crayon-line" id="crayon-60ed950d29fac292119129-16">grid.arrange(p1, p2, p3, p4, nrow = 2) # Arrange multiple grobs on a page (將不會影響到par()中參數設定)</div></div></div></div></div></div></div></div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p><img loading="lazy" class="alignnone size-full wp-image-1290" src="/wp-content/uploads/2018/09/Rplot05-1.jpeg" alt="partitional clustering" width="1000" height="996" srcset="/wp-content/uploads/2018/09/Rplot05-1.jpeg 1000w,/wp-content/uploads/2018/09/Rplot05-1-150x150.jpeg 150w,/wp-content/uploads/2018/09/Rplot05-1-300x300.jpeg 300w,/wp-content/uploads/2018/09/Rplot05-1-768x765.jpeg 768w,/wp-content/uploads/2018/09/Rplot05-1-830x827.jpeg 830w,/wp-content/uploads/2018/09/Rplot05-1-230x229.jpeg 230w,/wp-content/uploads/2018/09/Rplot05-1-350x349.jpeg 350w,/wp-content/uploads/2018/09/Rplot05-1-480x478.jpeg 480w" sizes="(max-width: 1000px) 100vw, 1000px"></p>
<p>但僅憑上述嘗試，我們還是很難決定最佳群數該設定為多少。</p>
<div align="center"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><br>
<br>
<ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7946632597933771" data-ad-slot="8154450369" data-ad-format="auto" data-full-width-responsive="true"></ins><br>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
<h4>Step 5: K-Medoid分群</h4>
<p><strong>（可以依情況決定是否將Step 4的kmeans()法取代）</strong></p>
<ul>
<li>使用K-Means演算法的兩個限制為：
<ul>
<li><span style="color: #9f6ad4;">不能處理類別變數資料 （kmeans(x = …只能為數值矩陣…)）</span></li>
<li><span style="color: #9f6ad4;">容易受離群值影響</span></li>
</ul>
</li>
<li>使用K-Mediods演算法時，中心點將選選擇群內某個觀測值，而非群內平均值，就像中位數一樣，較不易受離群值所影響。是K-Means更強大的版本。</li>
<li>K-Medoids最常使用的演算法為PAM(Partitioning Around Medoid, 分割環繞物件法）。</li>
<li><span style="color: #ff0000;">K-Medoids比K-Means更強大之處在於他最小化相異度加總值，而非僅是歐式距離平方和</span>。<span style="color: #ff0000;">(The goal is to find k representative objects which minimize the sum of the dissimilarities of the observations to their closest representative object. )</span></li>
<li>但遇到資料量較大時，K-Medoid法所需要的記憶體和運算時間都是龐大的，此時可以另外考慮clara(Clustering Large Applications)函數。</li>
</ul>
<p>我們可以使用cluster套件中的pam()函數來執行。幾個重要參數包括：</p>
<ul>
<li><span style="color: #9f6ad4;">x: 可以為數值矩陣、data frame、甚是是<strong>相異度矩陣(dissimilarity matrix)</strong></span>。
<ul>
<li>若為numeric matrix or data frame須確保變數只能為數值。</li>
<li>若為dissimalirity matrix，可以是透過daisy()或dist()計算個體間距離的結果。
<ul>
<li>其中daisy()可以處理類別行變數的距離矩陣計算，須設定參數metric = c(“gower”)。</li>
<li>而傳統dist()則可以指定使用method = “euclidean” 或 “manhattan”。</li>
</ul>
</li>
</ul>
</li>
<li>k: 指定分群數目。</li>
<li>diss: TRUE/FALSE。投入的x是否為dissmilarity matrix。</li>
<li>metric: 如果投入的x為matrix或data frame，需指定計算dissimilarity matrix所用的距離衡量方式，可為”euclidean” 或 “manhattan”。若投入的x已是dissimilarity matrix，則忽略該參數。</li>
</ul>
<p></p>

		<div id="crayon-60ed950d29fae630587894" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
kmedoid.cluster <- pam(x = inputData, k=3) 

# 分群結果視覺化
fviz_cluster(kmedoid.cluster, data = inputData,main = 'K-Medoid')</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fae630587894-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29fae630587894-2">2</div><div class="crayon-num" data-line="crayon-60ed950d29fae630587894-3">3</div><div class="crayon-num" data-line="crayon-60ed950d29fae630587894-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fae630587894-1">kmedoid.cluster <div class="crayon-line" id="crayon-60ed950d29fae630587894-2"> </div><div class="crayon-line" id="crayon-60ed950d29fae630587894-3"># 分群結果視覺化</div><div class="crayon-line" id="crayon-60ed950d29fae630587894-4">fviz_cluster(kmedoid.cluster, data = inputData,main = 'K-Medoid')</div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p><img loading="lazy" class="alignnone size-full wp-image-1339" src="/wp-content/uploads/2018/09/Rplot12-1.jpeg" alt="partitional clustering" width="800" height="797" srcset="/wp-content/uploads/2018/09/Rplot12-1.jpeg 800w,/wp-content/uploads/2018/09/Rplot12-1-150x150.jpeg 150w,/wp-content/uploads/2018/09/Rplot12-1-300x300.jpeg 300w,/wp-content/uploads/2018/09/Rplot12-1-768x765.jpeg 768w,/wp-content/uploads/2018/09/Rplot12-1-230x229.jpeg 230w,/wp-content/uploads/2018/09/Rplot12-1-350x349.jpeg 350w,/wp-content/uploads/2018/09/Rplot12-1-480x478.jpeg 480w" sizes="(max-width: 800px) 100vw, 800px"></p>
<p>並且我們可以直接利用K-Medoid產生的物件繪製silhouette plot。</p>

		<div id="crayon-60ed950d29faf771820521" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
# 繪製側影圖
plot(kmedoid.cluster,which.plots = 2)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29faf771820521-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29faf771820521-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29faf771820521-1"># 繪製側影圖</div><div class="crayon-line" id="crayon-60ed950d29faf771820521-2">plot(kmedoid.cluster,which.plots = 2)</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p><img loading="lazy" class="alignnone size-full wp-image-1340" src="/wp-content/uploads/2018/09/Rplot13-1.jpeg" alt="partitional clustering" width="800" height="797" srcset="/wp-content/uploads/2018/09/Rplot13-1.jpeg 800w,/wp-content/uploads/2018/09/Rplot13-1-150x150.jpeg 150w,/wp-content/uploads/2018/09/Rplot13-1-300x300.jpeg 300w,/wp-content/uploads/2018/09/Rplot13-1-768x765.jpeg 768w,/wp-content/uploads/2018/09/Rplot13-1-230x229.jpeg 230w,/wp-content/uploads/2018/09/Rplot13-1-350x349.jpeg 350w,/wp-content/uploads/2018/09/Rplot13-1-480x478.jpeg 480w" sizes="(max-width: 800px) 100vw, 800px"></p>
<div align="center"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><br>
<br>
<ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7946632597933771" data-ad-slot="8154450369" data-ad-format="auto" data-full-width-responsive="true"></ins><br>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
<h4>Step 6: 決定最適分群數目</h4>
<p>以下為3個常見幫助我們決定最佳分群數的方法：</p>
<ol>
<li>Elbow Method（亦稱做Hartigan法）</li>
<li>Average Silhouette method（側影圖法）</li>
<li>Gap statistic（Gap統計量，預測-觀測）</li>
</ol>
<h4>Elbow Method</h4>
<p>根據切割式分群的目的：最小化<strong><span style="color: #9f6ad4;">各群群內變異加總</span></strong> （<span style="color: #9f6ad4;"><strong>total within-cluster variation</strong></span> 或 <span style="color: #9f6ad4;"><strong>total within-cluster sum of square，簡稱wss</strong></span>）。我們依序計算k = 1 ~ k=n各種分群結果的群內變異加總值，並將之與對應的k值繪製成圖(x軸為k值，y軸為<span style="color: #9f6ad4;">wss</span>)。並找出曲線彎曲（如膝蓋彎曲）處對應的k值，即各群群內變異加總值趨於收斂的轉折點，作為最佳的分群數目。</p>

		<div id="crayon-60ed950d29fb0872799720" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
set.seed(123)

# function to compute total within-cluster sum of square 
wss <- function(k) {
  kmeans( x = inputData, centers =  k, nstart = 10 )$tot.withinss
}

# Compute and plot wss for k = 1 to k = 15
k.values <- 1:15

# extract wss for 2-15 clusters
wss_values <- map_dbl(k.values, wss)

plot(k.values, wss_values,
     type="b", pch = 19, frame = FALSE, 
     xlab="Number of clusters K",
     ylab="Total within-clusters sum of squares")</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-2">2</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-3">3</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-4">4</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-5">5</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-6">6</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-7">7</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-8">8</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-9">9</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-10">10</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-11">11</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-12">12</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-13">13</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-14">14</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-15">15</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-16">16</div><div class="crayon-num" data-line="crayon-60ed950d29fb0872799720-17">17</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fb0872799720-1">set.seed(123)</div><div class="crayon-line" id="crayon-60ed950d29fb0872799720-2"> </div><div class="crayon-line" id="crayon-60ed950d29fb0872799720-3"># function to compute total within-cluster sum of square </div><div class="crayon-line" id="crayon-60ed950d29fb0872799720-4">wss <div class="crayon-line" id="crayon-60ed950d29fb0872799720-5">  kmeans( x = inputData, centers =  k, nstart = 10 )$tot.withinss</div><div class="crayon-line" id="crayon-60ed950d29fb0872799720-6">}</div><div class="crayon-line" id="crayon-60ed950d29fb0872799720-7"> </div><div class="crayon-line" id="crayon-60ed950d29fb0872799720-8"># Compute and plot wss for k = 1 to k = 15</div><div class="crayon-line" id="crayon-60ed950d29fb0872799720-9">k.values <div class="crayon-line" id="crayon-60ed950d29fb0872799720-10"> </div><div class="crayon-line" id="crayon-60ed950d29fb0872799720-11"># extract wss for 2-15 clusters</div><div class="crayon-line" id="crayon-60ed950d29fb0872799720-12">wss_values <div class="crayon-line" id="crayon-60ed950d29fb0872799720-13"> </div><div class="crayon-line" id="crayon-60ed950d29fb0872799720-14">plot(k.values, wss_values,</div><div class="crayon-line" id="crayon-60ed950d29fb0872799720-15">     type="b", pch = 19, frame = FALSE, </div><div class="crayon-line" id="crayon-60ed950d29fb0872799720-16">     xlab="Number of clusters K",</div><div class="crayon-line" id="crayon-60ed950d29fb0872799720-17">     ylab="Total within-clusters sum of squares")</div></div></div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>由下圖可觀察到，wss約在k=4時出現轉折彎曲，即wss下降幅度開始變小（趨於穩定）。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-1295" src="/wp-content/uploads/2018/09/Rplot06-1.jpeg" alt="partitional clustering" width="800" height="797" srcset="/wp-content/uploads/2018/09/Rplot06-1.jpeg 800w,/wp-content/uploads/2018/09/Rplot06-1-150x150.jpeg 150w,/wp-content/uploads/2018/09/Rplot06-1-300x300.jpeg 300w,/wp-content/uploads/2018/09/Rplot06-1-768x765.jpeg 768w,/wp-content/uploads/2018/09/Rplot06-1-230x229.jpeg 230w,/wp-content/uploads/2018/09/Rplot06-1-350x349.jpeg 350w,/wp-content/uploads/2018/09/Rplot06-1-480x478.jpeg 480w" sizes="(max-width: 800px) 100vw, 800px"></p>
<p>而幸好這樣複雜的計算與繪圖過程，我們都可以透過factoextra套件中的fviz_nbclust()函數來達成。便可將上述數行程式碼縮減到一行指令。</p>

		<div id="crayon-60ed950d29fb2210563369" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
set.seed(123)
fviz_nbclust(x = inputData,FUNcluster = kmeans, method = "wss")</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fb2210563369-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29fb2210563369-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fb2210563369-1">set.seed(123)</div><div class="crayon-line" id="crayon-60ed950d29fb2210563369-2">fviz_nbclust(x = inputData,FUNcluster = kmeans, method = "wss")</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p><img loading="lazy" class="alignnone size-full wp-image-1296" src="/wp-content/uploads/2018/09/Rplot07-1.jpeg" alt="partitional clustering" width="800" height="797" srcset="/wp-content/uploads/2018/09/Rplot07-1.jpeg 800w,/wp-content/uploads/2018/09/Rplot07-1-150x150.jpeg 150w,/wp-content/uploads/2018/09/Rplot07-1-300x300.jpeg 300w,/wp-content/uploads/2018/09/Rplot07-1-768x765.jpeg 768w,/wp-content/uploads/2018/09/Rplot07-1-230x229.jpeg 230w,/wp-content/uploads/2018/09/Rplot07-1-350x349.jpeg 350w,/wp-content/uploads/2018/09/Rplot07-1-480x478.jpeg 480w" sizes="(max-width: 800px) 100vw, 800px"></p>
<h4>Average Silhouette Method</h4>
<ul>
<li>簡單來說，<span style="color: #9f6ad4;">average silhouette method</span>衡量<span style="color: #9f6ad4;">各分群結果的品質 ((\(C_{1} \sim C_{k})\)都會有average silhouette width)</span>。</li>
<li>該指標是透過計算各群聚中，各個物件的<a href="https://en.wikipedia.org/wiki/Silhouette_(clustering)" target="_blank" rel="noopener noreferrer">silhouette width</a>，並取群內silhouette with平均值而得。</li>
<li>每一群聚中，<span style="color: #9f6ad4;"><span style="text-decoration: underline;">各物件的silhouette with</span>衡量的是<span style="text-decoration: underline;">該物件是否被很好的歸類在合適的群聚</span></span>。
<ul>
<li><span style="color: #333333;"><strong>若silhouette with若為正數且值越大，則表示該觀測植被很好的分派到合適的群聚。</strong></span></li>
<li><span style="color: #333333;"><strong>若silhouette with值很小或甚至為負數，則表示該觀測值的分群結果不是很合適</strong></span>。</li>
</ul>
</li>
<li><span style="text-decoration: underline; color: #9f6ad4;">整個群聚</span>的<span style="text-decoration: underline; color: #9f6ad4;">average silhouette width</span>則是將各觀測值的silhouette with取平均所計算而得。<span style="color: #9f6ad4;"><strong>整個群聚的average silhouette with越大表示分群做得越好</strong></span>。</li>
<li>最後，再將所有k群聚的average silhouette with取平均，<span style="color: #9f6ad4;">得出 每一個對應k群分群結果的average silhouette width</span>。</li>
<li>於是我們可以得到k=1~k=n不同分群結果的average silhouette width。而其中<strong><span style="color: #9f6ad4;">極大化average silhouette width的k值即為最佳分群數目</span></strong>。</li>
</ul>
<p>我們先來計算與視覺化，當k=5各群的average silhouette width以及整體分群結果的average silhouette width。</p>
<p>首先我們使用cluster套件中的silhouette()函數來計算每個觀測值得silhouette width。（初始計算結果並沒有各群的平均silhouette with）</p>

		<div id="crayon-60ed950d29fb3877651034" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
km.res <- kmeans(x = inputData, centers = 5, nstart = 25)
ss <- silhouette(km.res$cluster, dist(inputData))
#       cluster neighbor    sil_width
#  [1,]       3        2  0.448730181
#  [2,]       4        3  0.054455351
#  [3,]       4        1  0.432969809
#  [4,]       2        3  0.228329605
#  [5,]       4        1  0.448896074
#  [6,]       4        2  0.310290004
#  [7,]       1        2  0.279323646
#  [8,]       1        2 -0.026200144
#  [9,]       4        3  0.246185137
# [10,]       3        4  0.426879411
# [11,]       1        2  0.254134176
# [12,]       5        2  0.239121931
# [13,]       4        1  0.260389832
# [14,]       2        1  0.364248885
# [15,]       5        2  0.512603957
# [16,]       2        1  0.260830275
# [17,]       2        5  0.305423442
# [18,]       3        4  0.375176086
# [19,]       5        2  0.548907843
# [20,]       4        3  0.073438587
# [21,]       1        2  0.425221521
# [22,]       4        3  0.408874055
# [23,]       5        2  0.140353445
# [24,]       3        2  0.522765736
# [25,]       2        4  0.143376681
# [26,]       2        5  0.121906504
# [27,]       2        5  0.083351231
# [28,]       4        3  0.427993699
# [29,]       5        2  0.545620065
# [30,]       1        2  0.331314848
# [31,]       4        3  0.317371390
# [32,]       4        1  0.361348047
# [33,]       3        2  0.430379777
# [34,]       5        2  0.548983948
# [35,]       1        2 -0.016788571
# [36,]       2        1  0.246846452
# [37,]       2        1  0.143477706
# [38,]       1        2 -0.007681734
# [39,]       1        2  0.341420835
# [40,]       3        2  0.566811560
# [41,]       5        2  0.424934521
# [42,]       3        2  0.226342361
# [43,]       4        3  0.178417378
# [44,]       1        2  0.296027252
# [45,]       5        2  0.430596483
# [46,]       2        1  0.436958480
# [47,]       1        2 -0.014964942
# [48,]       5        2  0.349650799
# [49,]       5        1  0.295667125
# [50,]       2        1  0.403192800
# attr(,"Ordered")
# [1] FALSE
# attr(,"call")
# silhouette.default(x = km.res$cluster, dist = dist(inputData))
# attr(,"class")
# [1] "silhouette"</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-2">2</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-3">3</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-4">4</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-5">5</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-6">6</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-7">7</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-8">8</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-9">9</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-10">10</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-11">11</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-12">12</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-13">13</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-14">14</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-15">15</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-16">16</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-17">17</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-18">18</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-19">19</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-20">20</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-21">21</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-22">22</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-23">23</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-24">24</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-25">25</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-26">26</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-27">27</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-28">28</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-29">29</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-30">30</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-31">31</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-32">32</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-33">33</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-34">34</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-35">35</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-36">36</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-37">37</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-38">38</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-39">39</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-40">40</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-41">41</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-42">42</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-43">43</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-44">44</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-45">45</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-46">46</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-47">47</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-48">48</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-49">49</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-50">50</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-51">51</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-52">52</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-53">53</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-54">54</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-55">55</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-56">56</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-57">57</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-58">58</div><div class="crayon-num" data-line="crayon-60ed950d29fb3877651034-59">59</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fb3877651034-1">km.res <div class="crayon-line" id="crayon-60ed950d29fb3877651034-2">ss <div class="crayon-line" id="crayon-60ed950d29fb3877651034-3">#       cluster neighbor    sil_width</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-4">#  [1,]       3        2  0.448730181</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-5">#  [2,]       4        3  0.054455351</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-6">#  [3,]       4        1  0.432969809</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-7">#  [4,]       2        3  0.228329605</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-8">#  [5,]       4        1  0.448896074</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-9">#  [6,]       4        2  0.310290004</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-10">#  [7,]       1        2  0.279323646</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-11">#  [8,]       1        2 -0.026200144</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-12">#  [9,]       4        3  0.246185137</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-13"># [10,]       3        4  0.426879411</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-14"># [11,]       1        2  0.254134176</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-15"># [12,]       5        2  0.239121931</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-16"># [13,]       4        1  0.260389832</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-17"># [14,]       2        1  0.364248885</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-18"># [15,]       5        2  0.512603957</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-19"># [16,]       2        1  0.260830275</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-20"># [17,]       2        5  0.305423442</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-21"># [18,]       3        4  0.375176086</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-22"># [19,]       5        2  0.548907843</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-23"># [20,]       4        3  0.073438587</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-24"># [21,]       1        2  0.425221521</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-25"># [22,]       4        3  0.408874055</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-26"># [23,]       5        2  0.140353445</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-27"># [24,]       3        2  0.522765736</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-28"># [25,]       2        4  0.143376681</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-29"># [26,]       2        5  0.121906504</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-30"># [27,]       2        5  0.083351231</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-31"># [28,]       4        3  0.427993699</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-32"># [29,]       5        2  0.545620065</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-33"># [30,]       1        2  0.331314848</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-34"># [31,]       4        3  0.317371390</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-35"># [32,]       4        1  0.361348047</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-36"># [33,]       3        2  0.430379777</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-37"># [34,]       5        2  0.548983948</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-38"># [35,]       1        2 -0.016788571</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-39"># [36,]       2        1  0.246846452</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-40"># [37,]       2        1  0.143477706</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-41"># [38,]       1        2 -0.007681734</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-42"># [39,]       1        2  0.341420835</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-43"># [40,]       3        2  0.566811560</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-44"># [41,]       5        2  0.424934521</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-45"># [42,]       3        2  0.226342361</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-46"># [43,]       4        3  0.178417378</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-47"># [44,]       1        2  0.296027252</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-48"># [45,]       5        2  0.430596483</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-49"># [46,]       2        1  0.436958480</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-50"># [47,]       1        2 -0.014964942</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-51"># [48,]       5        2  0.349650799</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-52"># [49,]       5        1  0.295667125</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-53"># [50,]       2        1  0.403192800</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-54"># attr(,"Ordered")</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-55"># [1] FALSE</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-56"># attr(,"call")</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-57"># silhouette.default(x = km.res$cluster, dist = dist(inputData))</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-58"># attr(,"class")</div><div class="crayon-line" id="crayon-60ed950d29fb3877651034-59"># [1] "silhouette"</div></div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>如果要計算<span style="color: #9f6ad4;">整體分群結果的average silhouette width</span>，我們可以將結果的第三欄取平均值。</p>

		<div id="crayon-60ed950d29fb7173373944" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
mean(ss[, 3])
# [1] 0.3030781</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fb7173373944-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29fb7173373944-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fb7173373944-1">mean(ss[, 3])</div><div class="crayon-line" id="crayon-60ed950d29fb7173373944-2"># [1] 0.3030781</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>如果想要計算與視覺化<span style="color: #9f6ad4;">各群的average silhouette width</span>，我們可以使用plot()函數。</p>

		<div id="crayon-60ed950d29fb8832334930" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
plot(ss)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fb8832334930-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fb8832334930-1">plot(ss)</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>從下圖我們可以觀察到：</p>
<ul>
<li>j = 1 ~ 5。表示有五個群聚\(C_{j}\)。</li>
<li>\(n_{j}\):各群觀測值數。</li>
<li>\(ave_{i\in C_{j}}s_{i}\): 群聚\(C_{j}\)的average silhouette width。</li>
<li>\(S_{i}\): 各觀測值的silhouette width。</li>
<li>圖最下方的average silhouette width則為整體分群結果的值。</li>
</ul>
<p><img loading="lazy" class="alignnone size-full wp-image-1310" src="/wp-content/uploads/2018/09/Rplot08-1.jpeg" alt="partitional clustering" width="800" height="796" srcset="/wp-content/uploads/2018/09/Rplot08-1.jpeg 800w,/wp-content/uploads/2018/09/Rplot08-1-150x150.jpeg 150w,/wp-content/uploads/2018/09/Rplot08-1-300x300.jpeg 300w,/wp-content/uploads/2018/09/Rplot08-1-768x764.jpeg 768w,/wp-content/uploads/2018/09/Rplot08-1-230x229.jpeg 230w,/wp-content/uploads/2018/09/Rplot08-1-350x348.jpeg 350w,/wp-content/uploads/2018/09/Rplot08-1-480x478.jpeg 480w" sizes="(max-width: 800px) 100vw, 800px"></p>
<p>有了以上單一k群結果的silhouette計算概念後，我們進一步比較不同k值（假設k=2 ~ 15)的分群結果品質。</p>

		<div id="crayon-60ed950d29fba737957168" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
# function to compute average silhouette for k clusters
avg_sil <- function(k) {
  km.res <- kmeans(x = inputData, centers = k, nstart = 25)
  ss <- silhouette(km.res$cluster, dist(inputData))
  mean(ss[, 3])
}

# Compute and plot wss for k = 2 to k = 15
k.values <- 2:15

# extract avg silhouette for 2-15 clusters
avg_sil_values <- map_dbl(k.values, avg_sil)

plot(k.values, avg_sil_values,
     type = "b", pch = 19, frame = FALSE, 
     xlab = "Number of clusters K",
     ylab = "Average Silhouettes")</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-2">2</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-3">3</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-4">4</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-5">5</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-6">6</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-7">7</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-8">8</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-9">9</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-10">10</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-11">11</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-12">12</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-13">13</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-14">14</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-15">15</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-16">16</div><div class="crayon-num" data-line="crayon-60ed950d29fba737957168-17">17</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fba737957168-1"># function to compute average silhouette for k clusters</div><div class="crayon-line" id="crayon-60ed950d29fba737957168-2">avg_sil <div class="crayon-line" id="crayon-60ed950d29fba737957168-3">  km.res <div class="crayon-line" id="crayon-60ed950d29fba737957168-4">  ss <div class="crayon-line" id="crayon-60ed950d29fba737957168-5">  mean(ss[, 3])</div><div class="crayon-line" id="crayon-60ed950d29fba737957168-6">}</div><div class="crayon-line" id="crayon-60ed950d29fba737957168-7"> </div><div class="crayon-line" id="crayon-60ed950d29fba737957168-8"># Compute and plot wss for k = 2 to k = 15</div><div class="crayon-line" id="crayon-60ed950d29fba737957168-9">k.values <div class="crayon-line" id="crayon-60ed950d29fba737957168-10"> </div><div class="crayon-line" id="crayon-60ed950d29fba737957168-11"># extract avg silhouette for 2-15 clusters</div><div class="crayon-line" id="crayon-60ed950d29fba737957168-12">avg_sil_values <div class="crayon-line" id="crayon-60ed950d29fba737957168-13"> </div><div class="crayon-line" id="crayon-60ed950d29fba737957168-14">plot(k.values, avg_sil_values,</div><div class="crayon-line" id="crayon-60ed950d29fba737957168-15">     type = "b", pch = 19, frame = FALSE, </div><div class="crayon-line" id="crayon-60ed950d29fba737957168-16">     xlab = "Number of clusters K",</div><div class="crayon-line" id="crayon-60ed950d29fba737957168-17">     ylab = "Average Silhouettes")</div></div></div></div></div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>由下圖我們可以比較出，分兩群的結果最佳，分四群的結果次之。</p>
<p><img loading="lazy" class="alignnone size-full wp-image-1311" src="/wp-content/uploads/2018/09/Rplot09-1.jpeg" alt="partitional clustering" width="800" height="797" srcset="/wp-content/uploads/2018/09/Rplot09-1.jpeg 800w,/wp-content/uploads/2018/09/Rplot09-1-150x150.jpeg 150w,/wp-content/uploads/2018/09/Rplot09-1-300x300.jpeg 300w,/wp-content/uploads/2018/09/Rplot09-1-768x765.jpeg 768w,/wp-content/uploads/2018/09/Rplot09-1-230x229.jpeg 230w,/wp-content/uploads/2018/09/Rplot09-1-350x349.jpeg 350w,/wp-content/uploads/2018/09/Rplot09-1-480x478.jpeg 480w" sizes="(max-width: 800px) 100vw, 800px"></p>
<p>像Elbow Method一樣，我們也可以使用<span style="color: #9f6ad4;">fviz_nbclust函數</span>將上述結果的程式碼指令濃縮成一行並繪出。<span style="color: #9f6ad4;">只需要將參數method從”</span>wss<span style="color: #9f6ad4;">“改成</span>“silhouette<span style="color: #9f6ad4;">“即可</span>！</p>

		<div id="crayon-60ed950d29fbc108438292" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
fviz_nbclust(inputData, kmeans, method = "silhouette")</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fbc108438292-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fbc108438292-1">fviz_nbclust(inputData, kmeans, method = "silhouette")</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p><img loading="lazy" class="alignnone size-full wp-image-1312" src="/wp-content/uploads/2018/09/Rplot10-1.jpeg" alt="partitional clustering" width="800" height="797" srcset="/wp-content/uploads/2018/09/Rplot10-1.jpeg 800w,/wp-content/uploads/2018/09/Rplot10-1-150x150.jpeg 150w,/wp-content/uploads/2018/09/Rplot10-1-300x300.jpeg 300w,/wp-content/uploads/2018/09/Rplot10-1-768x765.jpeg 768w,/wp-content/uploads/2018/09/Rplot10-1-230x229.jpeg 230w,/wp-content/uploads/2018/09/Rplot10-1-350x349.jpeg 350w,/wp-content/uploads/2018/09/Rplot10-1-480x478.jpeg 480w" sizes="(max-width: 800px) 100vw, 800px"></p>
<h4>Gap statistic</h4>
<ul>
<li>Gap Statistic法可以應用在任何分群演算法上（比如說分裂式分群或階層式分群）。</li>
<li><strong>Gap Statistic(k): </strong>比較不同k水準值下，<span style="text-decoration: underline; color: #9f6ad4;">實際觀測值分群結果的群內總變異</span><span style="text-decoration: underline;"><span style="color: #9f6ad4; text-decoration: underline;">(\(W_{k}\))</span></span>與<span style="text-decoration: underline;"><span style="color: #9f6ad4; text-decoration: underline;">自助抽樣法B回產生樣本分群結果期望群內總變異(\(\overline{W_{k}}\))</span></span>，即衡量<span style="color: #9f6ad4;"><span style="text-decoration: underline;">觀測</span>和<span style="text-decoration: underline;">預期</span>之間的差距</span>。</li>
<li><strong>群內總變異的期望值(\(\overline{W_{k}}\)): </strong>使用<span style="color: #9f6ad4;">自助抽樣法(Bootstap)</span>進行B回重新抽樣，計算k水準值下重新抽樣樣本分群結果的群內總變異(\(W_{ki}\sim W_{kB}\))，並計算 k水準值下的群內總變異期望值，即<br>
$$E(W_{k})=mean(W_{k})=\overline{W_{k}}=\frac{1}{B}\sum_{i=1}^B\log (W_{ki})$$</li>
<li><span style="color: #333333;"><strong>群內總變異的<span style="color: #9f6ad4;">標準差Standard Deviation(\(Sd(W_{k})\))</span>:<br>
</strong>$$Sd(W_{k})=\sqrt{\frac{1}{B}\sum_{i=1}^B(\log  (W_{ki}) – \overline{W_{k}})^2 }$$</span></li>
<li><strong>群內總變異樣本平均值的<span style="color: #9f6ad4;">標準誤Standard Error(\(s_{k}\)): </span></strong>即樣本平均值(\(\overline{W_{k}}\))與真實母體平均值(\(\mu_{k}\))的變異。<span style="color: #ff0000;"><strong><br>
</strong></span>$$s_{k} = sd(k)\times \sqrt{1+\frac{1}{B}}$$</li>
<li><span style="color: #ff0000;">自助抽樣將模擬蒙地卡羅的採樣過程，也就是說每一個變數\(x_{i}\)，會依據他們的最大最小值範圍[\(\min(x_{i}),\max(x_{i})\)]，來重新計算標準化後的值。</span></li>
<li>Gap Statistic則是計算在不同k水準值下，觀測與預期值的總群內變異差異，公式如下：<br>
$$Gap(k) =\overline{W_{k}} -{W_{k}}=\frac{1}{B}\sum_{i=1}^B\log (W_{ki}) – W_{k}$$</li>
<li> 並且我們選擇使Gap(k)最大化的最小的k值，以符合：<br>
$$Gap(k)\geq Gap(k+1)-s_{k+1}$$<br>
即表示<span style="text-decoration: underline;">k群的分群結構</span>和<span style="text-decoration: underline;">虛無假設的uniform分配（沒有分群）</span>有<span style="text-decoration: underline;">很大的差距</span>。</li>
</ul>
<p>我們可以透過cluster套件中的clusGap()函數來計算不同k水平值對應的該統計量(Gap)以及標準誤(Standard Error, SE)。也因為我們要找到使最大化Gap(k)的最小k值，所以記得調整參數method=”firstmax”。將結果印出後，我們可看到每個對應k水平值的：</p>
<ul>
<li>logW: 觀測值群內總變異。</li>
<li>E.logW: 群內總變異期望值。</li>
<li>gap: E.logW – logW統計量。</li>
<li>SE.sim: 標準誤(simulation standard error)。</li>
</ul>
<p></p>

		<div id="crayon-60ed950d29fbe818221813" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
# compute gap statistic
set.seed(123)
gap_stat <- clusGap(x = inputData, FUN = kmeans, nstart = 25,
                    K.max = 10, B = 50)
# Print the result
print(gap_stat, method = "firstmax")

# Clustering Gap statistic ["clusGap"] from call:
# clusGap(x = inputData, FUNcluster = kmeans, K.max = 10, B = 50,     nstart = 25)
# B=50 simulated reference sets, k = 1..10; spaceH0="scaledPCA"
#   --> Number of clusters (method 'firstmax'): 4
#            logW   E.logW       gap     SE.sim
#   [1,] 3.458369 3.638250 0.1798804 0.03653200
#   [2,] 3.135112 3.371452 0.2363409 0.03394132
#   [3,] 2.977727 3.235385 0.2576588 0.03635372
#   [4,] 2.826221 3.120441 0.2942199 0.03615597
#   [5,] 2.738868 3.020288 0.2814197 0.03950085
#   [6,] 2.669860 2.933533 0.2636730 0.03957994
#   [7,] 2.598748 2.855759 0.2570109 0.03809451
#   [8,] 2.531626 2.784000 0.2523744 0.03869283
#   [9,] 2.468162 2.716498 0.2483355 0.03971815
#  [10,] 2.394884 2.652241 0.2573567 0.04104674</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-1">1</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-2">2</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-3">3</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-4">4</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-5">5</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-6">6</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-7">7</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-8">8</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-9">9</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-10">10</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-11">11</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-12">12</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-13">13</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-14">14</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-15">15</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-16">16</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-17">17</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-18">18</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-19">19</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-20">20</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-21">21</div><div class="crayon-num" data-line="crayon-60ed950d29fbe818221813-22">22</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fbe818221813-1"># compute gap statistic</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-2">set.seed(123)</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-3">gap_stat <div class="crayon-line" id="crayon-60ed950d29fbe818221813-4">                    K.max = 10, B = 50)</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-5"># Print the result</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-6">print(gap_stat, method = "firstmax")</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-7"> </div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-8"># Clustering Gap statistic ["clusGap"] from call:</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-9"># clusGap(x = inputData, FUNcluster = kmeans, K.max = 10, B = 50,     nstart = 25)</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-10"># B=50 simulated reference sets, k = 1..10; spaceH0="scaledPCA"</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-11">#   --> Number of clusters (method 'firstmax'): 4</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-12">#            logW   E.logW       gap     SE.sim</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-13">#   [1,] 3.458369 3.638250 0.1798804 0.03653200</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-14">#   [2,] 3.135112 3.371452 0.2363409 0.03394132</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-15">#   [3,] 2.977727 3.235385 0.2576588 0.03635372</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-16">#   [4,] 2.826221 3.120441 0.2942199 0.03615597</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-17">#   [5,] 2.738868 3.020288 0.2814197 0.03950085</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-18">#   [6,] 2.669860 2.933533 0.2636730 0.03957994</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-19">#   [7,] 2.598748 2.855759 0.2570109 0.03809451</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-20">#   [8,] 2.531626 2.784000 0.2523744 0.03869283</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-21">#   [9,] 2.468162 2.716498 0.2483355 0.03971815</div><div class="crayon-line" id="crayon-60ed950d29fbe818221813-22">#  [10,] 2.394884 2.652241 0.2573567 0.04104674</div></div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>我們進一步使用fviz_gap_stat()函數將上面gap統計量計算結果視覺化。而根據Gap(k)統計量，最佳分群數為4組。</p>

		<div id="crayon-60ed950d29fc0113258213" class="crayon-syntax crayon-theme-hwj-based-on-monokai crayon-font-monospace crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 20px !important;">
fviz_gap_stat(gap_stat)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-60ed950d29fc0113258213-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-60ed950d29fc0113258213-1">fviz_gap_stat(gap_stat)</div></div></td>
					</tr>
				</table>
			</div>
		</div>

<p><img loading="lazy" class="alignnone size-full wp-image-1333" src="/wp-content/uploads/2018/09/Rplot11-1.jpeg" alt="partitional clustering" width="800" height="797" srcset="/wp-content/uploads/2018/09/Rplot11-1.jpeg 800w,/wp-content/uploads/2018/09/Rplot11-1-150x150.jpeg 150w,/wp-content/uploads/2018/09/Rplot11-1-300x300.jpeg 300w,/wp-content/uploads/2018/09/Rplot11-1-768x765.jpeg 768w,/wp-content/uploads/2018/09/Rplot11-1-230x229.jpeg 230w,/wp-content/uploads/2018/09/Rplot11-1-350x349.jpeg 350w,/wp-content/uploads/2018/09/Rplot11-1-480x478.jpeg 480w" sizes="(max-width: 800px) 100vw, 800px"></p>
<h3>總結</h3>
<ul>
<li>影響切割式分群的幾個參數包括：<span style="color: #9f6ad4;">隨機起始中心點的選擇、中心點定義、以及目標式最小化「距離」衡量定義</span>。
<ul>
<li>中心點：
<ul>
<li>kmeans的中心點是群內的平均值，易受離群值影響。</li>
<li>kmedoid的中心點則是實際的點（類似中位數），不易受極端值影響。</li>
</ul>
</li>
<li>目標式：
<ul>
<li>kmeans是以最小化群內各點到中心點的「歐式距離」為目標<br>
(minimize the sum of squared euclidean distances from points to the assigned cluster)</li>
<li>kmedoid是以最小化群內各點至中心點的「變異度」為目標<br>
(minimize the sum of the dissimilarities of the observations to their closest representative object)</li>
</ul>
</li>
</ul>
</li>
<li>因為切割式分群需使用者決定<span style="color: #9f6ad4;">最適的群數</span>，因此必須依據分群目的，綜合考量不同的方法（elbow method, average silhouette width, gap statistic)計算出的不同k值對應的組內變異加總值，來做決定。</li>
<li>由於目標式最小化的標的不同，雖然kmedoid效果會比kmeans更強大，但因為kmedoid需計算n^2的相異度矩陣，會耗費時間和運算記憶體，因此如果遇到大型數據時，可以使用clara()。pam()目前有觀測值上限(<i>n <= 65536)。</i></li>
</ul>
<div align="center"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><br>
<br>
<ins class="adsbygoogle" style="display: block;" data-ad-client="ca-pub-7946632597933771" data-ad-slot="8154450369" data-ad-format="auto" data-full-width-responsive="true"></ins><br>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
<hr>
<p>更多統計模型筆記連結：</p>
<ol>
<li><a href="/linear-regression-%e7%b7%9a%e6%80%a7%e8%bf%b4%e6%ad%b8%e6%a8%a1%e5%9e%8b/" target="_blank" rel="noopener noreferrer">Linear Regression | 線性迴歸模型 | using AirQuality Dataset</a></li>
<li><a href="/regularized-regression-ridge-lasso-elastic/" target="_blank" rel="noopener noreferrer">Regularized Regression | 正規化迴歸 – Ridge, Lasso, Elastic Net | R語言</a></li>
<li><a href="/logistic-regression-part1-%e7%be%85%e5%90%89%e6%96%af%e8%bf%b4%e6%ad%b8/" target="_blank" rel="noopener noreferrer">Logistic Regression 羅吉斯迴歸 | part1 – 資料探勘與處理 | 統計 R語言</a></li>
<li><a href="/logistic-regression-part2-%e7%be%85%e5%90%89%e6%96%af%e8%bf%b4%e6%ad%b8/" target="_blank" rel="noopener noreferrer">Logistic Regression 羅吉斯迴歸 | part2 – 模型建置、診斷與比較 | R語言</a></li>
<li><a href="/decision-tree-cart-%e6%b1%ba%e7%ad%96%e6%a8%b9/" target="_blank" rel="noopener noreferrer">Decision Tree 決策樹 | CART, Conditional Inference Tree, Random Forest</a></li>
<li><a href="/regression-tree-%e8%bf%b4%e6%ad%b8%e6%a8%b9-bagging-bootstrap-aggrgation-r%e8%aa%9e%e8%a8%80/" target="_blank" rel="noopener noreferrer">Regression Tree | 迴歸樹, Bagging, Bootstrap Aggregation | R語言</a></li>
<li><a href="/random-forests-%e9%9a%a8%e6%a9%9f%e6%a3%ae%e6%9e%97/" target="_blank" rel="noopener noreferrer">Random Forests 隨機森林 | randomForest, ranger, h2o | R語言</a></li>
<li><a href="/gradient-boosting-machines-gbm/" target="_blank" rel="noopener noreferrer">Gradient Boosting Machines GBM | gbm, xgboost, h2o | R語言</a></li>
<li><a href="/hierarchical-clustering-%e9%9a%8e%e5%b1%a4%e5%bc%8f%e5%88%86%e7%be%a4/" target="_blank" rel="noopener noreferrer">Hierarchical Clustering 階層式分群 | Clustering 資料分群 | R統計</a></li>
<li><a href="/partitional-clustering-kmeans-kmedoid/" target="_blank" rel="noopener noreferrer">Partitional Clustering | 切割式分群 | Kmeans, Kmedoid | Clustering 資料分群</a></li>
<li><a href="/principal-components-analysis-pca-%e4%b8%bb%e6%88%90%e4%bb%bd%e5%88%86%e6%9e%90/" target="_blank" rel="noopener noreferrer">Principal Components Analysis (PCA) | 主成份分析 | R 統計</a></li>
</ol>
			</div>

	<footer class="entry-footer">
		<span class="tags-links"> <a href="/tag/average-silhouette-width/" rel="tag">average silhouette width</a>0<a href="/tag/clustering/" rel="tag">clustering</a>0<a href="/tag/elbow-method/" rel="tag">elbow method</a>0<a href="/tag/gap-statistic/" rel="tag">gap statistic</a>0<a href="/tag/kmeans/" rel="tag">kmeans</a>0<a href="/tag/kmedoid/" rel="tag">kmedoid</a>0<a href="/tag/optimal-number-of-clusters/" rel="tag">optimal number of clusters</a>0<a href="/tag/partitional-clustering/" rel="tag">partitional clustering</a>0<a href="/tag/%e6%9c%80%e4%bd%b3%e5%88%86%e7%be%a4%e6%95%b8/" rel="tag">最佳分群數</a></span>	</footer>

	
</article>

				<nav class="navigation post-navigation" role="navigation">
		<h2 class="screen-reader-text">文章導覽列</h2>
		<div class="nav-links clearfix">
			<div class="nav-previous"><span>⟵</span><a href="/hierarchical-clustering-%e9%9a%8e%e5%b1%a4%e5%bc%8f%e5%88%86%e7%be%a4/" rel="prev">Hierarchical Clustering 階層式分群 | Clustering 資料分群 | R 統計</a></div><div class="nav-next"><a href="/principal-components-analysis-pca-%e4%b8%bb%e6%88%90%e4%bb%bd%e5%88%86%e6%9e%90/" rel="next">Principal Components Analysis (PCA) | 主成份分析 | R 統計</a><span>⟶</span></div>		</div>
	</nav>
	
			
<div id="comments" class="comments-area">

	
			<h4 class="comment-title">
			在《<span>Partitional Clustering 切割式分群 | Kmeans, Kmedoid | Clustering 資料分群</span>》中有 4 則留言		</h4>

		
		<ol class="comments-list">
					<li id="comment-3282" class="comment even thread-even depth-1">
			<article id="div-comment-3282" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="http://2.gravatar.com/avatar/ee7544dc6aa7bb9f3244849e26e89e0f?s=60&d=mm&r=g" srcset="http://2.gravatar.com/avatar/ee7544dc6aa7bb9f3244849e26e89e0f?s=120&d=mm&r=g 2x" class="avatar avatar-60 photo" height="60" width="60" loading="lazy">						<b class="fn">jordan41106</b><span class="says">表示:</span>					</div>

					<div class="comment-metadata">
						<a href="/partitional-clustering-kmeans-kmedoid/#comment-3282"><time datetime="2019-08-28T00:06:53+08:00">2019-08-2800:06:53</time></a>					</div>

									</footer>

				<div class="comment-content">
					<p>您好，非常感謝您！<br>
我已經完成了K-means，想請問說我如何反推知道例如ALABAMA被分在編號第幾的群中?</p>
				</div>

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="#comment-3282" data-commentid="3282" data-postid="1251" data-belowelement="div-comment-3282" data-respondelement="respond" data-replyto="回覆給「jordan41106」" aria-label="回覆給「jordan41106」">回覆</a></div>			</article>
		</li>
		<li id="comment-3315" class="comment odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-3315" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="http://0.gravatar.com/avatar/0da9684f5ff17ce66f55d6d71b4274af?s=60&d=mm&r=g" srcset="http://0.gravatar.com/avatar/0da9684f5ff17ce66f55d6d71b4274af?s=120&d=mm&r=g 2x" class="avatar avatar-60 photo" height="60" width="60" loading="lazy">						<b class="fn">Ian</b><span class="says">表示:</span>					</div>

					<div class="comment-metadata">
						<a href="/partitional-clustering-kmeans-kmedoid/#comment-3315"><time datetime="2020-07-20T16:24:59+08:00">2020-07-2016:24:59</time></a>					</div>

									</footer>

				<div class="comment-content">
					<p>打擾囉!想請問一下關於K-Means在R語言跑出來的結果中 (如下)，不曉得是否方便撥空回覆呢?<br>
1. “單一群內變異總和” = 56.11445及46.74796  -> 如何計算<br>
2. (between_SS / total_SS =  47.5 % -> 這個計算方式?</p>
<p>within cluster sum of squares by cluster:<br>
    [1] 56.11445 46.74796<br>
(between_SS / total_SS =  47.5 %)</p>
				</div>

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="#comment-3315" data-commentid="3315" data-postid="1251" data-belowelement="div-comment-3315" data-respondelement="respond" data-replyto="回覆給「Ian」" aria-label="回覆給「Ian」">回覆</a></div>			</article>
		</li>
		<li id="comment-3316" class="comment even thread-even depth-1">
			<article id="div-comment-3316" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="http://0.gravatar.com/avatar/0da9684f5ff17ce66f55d6d71b4274af?s=60&d=mm&r=g" srcset="http://0.gravatar.com/avatar/0da9684f5ff17ce66f55d6d71b4274af?s=120&d=mm&r=g 2x" class="avatar avatar-60 photo" height="60" width="60" loading="lazy">						<b class="fn">Ian</b><span class="says">表示:</span>					</div>

					<div class="comment-metadata">
						<a href="/partitional-clustering-kmeans-kmedoid/#comment-3316"><time datetime="2020-07-21T13:33:56+08:00">2020-07-2113:33:56</time></a>					</div>

									</footer>

				<div class="comment-content">
					<p>打擾囉!想請問一下關於決定最適分群方式中的Average Silhouette Method方法中，R程式內針對<br>
ss的結果，欄位neighbor的定義是?有點不太清楚，是否方便解惑，感謝</p>
				</div>

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="#comment-3316" data-commentid="3316" data-postid="1251" data-belowelement="div-comment-3316" data-respondelement="respond" data-replyto="回覆給「Ian」" aria-label="回覆給「Ian」">回覆</a></div>			</article>
		</li>
		<li id="comment-3320" class="comment odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-3320" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="http://0.gravatar.com/avatar/0da9684f5ff17ce66f55d6d71b4274af?s=60&d=mm&r=g" srcset="http://0.gravatar.com/avatar/0da9684f5ff17ce66f55d6d71b4274af?s=120&d=mm&r=g 2x" class="avatar avatar-60 photo" height="60" width="60" loading="lazy">						<b class="fn">Ian</b><span class="says">表示:</span>					</div>

					<div class="comment-metadata">
						<a href="/partitional-clustering-kmeans-kmedoid/#comment-3320"><time datetime="2020-08-30T15:39:10+08:00">2020-08-3015:39:10</time></a>					</div>

									</footer>

				<div class="comment-content">
					<p>應該可以使用cutree查原資料</p>
				</div>

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="#comment-3320" data-commentid="3320" data-postid="1251" data-belowelement="div-comment-3320" data-respondelement="respond" data-replyto="回覆給「Ian」" aria-label="回覆給「Ian」">回覆</a></div>			</article>
		</li>
		</ol>

		
	
	
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">發佈留言 <small><a rel="nofollow" id="cancel-comment-reply-link" href="/partitional-clustering-kmeans-kmedoid/#respond" style="display:none;">取消回覆</a></small></h3><form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate><p class="comment-notes"><span id="email-notes">發佈留言必須填寫的電子郵件地址不會公開。</span> 必填欄位標示為 <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">留言</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required"></textarea></p><p class="comment-form-author"><label for="author">顯示名稱 <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required="required"></p>
<p class="comment-form-email"><label for="email">電子郵件地址 <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" required="required"></p>
<p class="comment-form-url"><label for="url">個人網站網址</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200"></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="發佈留言"> <input type="hidden" name="comment_post_ID" value="1251" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p><div class="wantispam-required-fields"><input type="hidden" name="wantispam_t" class="wantispam-control wantispam-control-t" value="1626182925"><div class="wantispam-group wantispam-group-q" style="clear: both;">
					<label>Current ye@r <span class="required">*</span></label>
					<input type="hidden" name="wantispam_a" class="wantispam-control wantispam-control-a" value="2021">
					<input type="text" name="wantispam_q" class="wantispam-control wantispam-control-q" value="7.2.0" autocomplete="off">
				  </div>
<div class="wantispam-group wantispam-group-e" style="display: none;">
					<label>Leave this field empty</label>
					<input type="text" name="wantispam_e_email_url_website" class="wantispam-control wantispam-control-e" value="" autocomplete="off">
				  </div>
</div></form>	</div>
	
</div>

		
		</main>
	</div>

	

<div id="secondary" class="widget-area col-md-3" role="complementary">
	<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="/">
				<label>
					<span class="screen-reader-text">搜尋關鍵字:</span>
					<input type="search" class="search-field" placeholder="搜尋..." value="" name="s">
				</label>
				<input type="submit" class="search-submit" value="搜尋">
			</form></aside>
		<aside id="recent-posts-2" class="widget widget_recent_entries">
		<h3 class="widget-title">近期文章</h3>
		<ul>
											<li>
					<a href="/jbs-diner/">JB’s Diner | 陽光、綠意、自然度假風美式早午餐 | 台北 天母</a>
									</li>
											<li>
					<a href="/%e9%82%80%e6%9c%88%e5%85%92/">邀月兒 | 適合放鬆小酌的迷人高級餐酒館 | 台北 民生社區 富錦街</a>
									</li>
											<li>
					<a href="/eslite-cafe-%e4%bf%a1%e7%be%a9%e8%aa%a0%e5%93%81%e5%92%96%e5%95%a1/">信義誠品咖啡 Eslite Café | 美美的 優雅的 文青咖啡廳 | 台北 信義區</a>
									</li>
											<li>
					<a href="/%e5%b0%8f%e9%bc%8e%e8%86%be/">小鼎膾 | 新鮮美味的高品質日式丼飯、海鮮料理 | 台北信義 Bellavita B2</a>
									</li>
											<li>
					<a href="/gradient-boosting-machines-gbm/">Gradient Boosting Machines GBM | gbm, xgboost, h2o | R語言</a>
									</li>
					</ul>

		</aside><aside id="archives-2" class="widget widget_archive"><h3 class="widget-title">彙整</h3>
			<ul>
					<li><a href="/2019/08/">2019 年 8 月</a></li>
	<li><a href="/2019/04/">2019 年 4 月</a></li>
	<li><a href="/2019/03/">2019 年 3 月</a></li>
	<li><a href="/2019/02/">2019 年 2 月</a></li>
	<li><a href="/2019/01/">2019 年 1 月</a></li>
	<li><a href="/2018/12/">2018 年 12 月</a></li>
	<li><a href="/2018/10/">2018 年 10 月</a></li>
	<li><a href="/2018/09/">2018 年 9 月</a></li>
	<li><a href="/2018/08/">2018 年 8 月</a></li>
	<li><a href="/2018/07/">2018 年 7 月</a></li>
	<li><a href="/2018/05/">2018 年 5 月</a></li>
			</ul>

			</aside></div>
			</div>
		</div>
	</div>

	
	
    <a class="go-top"><i class="fa fa-angle-up"></i></a>
		
	<footer id="colophon" class="site-footer" role="contentinfo">
		<div class="site-info container">
			<a href="https://tw.wordpress.org/">本站採用 WordPress 建置</a>
			<span class="sep"> | </span>
			佈景主題採用由 aThemes 所設計的 <a href="https://athemes.com/theme/sydney" rel="designer">Sydney</a>。		</div>
	</footer>

	
</div>


<script type="text/javascript">
var sbiajaxurl = "/wp-admin/admin-ajax.php";
</script>
<script type="text/javascript" src="/wp-content/plugins/anti-spam/assets/js/anti-spam.js" id="anti-spam-script-js"></script>
<script type="text/javascript" src="/wp-content/themes/hwj-based-on-sydney/js/scripts.js" id="sydney-scripts-js"></script>
<script type="text/javascript" src="/wp-content/themes/hwj-based-on-sydney/js/main.min.js" id="sydney-main-js"></script>
<script type="text/javascript" src="/wp-content/themes/hwj-based-on-sydney/js/skip-link-focus-fix.js" id="sydney-skip-link-focus-fix-js"></script>


</body></html>
